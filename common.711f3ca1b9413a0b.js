"use strict";(self.webpackChunkpages=self.webpackChunkpages||[]).push([[76],{45:(M,c,e)=>{e.d(c,{X:()=>i});var t=e(3664);let i=(()=>{var r;class o{transform(n,a=5){return n.reduce((_=a,(m,u)=>{const h=(_=>_[_.length-1])(m);return h.length===_?m.push([u]):h.push(u),m}),[[]]);var _}static#t=r=()=>(this.\u0275fac=function(a){return new(a||o)},this.\u0275pipe=t.EJ8({name:"arrayChunk",type:o,pure:!0,standalone:!1}))}return r(),o})()},508:(M,c,e)=>{e.d(c,{A2:()=>d,Nr:()=>o,OM:()=>_,Vy:()=>a,Xb:()=>r,aD:()=>i,lo:()=>n,qh:()=>p,y0:()=>l,zL:()=>t});const t=/^\{(.*?)\}\/(.*)\.js$/i,i={allowParams:/^https:\/\/[^?]+[^?/]+\.js(\?.+)?$/,disallowParams:/^https:\/\/[^?]+[^?/]+\.js$/},r={allowParams:/^https?:\/\/[^?]+[^?/]+\.js(\?.+)?$/,disallowParams:/^https?:\/\/[^?]+[^?/]+\.js$/},o=/^\{(.*?)\}\/(.*)\.css$/i,l={allowParams:/^https:\/\/[^?]+[^?/]+\.css(\?.+)?$/,disallowParams:/^https:\/\/[^?]+[^?/]+\.css$/},n=/^https:\/\/(.+?)\.(forumfree\.it|forumcommunity\.net|blogfree\.net)\/\?t=(\d+)(#entry(\d+))?$/,a=/^\{(.*?)\}\/(.*)\.md$/i,d=/^https:\/\/(.+?)\.(jpg|png|gif|webp)$/,p=[{title:"[Commons] Tooltips",link:"{innovation}/dist/libs/tooltips/styles.css|{innovation}/dist/libs/tooltips/index.js"},{title:"[Open] Font Awesome 6.x",link:"https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.x/css/all.min.css"},{title:"[Open] Timeago 1.x",link:"https://cdn.jsdelivr.net/npm/timeago@1.x/jquery.timeago.min.js|https://cdn.jsdelivr.net/npm/timeago@1.x/locales/jquery.timeago.it.js"},{title:"[Open] Handlebars 4.x",link:"https://cdn.jsdelivr.net/npm/handlebars@4/dist/handlebars.min.js"},{title:"[Open] Twitter API",link:"https://platform.twitter.com/widgets.js"}],_=[{title:"Codice HTML che sar\xe0 mostrato nel tag HEAD",const:"html_head"},{title:"[Start] Codice HTML che sar\xe0 mostrato in CIMA a tutte le pagine",const:"html_top_start"},{title:"Codice HTML che sar\xe0 mostrato sopra le pubblicit\xe0",const:"html_ads_start"},{title:"[End] Codice HTML che sar\xe0 mostrato in FONDO a tutte le pagine",const:"html_bottom_end"}]},639:(M,c,e)=>{e.d(c,{Hc:()=>t,KO:()=>l,WA:()=>a,bc:()=>r,kw:()=>n,mD:()=>o,mq:()=>i});const t="\nquery ScriptStats {\n    scriptStats {\n        scriptId\n        entities {\n            targetId\n            targetType\n        }\n    }\n}",i="\nquery GetScriptHelpMd($scriptId: String!) {\n    getScriptHelpMd(scriptId: $scriptId)\n}",r="\nmutation DelCache($scriptId: String!) {\n    delCache(scriptId: $scriptId)\n}",o="\nmutation ScriptUpsert($scriptId: String, $type: String, $name: String, $description: String, $faqLink: String, $preview: String, $publisher: String, $source: String, $sourceBeta: String, $sandboxes: [JSSandboxInput!], $position: String, $packages: [String], $dependencies: [String], $settingsSchema: String, $settingsDefault: String, $generateToken: Boolean, $hidden: Boolean, $cpQuirks: Boolean, $cpStandard: Boolean, $cpMobile: Boolean, $webhook: String, $webhookCallOnSettings: Boolean, $whManage: Boolean, $whitelist: ScriptWhitelistInput) {\n    scriptUpsert(scriptId: $scriptId, type: $type, name: $name, description: $description, faqLink: $faqLink, preview: $preview, publisher: $publisher, source: $source, sourceBeta: $sourceBeta, sandboxes: $sandboxes, position: $position, packages: $packages, dependencies: $dependencies, settingsSchema: $settingsSchema, settingsDefault: $settingsDefault, generateToken: $generateToken, hidden: $hidden, cpQuirks: $cpQuirks, cpStandard: $cpStandard, cpMobile: $cpMobile, webhook: $webhook, webhookCallOnSettings: $webhookCallOnSettings, whManage: $whManage, whitelist: $whitelist)\n}",l="\nmutation DelScript($scriptId: String!) {\n    delScript(scriptId: $scriptId)\n}",n="\nmutation ScriptManage(\n    $targetId: String!,\n    $targetType: ScriptTargetTypeEnum!,\n    $scriptId: String!,\n    $action: ScriptManageActionEnum!\n) {\n    scriptManage(\n        targetId: $targetId,\n        targetType: $targetType,\n        scriptId: $scriptId,\n        action: $action\n    )\n}",a="\nmutation ScriptSettings(\n    $targetId: String!,\n    $targetType: ScriptTargetTypeEnum!,\n    $scriptId: String!,\n    $settings: String!\n) {\n    scriptSettings(\n        targetId: $targetId,\n        targetType: $targetType,\n        scriptId: $scriptId,\n        settings: $settings\n    )\n}"},956:(M,c,e)=>{e.d(c,{$:()=>l});var t=e(2200),i=e(4956),r=e(2615),o=e(3664);let l=(()=>{var n;class a{static#t=n=()=>(this.\u0275fac=function(_){return new(_||a)},this.\u0275mod=o.$C({type:a}),this.\u0275inj=r.G2t({imports:[t.MD,i.Q]}))}return n(),a})()},1386:(M,c,e)=>{e.d(c,{F:()=>o});var t=e(2200),i=e(2615),r=e(3664);let o=(()=>{var l;class n{static#t=l=()=>(this.\u0275fac=function(p){return new(p||n)},this.\u0275mod=r.$C({type:n}),this.\u0275inj=i.G2t({imports:[t.MD]}))}return l(),n})()},1465:(M,c,e)=>{e.d(c,{B:()=>o});var t=e(2200),i=e(2615),r=e(3664);let o=(()=>{var l;class n{static#t=l=()=>(this.\u0275fac=function(p){return new(p||n)},this.\u0275mod=r.$C({type:n}),this.\u0275inj=i.G2t({imports:[t.MD]}))}return l(),n})()},2807:(M,c,e)=>{e.d(c,{M:()=>i});var t=e(2615);let i=(()=>{var r;class o{filterScripts(n,a,d){if(d.dev&&(n=n.filter(p=>d.dev===p.author.ffuid)),d.onlyInstalled&&(n=n.filter(p=>a.includes(p.id))),d.keywords){const p=this.createKeywordsRegex(d.keywords);n=n.filter(_=>_.name.match(p)||_.description.match(p))}return n}createKeywordsRegex(n){return n=n.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),new RegExp(`.*?(${n.split(" ").join("|")}).*?`,"i")}static#t=r=()=>(this.\u0275fac=function(a){return new(a||o)},this.\u0275prov=t.jDH({token:o,factory:o.\u0275fac,providedIn:"root"}))}return r(),o})()},3445:(M,c,e)=>{e.d(c,{b:()=>n});var t=e(3664),i=e(2615),r=e(2200),o=e(9417);function l(a,d){if(1&a){const p=t.RV6();t.j41(0,"div",5),t.bIt("click",function(){i.eBV(p);const m=t.XpG();return m.textModel="",i.Njj(m.keyupEvent(!0))}),t.EFF(1," clear "),t.k0s()}}let n=(()=>{var a;class d{constructor(){this.disabled=!1,this.enterKeyOnly=!1,this.size="md",this.inputId="text-input-filter",this.textEvent=new t.bkB,this.textModel="",this.textEmitted=""}keyupEvent(_=!1){if(this.disabled)return;const m=this.textModel.trim();m.length>0&&!_&&this.enterKeyOnly||m!==this.textEmitted&&(this.textEmitted=m,this.textEvent.emit(this.textEmitted))}labelClick(_){0!==this.textModel.trim().length&&(_.preventDefault(),_.stopPropagation(),this.keyupEvent(!0))}static#t=a=()=>(this.\u0275fac=function(m){return new(m||d)},this.\u0275cmp=t.VBU({type:d,selectors:[["app-input-filter-text"]],inputs:{disabled:"disabled",enterKeyOnly:"enterKeyOnly",size:"size",inputId:"inputId"},outputs:{textEvent:"textEvent"},standalone:!1,decls:6,vars:8,consts:[[1,"input-group","position-relative",3,"ngClass"],[1,"input-group-text"],[1,"d-block","material-icons-outlined","text-muted","cursor-pointer",3,"click","for"],[1,"material-icons","d-block","icon-small","text-danger","position-absolute","reset-text-input","cursor-pointer"],["type","text","placeholder","Cerca...",1,"form-control",3,"ngModelChange","keyup","keyup.enter","id","disabled","ngModel"],[1,"material-icons","d-block","icon-small","text-danger","position-absolute","reset-text-input","cursor-pointer",3,"click"]],template:function(m,u){1&m&&(t.j41(0,"div",0)(1,"div",1)(2,"label",2),t.bIt("click",function(D){return u.labelClick(D)}),t.EFF(3,"search"),t.k0s()(),t.nVh(4,l,2,0,"div",3),t.j41(5,"input",4),t.mxI("ngModelChange",function(D){return t.DH7(u.textModel,D)||(u.textModel=D),D}),t.bIt("keyup",function(){return u.keyupEvent()})("keyup.enter",function(){return u.keyupEvent(!0)}),t.k0s()()),2&m&&(t.Y8G("ngClass","md"!==u.size?"input-group-"+u.size:""),t.R7$(2),t.AVh("icon-small","sm"===u.size),t.Y8G("for",u.inputId),t.R7$(2),t.vxM(u.textModel.trim().length>0?4:-1),t.R7$(),t.Y8G("id",u.inputId)("disabled",u.disabled),t.R50("ngModel",u.textModel))},dependencies:[r.YU,o.me,o.BC,o.vS],styles:["#text-input[_ngcontent-%COMP%]{padding-right:calc(.5rem + 26px)}label[_ngcontent-%COMP%]{transform:rotateY(180deg);position:relative;top:1px}.reset-text-input[_ngcontent-%COMP%]{top:calc(50% - 10px);right:5px;z-index:6}"]}))}return a(),d})()},3573:(M,c,e)=>{e.d(c,{Y:()=>o});var t=e(2200),i=e(2615),r=e(3664);let o=(()=>{var l;class n{static#t=l=()=>(this.\u0275fac=function(p){return new(p||n)},this.\u0275mod=r.$C({type:n}),this.\u0275inj=i.G2t({imports:[t.MD]}))}return l(),n})()},4354:(M,c,e)=>{e.d(c,{Z:()=>i});var t=e(3664);let i=(()=>{var r;class o{transform(n,a){return n.includes(a)}static#t=r=()=>(this.\u0275fac=function(a){return new(a||o)},this.\u0275pipe=t.EJ8({name:"arrayIncludes",type:o,pure:!0,standalone:!1}))}return r(),o})()},4791:(M,c,e)=>{e.d(c,{x:()=>_});var t=e(3664),i=e(2615),r=e(177),o=e(2200),l=e(9716);const n=()=>({placement:"bottom"}),a=m=>({inactive:m});function d(m,u){if(1&m){const h=t.RV6();t.j41(0,"li",12),t.bIt("click",function(){i.eBV(h);const E=t.XpG();return i.Njj(E.downloadEvent.emit())}),t.j41(1,"div",13),t.EFF(2," download_for_offline "),t.k0s()()}2&m&&t.Y8G("tippyProps",t.lJ4(2,n))("disableOnTouchDevice",!0)}function p(m,u){if(1&m){const h=t.RV6();t.j41(0,"li",14),t.bIt("click",function(){i.eBV(h);const E=t.XpG();return i.Njj(E.saveEvent.emit())}),t.j41(1,"div",15),t.EFF(2," check_circle "),t.k0s()()}if(2&m){const h=t.XpG();t.Y8G("ngClass",t.eq3(4,a,!h.isFormValid))("appTippy",h.isFormValid?"Salva":"Il form non \xe8 valido!")("tippyProps",t.lJ4(6,n))("disableOnTouchDevice",!0)}}let _=(()=>{var m;class u{constructor(D){this.viewportScroller=D,this.buttonsId="",this.isFormValid=!1,this.hasForm=!0,this.canDownload=!1,this.cancelEvent=new t.bkB,this.saveEvent=new t.bkB,this.tipsEvent=new t.bkB,this.downloadEvent=new t.bkB}scrollToPageTop(){this.viewportScroller.scrollToPosition([0,0])}scrollToButtons(){this.buttonsId&&this.viewportScroller.scrollToAnchor(this.buttonsId)}static#t=m=()=>(this.\u0275fac=function(E){return new(E||u)(t.rXU(r.Xr))},this.\u0275cmp=t.VBU({type:u,selectors:[["app-script-form-utilities"]],inputs:{buttonsId:"buttonsId",isFormValid:"isFormValid",hasForm:"hasForm",canDownload:"canDownload"},outputs:{cancelEvent:"cancelEvent",saveEvent:"saveEvent",tipsEvent:"tipsEvent",downloadEvent:"downloadEvent"},standalone:!1,decls:16,vars:17,consts:[[1,"utilities","position-fixed","border-start","bg-white","shadow-sm","d-none","d-xl-block"],[1,"list-unstyled","mb-0","d-flex","flex-column","align-items-center"],["appTippy","Vai in cima",3,"click","tippyProps","disableOnTouchDevice"],[1,"d-block","material-icons-outlined","text-primary"],["appTippy","Suggerimenti",3,"click","tippyProps","disableOnTouchDevice"],[1,"d-block","material-icons-outlined","text-indigo"],["appTippy","Annulla",3,"click","tippyProps","disableOnTouchDevice"],[1,"d-block","material-icons-outlined","text-danger"],["appTippy","Vai ai pulsanti",3,"click","ngClass","tippyProps","disableOnTouchDevice"],[1,"d-block","material-icons-outlined","text-warning"],["appTippy","Esporta e importa",3,"tippyProps","disableOnTouchDevice"],[3,"ngClass","appTippy","tippyProps","disableOnTouchDevice"],["appTippy","Esporta e importa",3,"click","tippyProps","disableOnTouchDevice"],[1,"d-block","material-icons-outlined","download"],[3,"click","ngClass","appTippy","tippyProps","disableOnTouchDevice"],[1,"d-block","material-icons-outlined","text-success"]],template:function(E,v){1&E&&(t.j41(0,"div",0)(1,"ul",1)(2,"li",2),t.bIt("click",function(){return v.scrollToPageTop()}),t.j41(3,"div",3),t.EFF(4," arrow_circle_up "),t.k0s()(),t.j41(5,"li",4),t.bIt("click",function(){return v.tipsEvent.emit()}),t.j41(6,"div",5),t.EFF(7," lightbulb_circle "),t.k0s()(),t.j41(8,"li",6),t.bIt("click",function(){return v.cancelEvent.emit()}),t.j41(9,"div",7),t.EFF(10," cancel "),t.k0s()(),t.j41(11,"li",8),t.bIt("click",function(){return v.scrollToButtons()}),t.j41(12,"div",9),t.EFF(13," build_circle "),t.k0s()(),t.nVh(14,d,3,3,"li",10),t.nVh(15,p,3,7,"li",11),t.k0s()()),2&E&&(t.R7$(2),t.Y8G("tippyProps",t.lJ4(11,n))("disableOnTouchDevice",!0),t.R7$(3),t.Y8G("tippyProps",t.lJ4(12,n))("disableOnTouchDevice",!0),t.R7$(3),t.Y8G("tippyProps",t.lJ4(13,n))("disableOnTouchDevice",!0),t.R7$(3),t.Y8G("ngClass",t.eq3(14,a,0===v.buttonsId.length))("tippyProps",t.lJ4(16,n))("disableOnTouchDevice",!0),t.R7$(3),t.vxM(v.canDownload?14:-1),t.R7$(),t.vxM(v.hasForm?15:-1))},dependencies:[o.YU,l.e],styles:[".utilities[_ngcontent-%COMP%]{right:0;top:0;bottom:0;padding-top:calc(64px + 1.5rem)}.utilities[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{width:75px}li[_ngcontent-%COMP%]{margin:.5rem 0;transition:opacity .2s}li.inactive[_ngcontent-%COMP%]{opacity:.5}li[_ngcontent-%COMP%]:not(.inactive){cursor:pointer}.material-icons-outlined[_ngcontent-%COMP%]{font-size:36px}.download[_ngcontent-%COMP%]{color:#cc9a06}"]}))}return m(),u})()},5990:(M,c,e)=>{e.d(c,{c:()=>o});var t=e(2200),i=e(2615),r=e(3664);let o=(()=>{var l;class n{static#t=l=()=>(this.\u0275fac=function(p){return new(p||n)},this.\u0275mod=r.$C({type:n}),this.\u0275inj=i.G2t({imports:[t.MD]}))}return l(),n})()},6310:(M,c,e)=>{e.d(c,{h:()=>i});var t=e(9986);function i(r){return!isNaN(Number(r))||t.QY.test(`${r}`)}},6448:(M,c,e)=>{e.d(c,{I:()=>o});var t=e(2200),i=e(2615),r=e(3664);let o=(()=>{var l;class n{static#t=l=()=>(this.\u0275fac=function(p){return new(p||n)},this.\u0275mod=r.$C({type:n}),this.\u0275inj=i.G2t({imports:[t.MD]}))}return l(),n})()},6733:(M,c,e)=>{e.d(c,{q:()=>m});var t=e(508),i=e(1413),r=e(5558),o=e(7673),l=e(2615),n=e(6354),a=e(7468),p=e(9330);let _=(()=>{var u;class h{constructor(E){this.http=E}getContentFromUrls(E){const v=E.map(f=>this.http.get(f,{responseType:"text"}).pipe((0,n.T)(O=>({source:O,resource:f}))));return(0,a.p)([...v,(0,o.of)({source:"",resource:""})]).pipe((0,r.n)(f=>{f=f.filter(s=>""!==s.resource);const O=[],b=[];return f.forEach(s=>{const g=function d(u){const h={head:"",body:""},E=(new DOMParser).parseFromString(u.source,"text/html"),v=E.querySelector("head"),f=E.querySelector("body"),O=E.querySelector("base");if(O){const b=O.getAttribute("href")||"",s=E.querySelectorAll("head link, head img, head script, body link, body script, body img"),g=new URL(u.resource).origin;s.forEach(y=>{const P="LINK"===y.tagName?"href":"src",T=y.getAttribute(P);if(T&&!T.startsWith("http")){let C=`${T}`;T.startsWith(b)||(C=`${b}${C}`),C.startsWith("http")||(C=`${g}/${C}`),y.setAttribute(P,C)}}),O.href=`${g}${b.startsWith("/")?"":"/"}${b}`,O.target="_blank"}return v&&(["meta","title"].forEach(b=>{v.querySelectorAll(b).forEach(g=>{g.hasAttribute("charset")||g.remove()})}),h.head=v.innerHTML),f&&(h.body=f.innerHTML),h}(s);g.head&&O.push(g.head),g.body&&b.push(g.body)}),(0,o.of)({headData:O,bodyData:b})}))}static#t=u=()=>(this.\u0275fac=function(v){return new(v||h)(l.KVO(p.Qq))},this.\u0275prov=l.jDH({token:h,factory:h.\u0275fac,providedIn:"root"}))}return u(),h})(),m=(()=>{var u;class h{constructor(E){this.sandboxService=E}create(E,v={}){const f=new i.B,O=E.filter(b=>!t.aD.allowParams.test(b)&&!t.y0.allowParams.test(b));return this.sandboxService.getContentFromUrls(O).pipe((0,r.n)(b=>(0,o.of)({eventSubject:f,eventObservable:f.asObservable(),loading:!0,initData:v,headData:[...E.map(s=>t.aD.allowParams.test(s)?`<script src='${s}'><\/script>`:t.y0.allowParams.test(s)?`<link rel="stylesheet" type="text/css" href="${s}">`:""),...b.headData].join(""),bodyData:[...b.bodyData].join("")})))}static#t=u=()=>(this.\u0275fac=function(v){return new(v||h)(l.KVO(_))},this.\u0275prov=l.jDH({token:h,factory:h.\u0275fac,providedIn:"root"}))}return u(),h})()},7418:(M,c,e)=>{e.d(c,{H:()=>n});var t=e(2200),i=e(9417),r=e(4956),o=e(2615),l=e(3664);let n=(()=>{var a;class d{static#t=a=()=>(this.\u0275fac=function(m){return new(m||d)},this.\u0275mod=l.$C({type:d}),this.\u0275inj=o.G2t({imports:[t.MD,i.YN,r.Q]}))}return a(),d})()},9560:(M,c,e)=>{e.d(c,{M:()=>l});var t=e(2200),i=e(9417),r=e(2615),o=e(3664);let l=(()=>{var n;class a{static#t=n=()=>(this.\u0275fac=function(_){return new(_||a)},this.\u0275mod=o.$C({type:a}),this.\u0275inj=r.G2t({imports:[t.MD,i.YN]}))}return n(),a})()},9938:(M,c,e)=>{e.d(c,{z:()=>o});var t=e(3664);const i=[[["","footer",""]]],r=["[footer]"];let o=(()=>{var l;class n{constructor(){this.errorType="",this.errorDescription=""}static#t=l=()=>(this.\u0275fac=function(p){return new(p||n)},this.\u0275cmp=t.VBU({type:n,selectors:[["app-error-page"]],inputs:{errorType:"errorType",errorDescription:"errorDescription"},standalone:!1,ngContentSelectors:r,decls:5,vars:2,consts:[[1,"error-container"],[1,"d-flex","align-items-center","justify-content-center"],[1,"e-code","border-end","lh-1","pt-2","border-dark",3,"innerHTML"],[1,"e-description","lh-1","pt-1","text-nowrap","text-uppercase",3,"innerHTML"]],template:function(p,_){1&p&&(t.NAR(i),t.j41(0,"div",0)(1,"div",1),t.nrm(2,"div",2)(3,"div",3),t.k0s(),t.SdG(4),t.k0s()),2&p&&(t.R7$(2),t.Y8G("innerHTML",_.errorType,t.npT),t.R7$(),t.Y8G("innerHTML",_.errorDescription,t.npT))},styles:["[_nghost-%COMP%]{display:block;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.e-code[_ngcontent-%COMP%]{padding-bottom:.5rem;padding-right:.5rem;font-size:2rem}.e-description[_ngcontent-%COMP%]{padding-left:.5rem}@media (min-width: 250px){.e-code[_ngcontent-%COMP%]{padding-bottom:1rem;padding-right:1rem;font-size:3rem}.e-description[_ngcontent-%COMP%]{padding-left:1rem}}@media (min-width: 600px){.e-code[_ngcontent-%COMP%]{font-size:5rem}.e-description[_ngcontent-%COMP%]{font-size:1.5rem}}"]}))}return l(),n})()},9997:(M,c,e)=>{e.d(c,{d:()=>v});var t=e(467),i=e(3664),r=e(9579),o=e(3101),l=e(1413),n=e(3726),a=e(5245),d=e(6977),p=e(2881),_=e(2998),m=e(2615),u=e(345),h=e(2200);const D=["iframe"],E=(f,O)=>({"scroll-sandbox":f,"reset-padding":O});let v=(()=>{var f;class O{constructor(s,g,y){this.domSanitizer=s,this.globalsService=g,this.postMessageService=y,this.head="",this.body="",this.bodyClass=[],this.initData={},this.resetMainPadding=!1,this.loadEvent=new i.bkB,this.sandboxId=(0,o.A)(),this.iframeAutoHeight=!0,this.iframeHeight=0,this.componentDestroyed=new l.B,this.bsCssLink=window.location.origin+"/assets/css/bootstrap.css"}loaded(){this.iframeContent&&this.loadEvent.emit(!0)}ngOnInit(){var s=this;return(0,t.A)(function*(){const g=s.globalsService.forum?Object.assign({},s.globalsService.forum):void 0;g&&delete g.admin,s.initData={[_.Dc.FORUM]:g,[_.Dc.USER]:s.globalsService.credentials?.user,...s.initData},s.iframeContent=s.domSanitizer.bypassSecurityTrustResourceUrl(URL.createObjectURL(new Blob([`<!DOCTYPE html>\n                    <html lang="it">\n                        <head>\n                            <title></title>\n                            <link rel="stylesheet" href="${s.bsCssLink}"></link>\n                            <script>\n                                window.initData = JSON.parse(decodeURIComponent('${encodeURIComponent(JSON.stringify(s.initData))}'));\n                                window.sandboxHeightMode = 'auto';\n                            <\/script>\n                            ${s.head}\n                        </head>\n                        <body${s.bodyClass.length?' class="'+s.bodyClass.join(" ")+'"':""}>\n                            ${s.body}\n                        <script>\n                            (() => {\n                                parent.postMessage({\n                                    id: "${s.sandboxId}",\n                                    sandboxHeightMode: window.sandboxHeightMode\n                                }, "*");\n\n                                if (window.sandboxHeightMode !== 'auto') {\n                                    return;\n                                }\n\n                                document.body.style.overflow = 'hidden';\n\n                                let lastSandboxHeight = 0; \n                                const resizeObserver = new ResizeObserver((entries, observer) => {\n                                    for (const entry of entries) {\n                                        if (entry.target.nodeName === 'BODY' && lastSandboxHeight !== entry.contentRect.height) {\n                                            lastSandboxHeight = entry.contentRect.height;\n                                            parent.postMessage({\n                                                id: "${s.sandboxId}",\n                                                sandboxHeight: entry.contentRect.height\n                                            }, "*");\n                                        }\n                                    }\n                                })\n                                resizeObserver.observe(document.body)\n                            })();\n                        <\/script>\n                        </body>\n                    </html>`],{type:"text/html"}))),s.setSubscriptions()})()}setSubscriptions(){this.globalsService.forumObservable.pipe((0,d.Q)(this.componentDestroyed)).subscribe(s=>{const g=Object.assign({},s);delete g?.admin,this.postMessageService.sendToSandbox(this.iframe.nativeElement,_.tV.FORUM,{forum:g})}),this.globalsService.profileObservable.pipe((0,a.i)(1),(0,d.Q)(this.componentDestroyed)).subscribe(s=>{this.postMessageService.sendToSandbox(this.iframe.nativeElement,_.tV.USER,{profile:s})})}ngAfterViewInit(){this.eventsObservable&&this.eventsObservable.pipe((0,d.Q)(this.componentDestroyed)).subscribe(s=>{this.postMessageService.sendToSandbox(this.iframe.nativeElement,s.eventType,s.eventContent)}),(0,n.R)(window,"message").pipe((0,d.Q)(this.componentDestroyed)).subscribe(s=>{s.data.id===this.sandboxId&&(s.data.sandboxHeightMode&&(this.iframeAutoHeight="scroll"!==s.data.sandboxHeightMode),void 0!==s.data.sandboxHeight&&(this.iframeHeight=Number(s.data.sandboxHeight)))})}ngOnDestroy(){this.componentDestroyed.next(),this.componentDestroyed.complete()}static#t=f=()=>(this.\u0275fac=function(g){return new(g||O)(i.rXU(u.up),i.rXU(p.k),i.rXU(r.x))},this.\u0275cmp=i.VBU({type:O,selectors:[["app-sandbox"]],viewQuery:function(g,y){if(1&g&&i.GBs(D,5),2&g){let P;i.mGM(P=i.lsd())&&(y.iframe=P.first)}},inputs:{head:"head",body:"body",bodyClass:"bodyClass",eventsObservable:"eventsObservable",initData:"initData",resetMainPadding:"resetMainPadding"},outputs:{loadEvent:"loadEvent"},standalone:!1,decls:2,vars:7,consts:[["iframe",""],["sandbox","allow-forms allow-scripts allow-popups-to-escape-sandbox allow-popups allow-downloads",3,"load","ngClass","src"]],template:function(g,y){if(1&g){const P=i.RV6();i.j41(0,"iframe",1,0),i.bIt("load",function(){return m.eBV(P),m.Njj(y.loaded())}),i.k0s()}2&g&&(i.xc7("height",y.iframeHeight+"px"),i.Y8G("ngClass",i.l_i(4,E,!y.iframeAutoHeight,y.resetMainPadding))("src",y.iframeContent,i.f$h))},dependencies:[h.YU],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;flex-grow:1}iframe[_ngcontent-%COMP%]{margin:0;padding:0;display:block;border:0;height:auto;min-height:0;min-width:100%}iframe.scroll-sandbox[_ngcontent-%COMP%]{flex-grow:1}.reset-padding[_ngcontent-%COMP%]{margin-bottom:-1rem}@media (min-width: 768px){.reset-padding[_ngcontent-%COMP%]{margin:0 -1rem -1rem}}@media (min-width: 960px){.reset-padding[_ngcontent-%COMP%]{margin:0 -1.5rem -1.5rem}}"]}))}return f(),O})()}}]);