"use strict";(self.webpackChunkpages=self.webpackChunkpages||[]).push([[250],{1625:(A,L,n)=>{n.d(L,{_:()=>o});var e=n(2200),t=n(8132),d=n(2615),O=n(3664);let o=(()=>{var P;class v{static#e=P=()=>(this.\u0275fac=function(u){return new(u||v)},this.\u0275mod=O.$C({type:v}),this.\u0275inj=d.G2t({imports:[e.MD,t.iI]}))}return P(),v})()},4981:(A,L,n)=>{n.d(L,{D:()=>G});var e=n(2998),t=n(6350),d=n(2615);let O=(()=>{var a;class l{constructor(){this.dependencies={[t.LP.LOGIN]:null,[t.LP.HOME]:null,[t.LP.SETTINGS]:t.LP.HOME,[t.LP.SCRIPT]:t.LP.HOME,[t.LP.SCRIPT_FORUM]:t.LP.SCRIPT,[t.LP.SCRIPT_USER]:t.LP.SCRIPT,[t.LP.SCRIPT_SETTINGS]:[t.LP.SCRIPT_USER,t.LP.SCRIPT_FORUM],[t.LP.SCRIPT_DEV]:t.LP.SCRIPT,[t.LP.SCRIPT_DEV_SETTINGS]:t.LP.SCRIPT_DEV,[t.LP.UPLOAD]:t.LP.HOME,[t.LP.ADMIN]:t.LP.HOME,[t.LP.STATS]:t.LP.HOME,[t.LP.STATS_UPLOAD]:t.LP.STATS,[t.LP.TOOLS]:t.LP.HOME},this.names={[t.LP.LOGIN]:"Login",[t.LP.HOME]:"Home",[t.LP.SETTINGS]:"Notifiche",[t.LP.SCRIPT]:"Script",[t.LP.SCRIPT_FORUM]:"Forum",[t.LP.SCRIPT_USER]:"Utenti",[t.LP.SCRIPT_SETTINGS]:"Impostazioni",[t.LP.SCRIPT_DEV]:"Sviluppo",[t.LP.SCRIPT_DEV_SETTINGS]:"Impostazioni",[t.LP.UPLOAD]:"Upload",[t.LP.ADMIN]:"Amministrazione",[t.LP.STATS]:"Statistiche",[t.LP.STATS_UPLOAD]:"Upload",[t.LP.TOOLS]:"Utilit\xe0"}}createPathList(p,h=[]){const E=(T,U)=>{T.unshift({name:this.names[U]||"",path:U})},B=T=>(0,e.l$)(this.dependencies,T)?this.dependencies[T]instanceof Array?this.dependencies[T].includes(h[0])?h.shift():this.dependencies[T][0]:this.dependencies[T]:null,M=[{name:this.names[p]||"",path:""}];let F=B(p);for(;F;)E(M,F),F=B(F);return M}static#e=a=()=>(this.\u0275fac=function(h){return new(h||l)},this.\u0275prov=d.jDH({token:l,factory:l.\u0275fac,providedIn:"root"}))}return a(),l})();var o=n(3664),P=n(3694),v=n(8132),r=n(2200);const I=a=>({"hide-nav":a}),u=a=>({"d-none d-md-block":a}),f=a=>({active:a});function g(a,l){if(1&a&&o.nrm(0,"a",5),2&a){const S=o.XpG().$implicit;o.Y8G("routerLink",S.path)("innerText",S.name)}}function y(a,l){if(1&a&&o.nrm(0,"span",6),2&a){const S=o.XpG().$implicit;o.Y8G("innerText",S.name)}}function k(a,l){if(1&a&&(o.j41(0,"li",4),o.nVh(1,g,1,2,"a",5)(2,y,1,1,"span",6),o.k0s()),2&a){const S=l.$index,p=l.$count;o.Y8G("ngClass",o.eq3(3,f,S===p-1)),o.BMQ("aria-current",S===p-1?"page":null),o.R7$(),o.vxM(S!==p-1?1:2)}}let G=(()=>{var a;class l{constructor(p,h){this.breadcrumbService=p,this.router=h,this.pageTitle="",this.url="",this.nodes=[],this.hideNavOnSmallScreen=!1,this.breadcrumbs=[]}ngOnInit(){this.url||(this.url=this.router.url),this.breadcrumbs=this.breadcrumbService.createPathList(this.url,this.nodes)}static#e=a=()=>(this.\u0275fac=function(h){return new(h||l)(o.rXU(O),o.rXU(P.Ix))},this.\u0275cmp=o.VBU({type:l,selectors:[["app-breadcrumb"]],inputs:{pageTitle:"pageTitle",url:"url",nodes:"nodes",hideNavOnSmallScreen:"hideNavOnSmallScreen"},standalone:!1,decls:6,vars:7,consts:[[1,"container-fluid","px-md-1","d-flex","flex-column","flex-md-row","align-items-md-center",3,"ngClass"],[1,"h3","fw-light","mb-0","lh-1","fv-small-caps","pb-1",3,"innerText"],["aria-label","breadcrumb",1,"ms-md-auto","mt-1","flex-shrink-0",3,"ngClass"],[1,"breadcrumb","mb-0","justify-content-md-end"],[1,"breadcrumb-item",3,"ngClass"],[3,"routerLink","innerText"],[3,"innerText"]],template:function(h,E){1&h&&(o.j41(0,"div",0),o.nrm(1,"h2",1),o.j41(2,"nav",2)(3,"ol",3),o.Z7z(4,k,3,5,"li",4,o.fX1),o.k0s()()()),2&h&&(o.Y8G("ngClass",o.eq3(3,I,E.hideNavOnSmallScreen)),o.R7$(),o.Y8G("innerText",E.pageTitle),o.R7$(),o.Y8G("ngClass",o.eq3(5,u,E.hideNavOnSmallScreen)),o.R7$(2),o.Dyx(E.breadcrumbs))},dependencies:[r.YU,v.Wk],styles:[".container-fluid[_ngcontent-%COMP%]:not(.hide-nav){margin-bottom:.75rem}.container-fluid.hide-nav[_ngcontent-%COMP%]{margin-bottom:.5rem}@media (min-width: 768px){.container-fluid.hide-nav[_ngcontent-%COMP%]{margin-bottom:.75rem}}@media (min-width: 960px){.container-fluid[_ngcontent-%COMP%]{margin-top:.5rem}}"]}))}return a(),l})()},5386:(A,L,n)=>{n.r(L),n.d(L,{AdminPanelModule:()=>U});var e=n(3664),t=n(4981),d=n(2998),O=n(2881),o=n(9986),P=n(2200),v=n(8488),r=n(2615),I=n(3801),u=n(6148),f=n(7948),g=n(3391);const y=["app-admin-panel-graphql",""];function k(m,c){1&m&&e.EFF(0," Token copiato! ")}function G(m,c){1&m&&e.EFF(0," Copia il token ")}function a(m,c){if(1&m&&e.nVh(0,k,1,0)(1,G,1,0),2&m){const N=e.XpG();e.vxM(N.tokenCopied||N.touchDevice?0:1)}}let l=(()=>{var m;class c{constructor(b,s,i,C,R){this.graphqlService=b,this.endpointsService=s,this.titleCasePipe=i,this.globalsService=C,this.toastService=R,this.touchDevice=o.CN,this.graphqlRequestLogger={list:[]},this.backendFormSchema={},this.pendingRequest=!1,this.apollo={url:""},this.tokenCopied=!1,this.graphqlToken=this.graphqlService.params?.token||"",this.graphqlRequestLogger.list=this.graphqlService.requestLogs;const j=(0,d.rO)([10,10]);this.popperOptions=D=>(0,d.b1)([j],D)}ngOnInit(){this.createBackendFormSchema(),this.setApolloUrl()}setApolloUrl(){this.apollo={...this.apollo,url:this.graphqlService.urlSandbox(this.graphqlToken).toString()}}createBackendFormSchema(){const b={type:"object",properties:{loggerEnabled:{type:"boolean",title:"Abilita il salvataggio dei log (dove possibile)",default:this.graphqlService.loggerEnabled},backend:{type:"object",properties:Object.assign({},...Object.entries(this.endpointsService.getAllPaths()).map(s=>({[s[0]]:{type:"object",title:this.titleCasePipe.transform(s[0]),properties:{url:{title:"Url base",oneOf:[{type:"string",const:this.endpointsService.baseEndpoint},{type:"string",const:"script.{platform}:8443/i/proxy/innovationlocal/"},{type:"string",const:"script-local.forumfree.it:8443/"}],default:this.endpointsService.getBaseUrl(s[0])},paths:{type:"object",properties:Object.fromEntries(Object.entries(s[1]).map(i=>[i[0],{type:"string",title:`Path per [i]${i[0]}[/i]:`,default:i[1]}]))}}}})))}}};this.backendFormSchema={...b}}onBackendFormSubmit(b){const s=b;for(const i of Object.entries(s.backend))this.endpointsService.setBaseUrl(i[0],i[1].url),this.endpointsService.setPaths(i[0],i[1].paths);this.globalsService.adminSettings=structuredClone(s),this.setApolloUrl(),this.toastService.show({content:"Impostazioni del <strong>backend</strong> aggionate!",delay:5e3})}adminSettingsReset(){this.globalsService.adminSettings=void 0,location.reload()}static#e=m=()=>(this.\u0275fac=function(s){return new(s||c)(e.rXU(d.Pp),e.rXU(d.Q3),e.rXU(P.PV),e.rXU(O.k),e.rXU(v.f))},this.\u0275cmp=e.VBU({type:c,selectors:[["","app-admin-panel-graphql",""]],standalone:!1,features:[e.Jv_([P.PV])],attrs:y,decls:35,vars:9,consts:[["tooltipContent",""],["backendEnvForm",""],[1,"h6","px-md-1","container-fluid"],[1,"flat-container","p-3"],[1,"mb-4","d-flex","align-items-end"],[1,"flex-grow-1","me-3"],["for","profile-token",1,"fs-sm"],["type","text","id","profile-token","disabled","",1,"form-control",3,"value"],["placement","top-end",1,"d-block","ms-auto","btn","btn-primary",3,"click","hidden","cdkCopyToClipboard","ngbTooltip","popperOptions","triggers"],[1,"material-icons","d-block"],[1,"px-3","pt-2","rounded","mb-4","position-relative"],[1,"legend-reset","fs-reset","px-2","mb-0"],[1,"position-absolute","px-3","bg-white","backend-form-submit"],[1,"btn","btn-warning","d-flex","align-items-center",3,"click"],[1,"material-icons-outlined"],[1,"btn","btn-success","d-flex","align-items-center",3,"click"],["app-custom-form","",3,"submitEvent","schema"],[1,"px-3","pb-3","rounded","mb-4","pt-2"],[1,"logs-wrapper"],[3,"object"],[1,"d-flex","justify-content-end"],[1,"d-block"],["target","_blank",3,"href"]],template:function(s,i){if(1&s){const C=e.RV6();e.j41(0,"div",2),e.EFF(1,"Endpoints"),e.k0s(),e.j41(2,"div",3)(3,"div",4)(4,"div",5)(5,"label",6),e.EFF(6,"Token attuale:"),e.k0s(),e.nrm(7,"input",7),e.k0s(),e.j41(8,"button",8),e.bIt("click",function(){return r.eBV(C),r.Njj(i.tokenCopied=!0)})("hidden",function(){return r.eBV(C),r.Njj(i.tokenCopied=!1)}),e.j41(9,"span",9),e.EFF(10,"content_copy"),e.k0s()(),e.DNE(11,a,2,1,"ng-template",null,0,e.C5r),e.k0s(),e.j41(13,"fieldset",10)(14,"legend",11),e.EFF(15,"Backend"),e.k0s(),e.j41(16,"div",12)(17,"button",13),e.bIt("click",function(){return r.eBV(C),r.Njj(i.adminSettingsReset())}),e.j41(18,"span",14),e.EFF(19,"cancel"),e.k0s()(),e.j41(20,"button",15),e.bIt("click",function(){r.eBV(C);const j=e.sdS(24);return r.Njj(j.submit())}),e.j41(21,"span",14),e.EFF(22,"check_circle"),e.k0s()()(),e.j41(23,"div",16,1),e.bIt("submitEvent",function(j){return r.eBV(C),r.Njj(i.onBackendFormSubmit(j))}),e.k0s()(),e.j41(25,"fieldset",17)(26,"legend",11),e.EFF(27),e.k0s(),e.j41(28,"div",18),e.nrm(29,"app-custom-pre",19),e.k0s()(),e.j41(30,"div",20)(31,"small",21),e.EFF(32,"Vai alla "),e.j41(33,"a",22),e.EFF(34,"sandbox"),e.k0s()()()()}if(2&s){const C=e.sdS(12);e.R7$(7),e.Y8G("value",i.graphqlToken),e.R7$(),e.Y8G("cdkCopyToClipboard",i.graphqlToken)("ngbTooltip",C)("popperOptions",i.popperOptions)("triggers",i.touchDevice?"click":"hover"),e.R7$(15),e.Y8G("schema",i.backendFormSchema),e.R7$(4),e.SpI(" Log delle richieste (#",i.graphqlRequestLogger.list.length,") "),e.R7$(2),e.Y8G("object",i.graphqlRequestLogger.list),e.R7$(4),e.Y8G("href",i.apollo.url,e.B4B)}},dependencies:[I.dF,u.L,f.S,g.md],styles:["fieldset[_ngcontent-%COMP%]{border:1px dashed var(--bs-gray-500)}.logs-wrapper[_ngcontent-%COMP%]{max-height:300px;overflow-y:auto}.backend-form-submit[_ngcontent-%COMP%]{top:-.75rem;right:1rem;transform:translateY(-50%);flex-direction:row;display:flex;gap:10px}"]}))}return m(),c})(),S=(()=>{var m;class c{static#e=m=()=>(this.\u0275fac=function(s){return new(s||c)},this.\u0275cmp=e.VBU({type:c,selectors:[["ng-component"]],standalone:!1,decls:3,vars:0,consts:[["pageTitle","Pannello di amministrazione"],[1,"d-grid","page-container"],["app-admin-panel-graphql",""]],template:function(s,i){1&s&&(e.nrm(0,"app-breadcrumb",0),e.j41(1,"div",1),e.nrm(2,"div",2),e.k0s())},dependencies:[t.D,l],encapsulation:2}))}return m(),c})();var p=n(1625),h=n(6589),E=n(9417),B=n(8132),M=n(956),F=n(7418);const T=[{path:"",component:S}];let U=(()=>{var m;class c{static#e=m=()=>(this.\u0275fac=function(s){return new(s||c)},this.\u0275mod=e.$C({type:c}),this.\u0275inj=r.G2t({imports:[p._,I.FQ,P.MD,h.w,E.YN,B.iI.forChild(T),M.$,F.H]}))}return m(),c})()},5613:(A,L,n)=>{n.d(L,{D:()=>P});var e=n(467),t=n(2881),d=n(2998),o=n(2615);let P=(()=>{var v;class r extends d.DL{constructor(u,f,g){super(u,g),this.graphqlService=u,this.globalsService=f,this.requestsService=g,this.searchByNameCache={}}searchUserByName(u,f){var g=this;return(0,e.A)(function*(){f||(f=(0,d.aQ)(g.globalsService.credentials?.site.domain||d.Zv.FORUMFREE));const y=`${f}${u}`;if((0,d.l$)(g.searchByNameCache,y))return g.searchByNameCache[y];const k=yield g.graphqlService.query({query:"\nquery UserSearchByName($name: String!, $cid: String) {\n    userSearchByName(name: $name, cid: $cid) {\n        uid\n        nickname\n        avatar\n    }\n}",variables:{name:u,cid:f}});return g.searchByNameCache[y]=k.data.userSearchByName})()}static#e=v=()=>(this.\u0275fac=function(f){return new(f||r)(o.KVO(d.Pp),o.KVO(t.k),o.KVO(d.km))},this.\u0275prov=o.jDH({token:r,factory:r.\u0275fac,providedIn:"root"}))}return v(),r})()}}]);