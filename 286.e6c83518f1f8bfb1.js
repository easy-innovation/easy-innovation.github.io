(self.webpackChunkpages=self.webpackChunkpages||[]).push([[286],{1625:(tt,Fe,_)=>{"use strict";_.d(Fe,{_:()=>v});var he=_(2200),E=_(8132),ee=_(2615),ye=_(3664);let v=(()=>{var me;class x{static#e=me=()=>(this.\u0275fac=function(N){return new(N||x)},this.\u0275mod=ye.$C({type:x}),this.\u0275inj=ee.G2t({imports:[he.MD,E.iI]}))}return me(),x})()},4286:(tt,Fe,_)=>{"use strict";_.r(Fe),_.d(Fe,{UploadModule:()=>gc});var he=_(1386),E=_(4187),ee=_(1625),ye=_(3801),v=_(2200),me=_(1621),x=_(9417),e=_(3664),l=_(2615);let N=(()=>{var s;class n{static#e=s=()=>(this.\u0275fac=function(i){return new(i||n)},this.\u0275mod=e.$C({type:n}),this.\u0275inj=l.G2t({imports:[v.MD]}))}return s(),n})();var Q=_(9560),G=_(1171),q=_(4956),y=_(3391),it=_(8132);const w={suffixAgo:"fa",suffixFromNow:"da ora",seconds:"meno di un minuto",minute:"circa un minuto",minutes:"%d minuti",hour:"circa un'ora",hours:"circa %d ore",day:"un giorno",days:"%d giorni",month:"circa un mese",months:"%d mesi",year:"circa un anno",years:"%d anni"};var U=_(9974),ue=_(5412);function O(s,n=1/0,o){return n=(n||0)<1?1/0:n,(0,U.N)((t,i)=>(0,ue.h)(t,i,s,n,void 0,!0,o))}var V=_(5245),le=_(7673),je=_(1584),xe=_(983),T=_(7705),k=_(1413),se=_(5964),nt=_(177);const Ne=86400,Xt=30*Ne,bt=365*Ne;let st=(()=>{var s;class n{constructor(){this.changes=new k.B}static#e=s=()=>(this.\u0275fac=function(i){return new(i||n)},this.\u0275prov=l.jDH({token:n,factory:n.\u0275fac}))}return s(),n})();const $t=function(s){const n=Date.now(),o=Math.round(Math.abs(n-s)/1e3),t=s<n?"ago":"from now",[i,r]=o<60?[Math.round(o),"second"]:o<3600?[Math.round(o/60),"minute"]:o<Ne?[Math.round(o/3600),"hour"]:o<604800?[Math.round(o/Ne),"day"]:o<Xt?[Math.round(o/604800),"week"]:o<bt?[Math.round(o/Xt),"month"]:[Math.round(o/bt),"year"];return{value:i,unit:r,suffix:t}};class _e{}let Ht=(()=>{var s;class n extends _e{format(t){const{suffix:i,value:r,unit:a}=$t(t);return this.parse(r,a,i)}parse(t,i,r){return 1!==t&&(i+="s"),t+" "+i+" "+r}static#e=s=()=>(this.\u0275fac=(()=>{let t;return function(r){return(t||(t=e.xGo(n)))(r||n)}})(),this.\u0275prov=l.jDH({token:n,factory:n.\u0275fac}))}return s(),n})(),Et=(()=>{var s;class n extends _e{constructor(t){super(),this.intl=t}format(t){const{suffix:i,value:r,unit:a}=$t(t);return this.parse(r,a,i,Date.now(),t)}parse(t,i,r,a,p){"week"===i&&!this.intl.strings.week&&!this.intl.strings.weeks&&(t=Math.round(Math.abs(a-p)/864e5),i="day");const m=this.normalizeFn(t,a-p,this.intl.strings.numbers),f=[];return"ago"===r&&this.intl.strings.prefixAgo&&f.push(m(this.intl.strings.prefixAgo)),"from now"===r&&this.intl.strings.prefixFromNow&&f.push(m(this.intl.strings.prefixFromNow)),f.push(m(t>1?this.intl.strings[i+"s"]||this.intl.strings[i]||"%d "+i:this.intl.strings[i]||this.intl.strings[i+"s"]||"%d "+i)),"ago"===r&&this.intl.strings.suffixAgo&&f.push(m(this.intl.strings.suffixAgo)),"from now"===r&&this.intl.strings.suffixFromNow&&f.push(m(this.intl.strings.suffixFromNow)),f.join("string"==typeof this.intl.strings.wordSeparator?this.intl.strings.wordSeparator:" ")}normalizeNumber(t,i){return t&&10===t.length?String(i).split("").map(r=>r.match(/^[0-9]$/)?t[parseInt(r,10)]:r).join(""):String(i)}normalizeFn(t,i,r){return a=>"function"==typeof a?a(t,i).replace(/%d/g,this.normalizeNumber(r,t)):a.replace(/%d/g,this.normalizeNumber(r,t))}static#e=s=()=>(this.\u0275fac=function(i){return new(i||n)(l.KVO(st))},this.\u0275prov=l.jDH({token:n,factory:n.\u0275fac}))}return s(),n})();class Ue{}let Yt=(()=>{var s;class n extends Ue{constructor(t){super(),this.platformId=t}tick(t){return(0,nt.UE)(this.platformId)?this.browserTick(t):xe.w}browserTick(t){return(0,le.of)(0).pipe(O(()=>{const i=Date.now(),r=Math.round(Math.abs(i-t)/1e3),a=r<60?1e3:r<3600?6e4:r<Ne?36e5:0;return a?(0,je.O)(a):xe.w}),(0,V.i)(1))}static#e=s=()=>(this.\u0275fac=function(i){return new(i||n)(l.KVO(e.Agw))},this.\u0275prov=l.jDH({token:n,factory:n.\u0275fac}))}return s(),n})(),B=(()=>{var s;class n{get date(){return this._date}set date(t){if(this._date=function Bt(s){const n=new Date(s);if(!Number.isNaN(n.valueOf()))return n;const o=String(s).match(/\d+/g);if(null===o||o.length<=2)return n;{const[t,i,...r]=o.map(a=>parseInt(a,10));return new Date(Date.UTC(t,i-1,...r))}}(t).valueOf(),!this._date)throw new SyntaxError(`Wrong parameter in TimeagoDirective. Expected a valid date, received: ${t}`);this.clockSubscription&&(this.clockSubscription.unsubscribe(),this.clockSubscription=void 0),this.clockSubscription=this.clock.tick(this.date).pipe((0,se.p)(()=>this.live,this)).subscribe(()=>this.stateChanges.next())}get live(){return this._live}set live(t){this._live=function ot(s){return null!=s&&"false"!=`${s}`}(t)}constructor(t,i,r,a,p,m){this.cd=a,this.clock=p,this.ngZone=m,this.stateChanges=new k.B,this._live=!0,t&&(this.intlSubscription=t.changes.subscribe(()=>this.stateChanges.next())),this.ngZone.runOutsideAngular(()=>{this.stateChanges.subscribe(()=>{this.setContent(r.nativeElement,i.format(this.date)),this.ngZone.run(()=>this.cd.markForCheck())})})}ngOnChanges(){this.stateChanges.next()}setContent(t,i){!function Le(s){return typeof s<"u"&&null!==s}(t.textContent)?t.data=i:t.textContent=i}ngOnDestroy(){this.intlSubscription&&(this.intlSubscription.unsubscribe(),this.intlSubscription=void 0),this.clockSubscription&&(this.clockSubscription.unsubscribe(),this.clockSubscription=void 0),this.stateChanges.complete()}static#e=s=()=>(this.\u0275fac=function(i){return new(i||n)(e.rXU(st,8),e.rXU(_e),e.rXU(e.aKT),e.rXU(T.gRc),e.rXU(Ue),e.rXU(e.SKi))},this.\u0275dir=e.FsC({type:n,selectors:[["","timeago",""]],inputs:{date:"date",live:"live"},exportAs:["timeago"],standalone:!1,features:[e.OA$]}))}return s(),n})(),L=(()=>{var s;class n{static forRoot(t={}){return{ngModule:n,providers:[t.clock||{provide:Ue,useClass:Yt},t.intl||[],t.formatter||{provide:_e,useClass:Ht}]}}static forChild(t={}){return{ngModule:n,providers:[t.clock||{provide:Ue,useClass:Yt},t.intl||[],t.formatter||{provide:_e,useClass:Ht}]}}static#e=s=()=>(this.\u0275fac=function(i){return new(i||n)},this.\u0275mod=e.$C({type:n}),this.\u0275inj=l.G2t({}))}return s(),n})(),K=(()=>{var s;class n extends Ue{constructor(){super(...arguments),this.minute=60,this.hour=60*this.minute,this.day=24*this.hour}tick(t){return(0,le.of)(0).pipe(O(()=>{const i=Date.now(),r=Math.round(Math.abs(i-t)/1e3),a=r<this.minute||r<this.hour?1e3*this.minute:r<this.day?1e3*this.hour:0;return a?(0,je.O)(a):xe.w}),(0,V.i)(1))}static#e=s=()=>(this.\u0275fac=(()=>{let t;return function(r){return(t||(t=e.xGo(n)))(r||n)}})(),this.\u0275prov=l.jDH({token:n,factory:n.\u0275fac}))}return s(),n})();var S=_(467),te=_(9295),C=_(7602),j=_(6007),ze=_(130);let ge=(()=>{var s;class n{constructor(t){this.uploadCacheService=t,this.folderPath=[]}set currentFolderPath(t){this.folderPath=t}removeEntitiesCallback(t,i,r){const a=!(0,j.bj)(t,this.folderPath),p=this.uploadCacheService.removeEntities(t,i,r);return{success:p.length>0,...a?{}:{payload:{list:p}}}}addEntitiesCallback(t,i,r){const a=!(0,j.bj)(t,this.folderPath);return{success:this.uploadCacheService.addEntities(t,i,r),...a?{}:{payload:{list:i}}}}renameEntityCallback(t,i,r){if(!this.uploadCacheService.getItem(t))return{success:!1};this.uploadCacheService.removeEntities(t,i.name,i.type);const p=this.generateEntityFromUrl(r.url,i.type,i.type===C.OE.FILE?{size:r.size,time:r.time}:{});return this.uploadCacheService.addEntities(t,{...p},p.type),{success:!0,...(0,j.bj)(t,this.folderPath)?{payload:{list:[p]}}:{}}}moveEntitiesCallback(t){const i=[],r=[];for(const a of t)a.type===C.OE.FILE?i.push((0,j.ZA)(a.data.url,{size:a.data.size,time:a.data.time})):r.push((0,j.D)(a.data.url));return{success:!0,payload:{list:{files:i,folders:r}}}}generateEntityFromUrl(t,i,r={}){return i===C.OE.FILE?(0,j.ZA)(t,r):(0,j.D)(t)}static#e=s=()=>(this.\u0275fac=function(i){return new(i||n)(l.KVO(ze.J))},this.\u0275prov=l.jDH({token:n,factory:n.\u0275fac,providedIn:"root"}))}return s(),n})();var Z=_(1148),Wt=_(9038),ie=_(1806),Me=_(6977),re=_(1594),Qe=_(7786),Ge=_(3726),_i=_(345);const gi=["wrapper"],fi=["sourceImage"];function Qt(s,n){if(1&s){const o=e.RV6();e.j41(0,"img",5,0),e.bIt("load",function(){l.eBV(o);const i=e.XpG();return l.Njj(i.imageLoadedInView())})("mousedown",function(i){l.eBV(o);const r=e.XpG();return l.Njj(r.startMove(i,r.moveTypes.Drag))})("touchstart",function(i){l.eBV(o);const r=e.XpG();return l.Njj(r.startMove(i,r.moveTypes.Drag))})("error",function(i){l.eBV(o);const r=e.XpG();return l.Njj(r.loadImageError(i))}),e.k0s()}if(2&s){const o=n.ngIf,t=e.XpG();e.xc7("visibility",t.imageVisible?"visible":"hidden")("transform",t.safeTransformStyle()),e.AVh("ngx-ic-draggable",!t.disabled&&t.allowMoveImage),e.Y8G("src",o,e.B4B),e.BMQ("alt",t.imageAltText)}}function qt(s,n){if(1&s){const o=e.RV6();e.qex(0),e.j41(1,"span",9),e.bIt("mousedown",function(i){l.eBV(o);const r=e.XpG(2);return l.Njj(r.startMove(i,r.moveTypes.Resize,"topleft"))})("touchstart",function(i){l.eBV(o);const r=e.XpG(2);return l.Njj(r.startMove(i,r.moveTypes.Resize,"topleft"))}),e.nrm(2,"span",10),e.k0s(),e.j41(3,"span",11),e.bIt("mousedown",function(i){l.eBV(o);const r=e.XpG(2);return l.Njj(r.startMove(i,r.moveTypes.Resize,"topright"))})("touchstart",function(i){l.eBV(o);const r=e.XpG(2);return l.Njj(r.startMove(i,r.moveTypes.Resize,"topright"))}),e.nrm(4,"span",10),e.k0s(),e.j41(5,"span",12),e.bIt("mousedown",function(i){l.eBV(o);const r=e.XpG(2);return l.Njj(r.startMove(i,r.moveTypes.Resize,"bottomright"))})("touchstart",function(i){l.eBV(o);const r=e.XpG(2);return l.Njj(r.startMove(i,r.moveTypes.Resize,"bottomright"))}),e.nrm(6,"span",10),e.k0s(),e.j41(7,"span",13),e.bIt("mousedown",function(i){l.eBV(o);const r=e.XpG(2);return l.Njj(r.startMove(i,r.moveTypes.Resize,"bottomleft"))})("touchstart",function(i){l.eBV(o);const r=e.XpG(2);return l.Njj(r.startMove(i,r.moveTypes.Resize,"bottomleft"))}),e.nrm(8,"span",10),e.k0s(),e.j41(9,"span",14),e.bIt("mousedown",function(i){l.eBV(o);const r=e.XpG(2);return l.Njj(r.startMove(i,r.moveTypes.Resize,"top"))})("touchstart",function(i){l.eBV(o);const r=e.XpG(2);return l.Njj(r.startMove(i,r.moveTypes.Resize,"top"))}),e.k0s(),e.j41(10,"span",15),e.bIt("mousedown",function(i){l.eBV(o);const r=e.XpG(2);return l.Njj(r.startMove(i,r.moveTypes.Resize,"top"))})("touchstart",function(i){l.eBV(o);const r=e.XpG(2);return l.Njj(r.startMove(i,r.moveTypes.Resize,"top"))}),e.nrm(11,"span",10),e.k0s(),e.j41(12,"span",16),e.bIt("mousedown",function(i){l.eBV(o);const r=e.XpG(2);return l.Njj(r.startMove(i,r.moveTypes.Resize,"right"))})("touchstart",function(i){l.eBV(o);const r=e.XpG(2);return l.Njj(r.startMove(i,r.moveTypes.Resize,"right"))}),e.k0s(),e.j41(13,"span",17),e.bIt("mousedown",function(i){l.eBV(o);const r=e.XpG(2);return l.Njj(r.startMove(i,r.moveTypes.Resize,"right"))})("touchstart",function(i){l.eBV(o);const r=e.XpG(2);return l.Njj(r.startMove(i,r.moveTypes.Resize,"right"))}),e.nrm(14,"span",10),e.k0s(),e.j41(15,"span",18),e.bIt("mousedown",function(i){l.eBV(o);const r=e.XpG(2);return l.Njj(r.startMove(i,r.moveTypes.Resize,"bottom"))})("touchstart",function(i){l.eBV(o);const r=e.XpG(2);return l.Njj(r.startMove(i,r.moveTypes.Resize,"bottom"))}),e.k0s(),e.j41(16,"span",19),e.bIt("mousedown",function(i){l.eBV(o);const r=e.XpG(2);return l.Njj(r.startMove(i,r.moveTypes.Resize,"bottom"))})("touchstart",function(i){l.eBV(o);const r=e.XpG(2);return l.Njj(r.startMove(i,r.moveTypes.Resize,"bottom"))}),e.nrm(17,"span",10),e.k0s(),e.j41(18,"span",20),e.bIt("mousedown",function(i){l.eBV(o);const r=e.XpG(2);return l.Njj(r.startMove(i,r.moveTypes.Resize,"left"))})("touchstart",function(i){l.eBV(o);const r=e.XpG(2);return l.Njj(r.startMove(i,r.moveTypes.Resize,"left"))}),e.k0s(),e.j41(19,"span",21),e.bIt("mousedown",function(i){l.eBV(o);const r=e.XpG(2);return l.Njj(r.startMove(i,r.moveTypes.Resize,"left"))})("touchstart",function(i){l.eBV(o);const r=e.XpG(2);return l.Njj(r.startMove(i,r.moveTypes.Resize,"left"))}),e.nrm(20,"span",10),e.k0s(),e.bVm()}}function Kt(s,n){if(1&s){const o=e.RV6();e.j41(0,"div",6),e.bIt("keydown",function(i){l.eBV(o);const r=e.XpG();return l.Njj(r.keyboardAccess(i))}),e.j41(1,"div",7),e.bIt("mousedown",function(i){l.eBV(o);const r=e.XpG();return l.Njj(r.startMove(i,r.moveTypes.Move))})("touchstart",function(i){l.eBV(o);const r=e.XpG();return l.Njj(r.startMove(i,r.moveTypes.Move))}),e.k0s(),e.DNE(2,qt,21,0,"ng-container",8),e.k0s()}if(2&s){const o=e.XpG();e.xc7("top",o.state.cropper().y1,"px")("left",o.state.cropper().x1,"px")("width",o.state.cropper().x2-o.state.cropper().x1,"px")("height",o.state.cropper().y2-o.state.cropper().y1,"px")("margin-left","center"===o.state.options.alignImage?o.marginLeft:null)("visibility",o.imageVisible?"visible":"hidden"),e.AVh("ngx-ic-round",o.state.options.roundCropper),e.BMQ("aria-label",o.state.options.cropperFrameAriaLabel),e.R7$(2),e.Y8G("ngIf",!(o.state.options.hideResizeSquares||o.state.options.cropperStaticWidth&&o.state.options.cropperStaticHeight))}}function Ve(s,n,o){return s=function rt(s,n){let o=s.x2-s.x1,t=s.y2-s.y1;const i=s.x1+o/2,r=s.y1+t/2;n.options.cropperStaticHeight&&n.options.cropperStaticWidth?(o=n.maxSize().width>n.options.cropperStaticWidth?n.options.cropperStaticWidth:n.maxSize().width,t=n.maxSize().height>n.options.cropperStaticHeight?n.options.cropperStaticHeight:n.maxSize().height):(o=Math.max(n.cropperScaledMinWidth,Math.min(o,n.cropperScaledMaxWidth,n.maxSize().width)),t=Math.max(n.cropperScaledMinHeight,Math.min(t,n.cropperScaledMaxHeight,n.maxSize().height)),n.options.maintainAspectRatio&&(n.maxSize().width/n.options.aspectRatio<n.maxSize().height?t=o/n.options.aspectRatio:o=t*n.options.aspectRatio));const a=i-o/2,m=r-t/2;return{x1:a,x2:a+o,y1:m,y2:m+t}}(s,n),Be(s,n,o)}function Be(s,n,o=!1){return s.x1<0&&(s={...s,x1:0,x2:s.x2-(o?s.x1:0)}),s.y1<0&&(s={...s,y2:s.y2-(o?s.y1:0),y1:0}),s.x2>n.maxSize().width&&(s={...s,x1:s.x1-(o?s.x2-n.maxSize().width:0),x2:n.maxSize().width}),s.y2>n.maxSize().height&&(s={...s,y1:s.y1-(o?s.y2-n.maxSize().height:0),y2:n.maxSize().height}),s}function Zt(s,n,o){const t={...o.cropper()},i=at(s)-n.clientX,r=lt(s)-n.clientY;switch(n.position){case"left":t.x1=Math.min(Math.max(n.cropper.x1+i,t.x2-o.cropperScaledMaxWidth),t.x2-o.cropperScaledMinWidth);break;case"topleft":t.x1=Math.min(Math.max(n.cropper.x1+i,t.x2-o.cropperScaledMaxWidth),t.x2-o.cropperScaledMinWidth),t.y1=Math.min(Math.max(n.cropper.y1+r,t.y2-o.cropperScaledMaxHeight),t.y2-o.cropperScaledMinHeight);break;case"top":t.y1=Math.min(Math.max(n.cropper.y1+r,t.y2-o.cropperScaledMaxHeight),t.y2-o.cropperScaledMinHeight);break;case"topright":t.x2=Math.max(Math.min(n.cropper.x2+i,t.x1+o.cropperScaledMaxWidth),t.x1+o.cropperScaledMinWidth),t.y1=Math.min(Math.max(n.cropper.y1+r,t.y2-o.cropperScaledMaxHeight),t.y2-o.cropperScaledMinHeight);break;case"right":t.x2=Math.max(Math.min(n.cropper.x2+i,t.x1+o.cropperScaledMaxWidth),t.x1+o.cropperScaledMinWidth);break;case"bottomright":t.x2=Math.max(Math.min(n.cropper.x2+i,t.x1+o.cropperScaledMaxWidth),t.x1+o.cropperScaledMinWidth),t.y2=Math.max(Math.min(n.cropper.y2+r,t.y1+o.cropperScaledMaxHeight),t.y1+o.cropperScaledMinHeight);break;case"bottom":t.y2=Math.max(Math.min(n.cropper.y2+r,t.y1+o.cropperScaledMaxHeight),t.y1+o.cropperScaledMinHeight);break;case"bottomleft":t.x1=Math.min(Math.max(n.cropper.x1+i,t.x2-o.cropperScaledMaxWidth),t.x2-o.cropperScaledMinWidth),t.y2=Math.max(Math.min(n.cropper.y2+r,t.y1+o.cropperScaledMaxHeight),t.y1+o.cropperScaledMinHeight);break;case"center":const a="scale"in s?s.scale:1,p=Math.min(Math.max(o.cropperScaledMinWidth,Math.abs(n.cropper.x2-n.cropper.x1)*a),o.cropperScaledMaxWidth),m=Math.min(Math.max(o.cropperScaledMinHeight,Math.abs(n.cropper.y2-n.cropper.y1)*a),o.cropperScaledMaxHeight);t.x1=n.clientX-p/2,t.x2=n.clientX+p/2,t.y1=n.clientY-m/2,t.y2=n.clientY+m/2,t.x1<0?(t.x2-=t.x1,t.x1=0):t.x2>o.maxSize().width&&(t.x1-=t.x2-o.maxSize().width,t.x2=o.maxSize().width),t.y1<0?(t.y2-=t.y1,t.y1=0):t.y2>o.maxSize().height&&(t.y1-=t.y2-o.maxSize().height,t.y2=o.maxSize().height)}return o.options.maintainAspectRatio?function Ci(s,n,o){n={...n};let t=0,i=0;switch(s){case"top":n.x2=n.x1+(n.y2-n.y1)*o.options.aspectRatio,t=Math.max(n.x2-o.maxSize().width,0),i=Math.max(0-n.y1,0),(t>0||i>0)&&(n.x2-=i*o.options.aspectRatio>t?i*o.options.aspectRatio:t,n.y1+=i*o.options.aspectRatio>t?i:t/o.options.aspectRatio);break;case"bottom":n.x2=n.x1+(n.y2-n.y1)*o.options.aspectRatio,t=Math.max(n.x2-o.maxSize().width,0),i=Math.max(n.y2-o.maxSize().height,0),(t>0||i>0)&&(n.x2-=i*o.options.aspectRatio>t?i*o.options.aspectRatio:t,n.y2-=i*o.options.aspectRatio>t?i:t/o.options.aspectRatio);break;case"topleft":n.y1=n.y2-(n.x2-n.x1)/o.options.aspectRatio,t=Math.max(0-n.x1,0),i=Math.max(0-n.y1,0),(t>0||i>0)&&(n.x1+=i*o.options.aspectRatio>t?i*o.options.aspectRatio:t,n.y1+=i*o.options.aspectRatio>t?i:t/o.options.aspectRatio);break;case"topright":n.y1=n.y2-(n.x2-n.x1)/o.options.aspectRatio,t=Math.max(n.x2-o.maxSize().width,0),i=Math.max(0-n.y1,0),(t>0||i>0)&&(n.x2-=i*o.options.aspectRatio>t?i*o.options.aspectRatio:t,n.y1+=i*o.options.aspectRatio>t?i:t/o.options.aspectRatio);break;case"right":case"bottomright":n.y2=n.y1+(n.x2-n.x1)/o.options.aspectRatio,t=Math.max(n.x2-o.maxSize().width,0),i=Math.max(n.y2-o.maxSize().height,0),(t>0||i>0)&&(n.x2-=i*o.options.aspectRatio>t?i*o.options.aspectRatio:t,n.y2-=i*o.options.aspectRatio>t?i:t/o.options.aspectRatio);break;case"left":case"bottomleft":n.y2=n.y1+(n.x2-n.x1)/o.options.aspectRatio,t=Math.max(0-n.x1,0),i=Math.max(n.y2-o.maxSize().height,0),(t>0||i>0)&&(n.x1+=i*o.options.aspectRatio>t?i*o.options.aspectRatio:t,n.y2-=i*o.options.aspectRatio>t?i:t/o.options.aspectRatio);break;case"center":n.x2=n.x1+(n.y2-n.y1)*o.options.aspectRatio,n.y2=n.y1+(n.x2-n.x1)/o.options.aspectRatio;const r=Math.max(0-n.x1,0),a=Math.max(n.x2-o.maxSize().width,0),p=Math.max(n.y2-o.maxSize().height,0),m=Math.max(0-n.y1,0);(r>0||a>0||p>0||m>0)&&(n.x1+=p*o.options.aspectRatio>r?p*o.options.aspectRatio:r,n.x2-=m*o.options.aspectRatio>a?m*o.options.aspectRatio:a,n.y1+=m*o.options.aspectRatio>a?m:a/o.options.aspectRatio,n.y2-=p*o.options.aspectRatio>r?p:r/o.options.aspectRatio)}return n}(n.position,t,o):t}function at(s){return"touches"in s&&s.touches[0]?s.touches[0].clientX:"clientX"in s?s.clientX:0}function lt(s){return"touches"in s&&s.touches[0]?s.touches[0].clientY:"clientX"in s?s.clientY:0}class ct{constructor(){this.cropper=(0,l.vPA)({x1:0,x2:0,y1:0,y2:0}),this.maxSize=(0,l.vPA)({width:0,height:0}),this.transform={},this.options={format:"png",output:"blob",autoCrop:!0,maintainAspectRatio:!0,aspectRatio:1,resetCropOnAspectRatioChange:!0,resizeToWidth:0,resizeToHeight:0,cropperMinWidth:0,cropperMinHeight:0,cropperMaxHeight:0,cropperMaxWidth:0,cropperStaticWidth:0,cropperStaticHeight:0,canvasRotation:0,roundCropper:!1,onlyScaleDown:!1,imageQuality:92,backgroundColor:void 0,containWithinAspectRatio:!1,hideResizeSquares:!1,alignImage:"center",cropperFrameAriaLabel:void 0,checkImageType:!0},this.cropperScaledMinWidth=20,this.cropperScaledMinHeight=20,this.cropperScaledMaxWidth=20,this.cropperScaledMaxHeight=20,this.stepSize=3}setOptionsFromChanges(n){n.options?.currentValue&&this.setOptions(n.options.currentValue);const o=Object.entries(n).filter(([t])=>t in this.options).reduce((t,[i,r])=>({...t,[i]:r.currentValue}),{});Object.keys(o).length>0&&this.setOptions(o)}setOptions(n){if(this.options={...this.options,...n||{}},this.validateOptions(),!this.loadedImage?.transformed.image.complete||!this.maxSize)return;let o=!1;this.options.maintainAspectRatio&&n.aspectRatio||"maintainAspectRatio"in n?(this.setCropperScaledMinSize(),this.setCropperScaledMaxSize(),this.options.maintainAspectRatio&&(this.options.resetCropOnAspectRatioChange||!this.aspectRatioIsCorrect())&&(this.cropper.set(this.maxSizeCropperPosition()),o=!0)):((n.cropperMinWidth||n.cropperMinHeight)&&(this.setCropperScaledMinSize(),o=!0),(n.cropperMaxWidth||n.cropperMaxHeight)&&(this.setCropperScaledMaxSize(),o=!0),(n.cropperStaticWidth||n.cropperStaticHeight)&&(o=!0)),o&&this.cropper.update(t=>Ve(t,this,!1))}validateOptions(){if(this.options.maintainAspectRatio&&!this.options.aspectRatio)throw new Error("`aspectRatio` should > 0 when `maintainAspectRatio` is enabled")}setMaxSize(n,o){this.maxSize.set({width:n,height:o}),this.setCropperScaledMinSize(),this.setCropperScaledMaxSize()}setCropperScaledMinSize(){this.loadedImage?.transformed.size?(this.setCropperScaledMinWidth(),this.setCropperScaledMinHeight()):(this.cropperScaledMinWidth=20,this.cropperScaledMinHeight=20)}setCropperScaledMinWidth(){this.cropperScaledMinWidth=this.options.cropperMinWidth>0?Math.max(20,this.options.cropperMinWidth/this.loadedImage.transformed.size.width*this.maxSize().width):20}setCropperScaledMinHeight(){this.cropperScaledMinHeight=this.options.maintainAspectRatio?Math.max(20,this.cropperScaledMinWidth/this.options.aspectRatio):this.options.cropperMinHeight>0?Math.max(20,this.options.cropperMinHeight/this.loadedImage.transformed.size.height*this.maxSize().height):20}setCropperScaledMaxSize(){if(this.loadedImage?.transformed.size){const n=this.loadedImage.transformed.size.width/this.maxSize().width;this.cropperScaledMaxWidth=this.options.cropperMaxWidth>20?this.options.cropperMaxWidth/n:this.maxSize().width,this.cropperScaledMaxHeight=this.options.cropperMaxHeight>20?this.options.cropperMaxHeight/n:this.maxSize().height,this.options.maintainAspectRatio&&(this.cropperScaledMaxWidth>this.cropperScaledMaxHeight*this.options.aspectRatio?this.cropperScaledMaxWidth=this.cropperScaledMaxHeight*this.options.aspectRatio:this.cropperScaledMaxWidth<this.cropperScaledMaxHeight*this.options.aspectRatio&&(this.cropperScaledMaxHeight=this.cropperScaledMaxWidth/this.options.aspectRatio))}else this.cropperScaledMaxWidth=this.maxSize().width,this.cropperScaledMaxHeight=this.maxSize().height}equalsCropperPosition(n){const o=this.cropper();return null==o&&null==n||null!=o&&null!=n&&o.x1.toFixed(3)===n.x1.toFixed(3)&&o.y1.toFixed(3)===n.y1.toFixed(3)&&o.x2.toFixed(3)===n.x2.toFixed(3)&&o.y2.toFixed(3)===n.y2.toFixed(3)}equalsTransformTranslate(n){return(this.transform.translateH??0)===(n.translateH??0)&&(this.transform.translateV??0)===(n.translateV??0)}equalsTransform(n){return this.equalsTransformTranslate(n)&&(this.transform.scale??1)===(n.scale??1)&&(this.transform.rotate??0)===(n.rotate??0)&&(this.transform.flipH??!1)===(n.flipH??!1)&&(this.transform.flipV??!1)===(n.flipV??!1)}aspectRatioIsCorrect(){const n=this.cropper();return(n.x2-n.x1)/(n.y2-n.y1)===this.options.aspectRatio}resizeCropperPosition(n){(n.width!==this.maxSize().width||n.height!==this.maxSize().height)&&this.cropper.update(o=>({x1:o.x1*this.maxSize().width/n.width,x2:o.x2*this.maxSize().width/n.width,y1:o.y1*this.maxSize().height/n.height,y2:o.y2*this.maxSize().height/n.height}))}maxSizeCropperPosition(){return{x1:0,y1:0,x2:this.maxSize().width,y2:this.maxSize().height}}toCropInput(){return{cropper:this.cropper(),maxSize:this.maxSize(),transform:this.transform,loadedImage:this.loadedImage,options:{...this.options}}}}var ne=function(s){return s.Drag="drag",s.Move="move",s.Resize="resize",s.Pinch="pinch",s}(ne||{});function Ft(s,n){return s/100*n}class Jt{crop(n,o){const t=this.getImagePosition(n),i=t.x2-t.x1,r=t.y2-t.y1,a=document.createElement("canvas");a.width=i,a.height=r;const p=a.getContext("2d");if(!p)return null;null!=n.options?.backgroundColor&&(p.fillStyle=n.options.backgroundColor,p.fillRect(0,0,i,r));const m=(n.transform?.scale||1)*(n.transform?.flipH?-1:1),f=(n.transform?.scale||1)*(n.transform?.flipV?-1:1),{translateH:F,translateV:P}=this.getCanvasTranslate(n),R=n.loadedImage.transformed;p.setTransform(m,0,0,f,R.size.width/2+F,R.size.height/2+P),p.translate(-t.x1/m,-t.y1/f),p.rotate((n.transform?.rotate||0)*Math.PI/180),p.drawImage(R.image,-R.size.width/2,-R.size.height/2);const D={width:i,height:r,imagePosition:t,cropperPosition:{...n.cropper}};n.options?.containWithinAspectRatio&&(D.offsetImagePosition=this.getOffsetImagePosition(n));const X=this.getResizeRatio(i,r,n.options);return 1!==X&&(D.width=Math.round(i*X),D.height=n.options?.maintainAspectRatio?Math.round(D.width/(n.options?.aspectRatio??1)):Math.round(r*X),function bi(s,n,o){const t=s.width,i=s.height,r=t/(n=Math.round(n)),a=i/(o=Math.round(o)),p=Math.ceil(r/2),m=Math.ceil(a/2),f=s.getContext("2d");if(f){const F=f.getImageData(0,0,t,i),P=f.createImageData(n,o),R=F.data,D=P.data;for(let X=0;X<o;X++)for(let we=0;we<n;we++){const W=4*(we+X*n),Wi=X*a;let Ee=0,Ye=0,Gt=0,Vt=0,Bn=0,Xn=0,$n=0;const fc=Math.floor(we*r),vc=Math.floor(X*a);let Qi=Math.ceil((we+1)*r),qi=Math.ceil((X+1)*a);Qi=Math.min(Qi,t),qi=Math.min(qi,i);for(let mi=vc;mi<qi;mi++){const Hn=Math.abs(Wi-mi)/m,Cc=we*r,bc=Hn*Hn;for(let ui=fc;ui<Qi;ui++){const Yn=Math.abs(Cc-ui)/p,ft=Math.sqrt(bc+Yn*Yn);if(ft>=1)continue;Ee=2*ft*ft*ft-3*ft*ft+1;const vt=4*(ui+mi*t);$n+=Ee*R[vt+3],Gt+=Ee,R[vt+3]<255&&(Ee=Ee*R[vt+3]/250),Vt+=Ee*R[vt],Bn+=Ee*R[vt+1],Xn+=Ee*R[vt+2],Ye+=Ee}}D[W]=Vt/Ye,D[W+1]=Bn/Ye,D[W+2]=Xn/Ye,D[W+3]=$n/Gt}s.width=n,s.height=o,f.putImageData(P,0,0)}}(a,D.width,D.height)),"blob"===o?this.cropToBlob(D,a,n):(D.base64=a.toDataURL("image/"+(n.options?.format??"png"),this.getQuality(n.options)),D)}cropToBlob(n,o,t){var i=this;return(0,S.A)(function*(){return n.blob=yield new Promise(r=>o.toBlob(r,"image/"+(t.options?.format??"png"),i.getQuality(t.options))),n.blob&&(n.objectUrl=URL.createObjectURL(n.blob)),n})()}getCanvasTranslate(n){if("px"===n.transform?.translateUnit){const o=this.getRatio(n);return{translateH:(n.transform?.translateH||0)*o,translateV:(n.transform?.translateV||0)*o}}return{translateH:n.transform?.translateH?Ft(n.transform.translateH,n.loadedImage.transformed.size.width):0,translateV:n.transform?.translateV?Ft(n.transform.translateV,n.loadedImage.transformed.size.height):0}}getRatio(n){return n.loadedImage.transformed.size.width/n.maxSize.width}getImagePosition(n){const o=this.getRatio(n),t={x1:Math.round(n.cropper.x1*o),y1:Math.round(n.cropper.y1*o),x2:Math.round(n.cropper.x2*o),y2:Math.round(n.cropper.y2*o)};return n.options?.containWithinAspectRatio||(t.x1=Math.max(t.x1,0),t.y1=Math.max(t.y1,0),t.x2=Math.min(t.x2,n.loadedImage.transformed.size.width),t.y2=Math.min(t.y2,n.loadedImage.transformed.size.height)),t}getOffsetImagePosition(n){const o=(n.options?.canvasRotation??0)+n.loadedImage.exifTransform.rotate,t=this.getRatio(n);let i,r;o%2?(i=(n.loadedImage.transformed.size.width-n.loadedImage.original.size.height)/2,r=(n.loadedImage.transformed.size.height-n.loadedImage.original.size.width)/2):(i=(n.loadedImage.transformed.size.width-n.loadedImage.original.size.width)/2,r=(n.loadedImage.transformed.size.height-n.loadedImage.original.size.height)/2);const a=n.cropper,p={x1:Math.round(a.x1*t)-i,y1:Math.round(a.y1*t)-r,x2:Math.round(a.x2*t)-i,y2:Math.round(a.y2*t)-r};return n.options?.containWithinAspectRatio||(p.x1=Math.max(p.x1,0),p.y1=Math.max(p.y1,0),p.x2=Math.min(p.x2,n.loadedImage.transformed.size.width),p.y2=Math.min(p.y2,n.loadedImage.transformed.size.height)),p}getResizeRatio(n,o,t){const i=new Array;t?.resizeToWidth&&t.resizeToWidth>0&&i.push(t.resizeToWidth/n),t?.resizeToHeight&&t.resizeToHeight>0&&i.push(t.resizeToHeight/o);const r=0===i.length?1:Math.min(...i);return r>1&&!t?.onlyScaleDown?r:Math.min(r,1)}getQuality(n){return Math.min(1,Math.max(0,(n?.imageQuality??92)/100))}}const yt=[new Uint8Array([255,216,255,225,0,34,69,120,105,102,0,0,77,77,0,42,0,0,0,8,0,1,1,18,0,3,0,0,0,1,0,6,0,0,0,0,0,0,255,219,0,132,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,255,192,0,17,8,0,1,0,2,3,1,17,0,2,17,1,3,17,1,255,196,0,74,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,11,16,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,17,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,218,0,12,3,1,0,2,17,3,17,0,63,0,63,240,127,255,217])],Ei=URL.createObjectURL(new Blob(yt,{type:"image/jpeg"}));class xi{constructor(){this.autoRotateSupported=function Fi(){return new Promise(s=>{const n=new Image;n.onload=()=>{s(1===n.width&&2===n.height)},n.src=Ei})}()}loadImageFile(n,o){var t=this;return(0,S.A)(function*(){const i=yield n.arrayBuffer();return o.checkImageType?yield t.checkImageTypeAndLoadImageFromArrayBuffer(i,n.type,o):yield t.loadImageFromArrayBuffer(i,o)})()}checkImageTypeAndLoadImageFromArrayBuffer(n,o,t){return this.isValidImageType(o)?this.loadImageFromArrayBuffer(n,t,o):Promise.reject(new Error("Invalid image type"))}isValidImageType(n){return/image\/(png|jpg|jpeg|heic|bmp|gif|tiff|svg|webp|x-icon|vnd.microsoft.icon)/.test(n)}loadImageFromURL(n,o){var t=this;return(0,S.A)(function*(){const r=yield(yield fetch(n)).blob(),a=yield r.arrayBuffer();return yield t.loadImageFromArrayBuffer(a,o,r.type)})()}loadBase64Image(n,o){const t=this.base64ToArrayBuffer(n);return this.loadImageFromArrayBuffer(t,o)}base64ToArrayBuffer(n){n=n.replace(/^data:([^;]+);base64,/gim,"");const o=atob(n),t=o.length,i=new Uint8Array(t);for(let r=0;r<t;r++)i[r]=o.charCodeAt(r);return i.buffer}loadImageFromArrayBuffer(n,o,t){var i=this;return(0,S.A)(function*(){const r=yield new Promise(function(){var a=(0,S.A)(function*(p,m){try{const f=new Blob([n],t?{type:t}:void 0),F=URL.createObjectURL(f),P=new Image,D="image/svg+xml"===t?yield i.getSvgImageSize(f):void 0;P.onload=()=>p({originalImage:P,originalImageSize:D,originalObjectUrl:F,originalArrayBuffer:n}),P.onerror=m,P.src=F}catch(f){m(f)}});return function(p,m){return a.apply(this,arguments)}}());return yield i.transformImageFromArrayBuffer(r,o,null!=r.originalImageSize)})()}getSvgImageSize(n){return(0,S.A)(function*(){const i=(new DOMParser).parseFromString(yield n.text(),"image/svg+xml").querySelector("svg");if(!i)throw Error("Failed to parse SVG image");const r=i.getAttribute("width"),a=i.getAttribute("height");if(r&&a)return null;const p=i.getAttribute("viewBox")||i.getAttribute("viewbox");if(p){const m=p.split(" ");return{width:+m[2],height:+m[3]}}throw Error("Failed to load SVG image. SVG must have width + height or viewBox definition.")})()}transformImageFromArrayBuffer(n,o){var t=this;return(0,S.A)(function*(i,r,a=!1){const m=function yi(s){switch("object"==typeof s&&(s=function ei(s){const n=new DataView(s);if(65496!==n.getUint16(0,!1))return-2;const o=n.byteLength;let t=2;for(;t<o;){if(n.getUint16(t+2,!1)<=8)return-1;const i=n.getUint16(t,!1);if(t+=2,65505==i){if(1165519206!==n.getUint32(t+=2,!1))return-1;const r=18761==n.getUint16(t+=6,!1);t+=n.getUint32(t+4,r);const a=n.getUint16(t,r);t+=2;for(let p=0;p<a;p++)if(274==n.getUint16(t+12*p,r))return n.getUint16(t+12*p+8,r)}else{if(65280&~i)break;t+=n.getUint16(t,!1)}}return-1}(s)),s){case 2:return{rotate:0,flip:!0};case 3:return{rotate:2,flip:!1};case 4:return{rotate:2,flip:!0};case 5:return{rotate:1,flip:!0};case 6:return{rotate:1,flip:!1};case 7:return{rotate:3,flip:!0};case 8:return{rotate:3,flip:!1};default:return{rotate:0,flip:!1}}}((yield t.autoRotateSupported)?-1:i.originalArrayBuffer);return i.originalImage&&i.originalImage.complete?t.transformLoadedImage({original:{objectUrl:i.originalObjectUrl,image:i.originalImage,size:i.originalImageSize??{width:i.originalImage.naturalWidth,height:i.originalImage.naturalHeight}},exifTransform:m},r,a):Promise.reject(new Error("No image loaded"))}).apply(this,arguments)}transformLoadedImage(n,o){var t=this;return(0,S.A)(function*(i,r,a=!1){const p=(r.canvasRotation??0)+i.exifTransform.rotate,m=i.original.size;if(!a&&0===p&&!i.exifTransform.flip&&!r.containWithinAspectRatio)return{original:{objectUrl:i.original.objectUrl,image:i.original.image,size:{...m}},transformed:{objectUrl:i.original.objectUrl,image:i.original.image,size:{...m}},exifTransform:i.exifTransform};const f=t.getTransformedSize(m,i.exifTransform,r),F=document.createElement("canvas");F.width=f.width,F.height=f.height;const P=F.getContext("2d");P?.setTransform(i.exifTransform.flip?-1:1,0,0,1,F.width/2,F.height/2),P?.rotate(Math.PI*(p/2)),P?.drawImage(i.original.image,-m.width/2,-m.height/2);const R=yield new Promise(we=>F.toBlob(we,"image/"+(r.format??"png")));if(!R)throw new Error("Failed to get Blob for transformed image.");const D=URL.createObjectURL(R),X=yield t.loadImageFromObjectUrl(D);return{original:{objectUrl:i.original.objectUrl,image:i.original.image,size:{...m}},transformed:{objectUrl:D,image:X,size:{width:X.width,height:X.height}},exifTransform:i.exifTransform}}).apply(this,arguments)}loadImageFromObjectUrl(n){return new Promise((o,t)=>{const i=new Image;i.onload=()=>o(i),i.onerror=t,i.src=n})}getTransformedSize(n,o,t){const i=(t.canvasRotation??0)+o.rotate;if(t.containWithinAspectRatio){if(i%2){const a=n.height/(t.aspectRatio??1);return{width:Math.max(n.height,n.width*(t.aspectRatio??1)),height:Math.max(n.width,a)}}{const a=n.width/(t.aspectRatio??1);return{width:Math.max(n.width,n.height*(t.aspectRatio??1)),height:Math.max(n.height,a)}}}return i%2?{height:n.width,width:n.height}:{width:n.width,height:n.height}}}let ti=(()=>{var s;class n{get alignImageStyle(){return this.state.options.alignImage}constructor(t){this.sanitizer=t,this.pinchStart$=new k.B,this.cropService=new Jt,this.loadImageService=new xi,this.setImageMaxSizeRetries=0,this.resizedWhileHidden=!1,this.moveTypes=ne,this.state=new ct,this.safeImgDataUrl=(0,l.vPA)(void 0),this.safeTransformStyle=(0,l.vPA)(void 0),this.marginLeft="0px",this.imageVisible=!1,this.allowMoveImage=!1,this.checkImageType=!0,this.disabled=!1,this.hidden=!1,this.imageCropped=(0,T.CGW)(),this.startCropImage=(0,T.CGW)(),this.imageLoaded=(0,T.CGW)(),this.cropperReady=(0,T.CGW)(),this.loadImageFailed=(0,T.CGW)(),this.transformChange=(0,T.CGW)(),this.cropperChange=(0,T.CGW)(),this.reset()}ngOnInit(){this.state.stepSize=this.initialStepSize||this.state.stepSize}ngOnChanges(t){const i=this.state.cropper(),r=this.state.transform,a=this.state.options.backgroundColor;if(this.state.setOptionsFromChanges(t),this.onChangesInputImage(t),t.transform&&this.transform&&(this.state.transform=this.transform,this.setCssTransform()),!this.state.loadedImage?.transformed.image.complete||!this.state.maxSize)return;if(this.containWithinAspectRatio&&t.aspectRatio||t.containWithinAspectRatio||t.canvasRotation)return void this.loadImageService.transformLoadedImage(this.state.loadedImage,this.state.options).then(m=>this.setLoadedImage(m)).catch(m=>this.loadImageError(m));t.cropper&&this.cropper&&this.state.cropper.set(Ve(this.cropper,this.state,!0));const p=!this.state.equalsCropperPosition(i);p&&(!this.cropper||!this.state.equalsCropperPosition(this.cropper))&&this.cropperChange.emit(this.state.cropper()),(p||!this.state.equalsTransform(r)||this.state.options.backgroundColor!==a)&&this.doAutoCrop(),t.hidden&&this.resizedWhileHidden&&!this.hidden&&setTimeout(()=>{this.onResize(),this.resizedWhileHidden=!1})}onChangesInputImage(t){(t.imageChangedEvent||t.imageURL||t.imageBase64||t.imageFile)&&this.reset(),t.imageChangedEvent&&this.isValidImageChangedEvent()&&this.loadImageFile(this.imageChangedEvent.target.files[0]),t.imageURL&&this.imageURL&&this.loadImageFromURL(this.imageURL),t.imageBase64&&this.imageBase64&&this.loadBase64Image(this.imageBase64),t.imageFile&&this.imageFile&&this.loadImageFile(this.imageFile)}isValidImageChangedEvent(){const t=this.imageChangedEvent?.target?.files;return t instanceof FileList&&t.length>0}reset(){this.state.loadedImage=void 0,this.state.maxSize.set({width:0,height:0}),this.imageVisible=!1}loadImageFile(t){this.loadImageService.loadImageFile(t,this.state.options).then(i=>this.setLoadedImage(i)).catch(i=>this.loadImageError(i))}loadBase64Image(t){this.loadImageService.loadBase64Image(t,this.state.options).then(i=>this.setLoadedImage(i)).catch(i=>this.loadImageError(i))}loadImageFromURL(t){this.loadImageService.loadImageFromURL(t,this.state.options).then(i=>this.setLoadedImage(i)).catch(i=>this.loadImageError(i))}setLoadedImage(t){this.state.loadedImage=t,this.safeImgDataUrl.set(this.sanitizer.bypassSecurityTrustResourceUrl(t.transformed.objectUrl))}loadImageError(t){console.error(t),this.loadImageFailed.emit()}setCssTransform(){const t=this.state.transform?.translateUnit||"%";this.safeTransformStyle.set(this.sanitizer.bypassSecurityTrustStyle(`translate(${this.state.transform.translateH||0}${t}, ${this.state.transform.translateV||0}${t}) scaleX(`+(this.state.transform.scale||1)*(this.state.transform.flipH?-1:1)+") scaleY("+(this.state.transform.scale||1)*(this.state.transform.flipV?-1:1)+") rotate("+(this.state.transform.rotate||0)+"deg)"))}imageLoadedInView(){null!=this.state.loadedImage&&(this.imageLoaded.emit(this.state.loadedImage),this.setImageMaxSizeRetries=0,setTimeout(()=>this.checkImageMaxSizeRecursively()))}checkImageMaxSizeRecursively(){this.setImageMaxSizeRetries>40?this.loadImageFailed.emit():this.sourceImageLoaded()?(this.setMaxSize(),!this.cropper||this.maintainAspectRatio&&!this.state.aspectRatioIsCorrect()?(this.state.cropper.set(Ve(this.state.maxSizeCropperPosition(),this.state,!0)),this.cropperChange.emit(this.state.cropper())):(this.state.cropper.set(Ve(this.cropper,this.state,!0)),this.emitCropperPositionChange(this.cropper)),this.imageVisible=!0,this.cropperReady.emit(this.state.maxSize()),this.doAutoCrop()):(this.setImageMaxSizeRetries++,setTimeout(()=>this.checkImageMaxSizeRecursively(),50))}sourceImageLoaded(){return this.sourceImage?.nativeElement?.offsetWidth>1}onResize(){if(this.state.loadedImage)if(this.hidden)this.resizedWhileHidden=!0;else{const t=this.state.maxSize();this.setMaxSize(),this.state.resizeCropperPosition(t)}}keyboardAccess(t){this.changeKeyboardStepSize(t),this.keyboardMoveCropper(t)}changeKeyboardStepSize(t){const i=+t.key;i>=1&&i<=9&&(this.state.stepSize=i)}keyboardMoveCropper(t){if(!["ArrowUp","ArrowDown","ArrowRight","ArrowLeft"].includes(t.key))return;const r=t.shiftKey?ne.Resize:ne.Move,a=t.altKey?function Ti(s){switch(s){case"ArrowUp":return"bottom";case"ArrowRight":return"left";case"ArrowDown":return"top";default:return"right"}}(t.key):function Mi(s){switch(s){case"ArrowUp":return"top";case"ArrowRight":return"right";case"ArrowDown":return"bottom";default:return"left"}}(t.key),p=function dt(s,n){switch(s){case"ArrowUp":return{clientX:0,clientY:-1*n};case"ArrowRight":return{clientX:n,clientY:0};case"ArrowDown":return{clientX:0,clientY:n};default:return{clientX:-1*n,clientY:0}}}(t.key,this.state.stepSize);t.preventDefault(),t.stopPropagation(),this.moveStart={type:r,position:a,clientX:0,clientY:0,transform:this.state.transform,cropper:this.state.cropper()},this.handleMouseMove(p),this.handleMouseUp()}startMove(t,i,r=null){this.disabled||this.moveStart&&this.moveStart.type===ne.Pinch||i===ne.Drag&&!this.allowMoveImage||("preventDefault"in t&&t.preventDefault(),this.moveStart={type:i,position:r,clientX:at(t),clientY:lt(t),transform:this.state.transform,cropper:this.state.cropper()},this.initMouseMove())}initMouseMove(){(0,Qe.h)((0,Ge.R)(document,"mousemove"),(0,Ge.R)(document,"touchmove")).pipe((0,Me.Q)((0,Qe.h)((0,Ge.R)(document,"mouseup"),(0,Ge.R)(document,"touchend"),this.pinchStart$).pipe((0,re.$)()))).subscribe({next:t=>this.handleMouseMove(t),complete:()=>this.handleMouseUp()})}handleMouseMove(t){if(this.moveStart)if("stopPropagation"in t&&t.stopPropagation(),"preventDefault"in t&&t.preventDefault(),this.moveStart.type===ne.Move)this.state.cropper.set(Be(function vi(s,n){const o=at(s)-n.clientX,t=lt(s)-n.clientY;return{x1:n.cropper.x1+o,y1:n.cropper.y1+t,x2:n.cropper.x2+o,y2:n.cropper.y2+t}}(t,this.moveStart),this.state,!0));else if(this.moveStart.type===ne.Resize)!this.cropperStaticWidth&&!this.cropperStaticHeight&&this.state.cropper.set(Be(Zt(t,this.moveStart,this.state),this.state,!1));else if(this.moveStart.type===ne.Drag){const i=at(t)-this.moveStart.clientX,r=lt(t)-this.moveStart.clientY;this.state.transform={...this.state.transform,translateH:(this.moveStart.transform?.translateH||0)+i,translateV:(this.moveStart.transform?.translateV||0)+r},this.setCssTransform()}}handleMouseUp(){!this.moveStart||this.moveStart.type===ne.Pinch||((!this.state.equalsCropperPosition(this.moveStart.cropper)||this.moveStart.transform&&!this.state.equalsTransform(this.moveStart.transform))&&(this.moveStart.type===ne.Drag?this.transformChange.emit(this.state.transform):this.cropperChange.emit(this.state.cropper()),this.doAutoCrop()),this.moveStart=void 0)}startPinch(t){if(this.disabled||!this.sourceImageLoaded()||t.touches.length<2)return;"preventDefault"in t&&t.preventDefault();const i=this.state.cropper();this.moveStart={type:ne.Pinch,position:"center",clientX:i.x1+(i.x2-i.x1)/2,clientY:i.y1+(i.y2-i.y1)/2,cropper:i},this.initPinch()}initPinch(){this.pinchStart$.next(),(0,Ge.R)(document,"touchmove").pipe((0,Me.Q)((0,Ge.R)(document,"touchend"))).subscribe({next:t=>this.handlePinchMove(t),complete:()=>this.handlePinchStop()})}handlePinchMove(t){this.moveStart&&(t.preventDefault&&t.preventDefault(),this.moveStart.type===ne.Pinch&&!this.cropperStaticWidth&&!this.cropperStaticHeight&&this.state.cropper.set(Be(Zt(t,this.moveStart,this.state),this.state,!1)))}handlePinchStop(){this.moveStart&&(this.state.equalsCropperPosition(this.moveStart.cropper)||(this.emitCropperPositionChange(this.moveStart.cropper),this.doAutoCrop()),this.moveStart=void 0)}setMaxSize(){if(this.sourceImage){const t=getComputedStyle(this.sourceImage.nativeElement);this.state.setMaxSize(parseFloat(t.width),parseFloat(t.height)),this.marginLeft=this.sanitizer.bypassSecurityTrustStyle("calc(50% - "+this.state.maxSize().width/2+"px)")}}emitCropperPositionChange(t){this.state.equalsCropperPosition(t)||this.cropperChange.emit(this.state.cropper())}doAutoCrop(){this.state.options.autoCrop&&this.crop()}crop(t=this.state.options.output){if(null!=this.state.loadedImage?.transformed?.image){if(this.startCropImage.emit(),"blob"===t)return this.cropToBlob();if("base64"===t)return this.cropToBase64()}return null}cropToBlob(){var t=this;return new Promise(function(){var i=(0,S.A)(function*(r,a){const p=yield t.cropService.crop(t.state.toCropInput(),"blob");p?(t.imageCropped.emit(p),r(p)):a("Crop image failed")});return function(r,a){return i.apply(this,arguments)}}())}cropToBase64(){const t=this.cropService.crop(this.state.toCropInput(),"base64");return t?(this.imageCropped.emit(t),t):null}resetCropperPosition(){this.state.cropper.set(Ve(this.state.maxSizeCropperPosition(),this.state,!0)),this.cropperChange.emit(this.state.cropper())}ngOnDestroy(){this.pinchStart$.complete()}static#e=s=()=>(this.\u0275fac=function(i){return new(i||n)(e.rXU(_i.up))},this.\u0275cmp=e.VBU({type:n,selectors:[["image-cropper"]],viewQuery:function(i,r){if(1&i&&(e.GBs(gi,7),e.GBs(fi,5)),2&i){let a;e.mGM(a=e.lsd())&&(r.wrapper=a.first),e.mGM(a=e.lsd())&&(r.sourceImage=a.first)}},hostVars:6,hostBindings:function(i,r){1&i&&e.bIt("resize",function(){return r.onResize()},e.tSv),2&i&&(e.xc7("text-align",r.alignImageStyle),e.AVh("disabled",r.disabled)("ngx-ic-hidden",r.hidden))},inputs:{imageChangedEvent:"imageChangedEvent",imageURL:"imageURL",imageBase64:"imageBase64",imageFile:"imageFile",imageAltText:"imageAltText",options:"options",cropperFrameAriaLabel:"cropperFrameAriaLabel",output:"output",format:"format",autoCrop:"autoCrop",cropper:"cropper",transform:"transform",maintainAspectRatio:"maintainAspectRatio",aspectRatio:"aspectRatio",resetCropOnAspectRatioChange:"resetCropOnAspectRatioChange",resizeToWidth:"resizeToWidth",resizeToHeight:"resizeToHeight",cropperMinWidth:"cropperMinWidth",cropperMinHeight:"cropperMinHeight",cropperMaxHeight:"cropperMaxHeight",cropperMaxWidth:"cropperMaxWidth",cropperStaticWidth:"cropperStaticWidth",cropperStaticHeight:"cropperStaticHeight",canvasRotation:"canvasRotation",initialStepSize:"initialStepSize",roundCropper:"roundCropper",onlyScaleDown:"onlyScaleDown",imageQuality:"imageQuality",backgroundColor:"backgroundColor",containWithinAspectRatio:"containWithinAspectRatio",hideResizeSquares:"hideResizeSquares",allowMoveImage:"allowMoveImage",checkImageType:"checkImageType",alignImage:"alignImage",disabled:"disabled",hidden:"hidden"},outputs:{imageCropped:"imageCropped",startCropImage:"startCropImage",imageLoaded:"imageLoaded",cropperReady:"cropperReady",loadImageFailed:"loadImageFailed",transformChange:"transformChange",cropperChange:"cropperChange"},features:[e.OA$],decls:4,vars:10,consts:[["sourceImage",""],[3,"touchstart"],["class","ngx-ic-source-image","role","presentation",3,"src","visibility","transform","ngx-ic-draggable","load","mousedown","touchstart","error",4,"ngIf"],[1,"ngx-ic-overlay"],["class","ngx-ic-cropper","tabindex","0",3,"ngx-ic-round","top","left","width","height","margin-left","visibility","keydown",4,"ngIf"],["role","presentation",1,"ngx-ic-source-image",3,"load","mousedown","touchstart","error","src"],["tabindex","0",1,"ngx-ic-cropper",3,"keydown"],["role","presentation",1,"ngx-ic-move",3,"mousedown","touchstart"],[4,"ngIf"],["role","presentation",1,"ngx-ic-resize","ngx-ic-topleft",3,"mousedown","touchstart"],[1,"ngx-ic-square"],["role","presentation",1,"ngx-ic-resize","ngx-ic-topright",3,"mousedown","touchstart"],["role","presentation",1,"ngx-ic-resize","ngx-ic-bottomright",3,"mousedown","touchstart"],["role","presentation",1,"ngx-ic-resize","ngx-ic-bottomleft",3,"mousedown","touchstart"],["role","presentation",1,"ngx-ic-resize-bar","ngx-ic-top",3,"mousedown","touchstart"],[1,"ngx-ic-resize","ngx-ic-top",3,"mousedown","touchstart"],["role","presentation",1,"ngx-ic-resize-bar","ngx-ic-right",3,"mousedown","touchstart"],[1,"ngx-ic-resize","ngx-ic-right",3,"mousedown","touchstart"],["role","presentation",1,"ngx-ic-resize-bar","ngx-ic-bottom",3,"mousedown","touchstart"],[1,"ngx-ic-resize","ngx-ic-bottom",3,"mousedown","touchstart"],["role","presentation",1,"ngx-ic-resize-bar","ngx-ic-left",3,"mousedown","touchstart"],[1,"ngx-ic-resize","ngx-ic-left",3,"mousedown","touchstart"]],template:function(i,r){1&i&&(e.j41(0,"div",1),e.bIt("touchstart",function(p){return r.startPinch(p)}),e.DNE(1,Qt,2,8,"img",2),e.nrm(2,"div",3),e.DNE(3,Kt,3,16,"div",4),e.k0s()),2&i&&(e.xc7("background",r.imageVisible&&r.state.options.backgroundColor),e.R7$(),e.Y8G("ngIf",r.safeImgDataUrl()),e.R7$(),e.xc7("width",r.state.maxSize().width||0,"px")("height",r.state.maxSize().height||0,"px")("margin-left","center"===r.state.options.alignImage?r.marginLeft:null),e.R7$(),e.Y8G("ngIf",r.imageVisible))},dependencies:[v.bT],styles:['[_nghost-%COMP%]{display:flex;position:relative;width:100%;max-width:100%;max-height:100%;overflow:hidden;padding:5px;text-align:center}[_nghost-%COMP%] > div[_ngcontent-%COMP%]{width:100%;position:relative}[_nghost-%COMP%] > div[_ngcontent-%COMP%]   img.ngx-ic-source-image[_ngcontent-%COMP%]{display:inline;max-width:100%;max-height:100%;transform-origin:center}[_nghost-%COMP%] > div[_ngcontent-%COMP%]   img.ngx-ic-source-image.ngx-ic-draggable[_ngcontent-%COMP%]{user-drag:none;-webkit-user-drag:none;user-select:none;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;cursor:grab}[_nghost-%COMP%]   .ngx-ic-overlay[_ngcontent-%COMP%]{position:absolute;pointer-events:none;touch-action:none;outline:var(--cropper-overlay-color, white) solid 100vw;top:0;left:0}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]{position:absolute;display:flex;color:var(--cropper-color, #53535C);background:transparent;outline:var(--cropper-outline-color, rgba(255, 255, 255, .3)) solid 100vw;touch-action:none}@media (orientation: portrait){[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]{outline-width:100vh}}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]:after{position:absolute;content:"";inset:0;pointer-events:none;border:dashed 1px;opacity:.75;color:inherit;z-index:1}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-move[_ngcontent-%COMP%]{width:100%;cursor:move;border:var(--cropper-border, 1px solid rgba(255, 255, 255, .5))}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]:hover   .ngx-ic-move[_ngcontent-%COMP%]{border:var(--cropper-hover-border, var(--cropper-border, 1px solid rgba(255, 255, 255, .5)))}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]:focus   .ngx-ic-move[_ngcontent-%COMP%]{border:var(--cropper-focus-border, 2px solid dodgerblue)}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]:focus   .ngx-ic-resize[_ngcontent-%COMP%]   .ngx-ic-square[_ngcontent-%COMP%]{background:var(--cropper-resize-square-focus-bg, var(--cropper-resize-square-bg, #53535C));border:var(--cropper-resize-square-focus-border, var(--cropper-resize-square-border, 1px solid rgba(255, 255, 255, .5)))}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize[_ngcontent-%COMP%]{position:absolute;display:inline-block;line-height:6px;padding:8px;opacity:.85;z-index:1}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize[_ngcontent-%COMP%]   .ngx-ic-square[_ngcontent-%COMP%]{display:inline-block;width:6px;height:6px;box-sizing:content-box;background:var(--cropper-resize-square-bg, #53535C);border:var(--cropper-resize-square-border, 1px solid rgba(255, 255, 255, .5))}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize[_ngcontent-%COMP%]:hover   .ngx-ic-square[_ngcontent-%COMP%]{background:var(--cropper-resize-square-hover-bg, var(--cropper-resize-square-bg, #53535C));border:var(--cropper-resize-square-hover-border, var(--cropper-resize-square-border, 1px solid rgba(255, 255, 255, .5)))}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-topleft[_ngcontent-%COMP%]{top:-12px;left:-12px;cursor:nwse-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-top[_ngcontent-%COMP%]{top:-12px;left:calc(50% - 12px);cursor:ns-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-topright[_ngcontent-%COMP%]{top:-12px;right:-12px;cursor:nesw-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-right[_ngcontent-%COMP%]{top:calc(50% - 12px);right:-12px;cursor:ew-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-bottomright[_ngcontent-%COMP%]{bottom:-12px;right:-12px;cursor:nwse-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-bottom[_ngcontent-%COMP%]{bottom:-12px;left:calc(50% - 12px);cursor:ns-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-bottomleft[_ngcontent-%COMP%]{bottom:-12px;left:-12px;cursor:nesw-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-left[_ngcontent-%COMP%]{top:calc(50% - 12px);left:-12px;cursor:ew-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar[_ngcontent-%COMP%]{position:absolute;z-index:1}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar.ngx-ic-top[_ngcontent-%COMP%]{top:-11px;left:11px;width:calc(100% - 22px);height:22px;cursor:ns-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar.ngx-ic-right[_ngcontent-%COMP%]{top:11px;right:-11px;height:calc(100% - 22px);width:22px;cursor:ew-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar.ngx-ic-bottom[_ngcontent-%COMP%]{bottom:-11px;left:11px;width:calc(100% - 22px);height:22px;cursor:ns-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar.ngx-ic-left[_ngcontent-%COMP%]{top:11px;left:-11px;height:calc(100% - 22px);width:22px;cursor:ew-resize}[_nghost-%COMP%]   .ngx-ic-cropper.ngx-ic-round[_ngcontent-%COMP%]{outline-color:transparent}[_nghost-%COMP%]   .ngx-ic-cropper.ngx-ic-round[_ngcontent-%COMP%]:after{border-radius:100%;box-shadow:0 0 0 100vw var(--cropper-outline-color, rgba(255, 255, 255, .3))}@media (orientation: portrait){[_nghost-%COMP%]   .ngx-ic-cropper.ngx-ic-round[_ngcontent-%COMP%]:after{box-shadow:0 0 0 100vh var(--cropper-outline-color, rgba(255, 255, 255, .3))}}[_nghost-%COMP%]   .ngx-ic-cropper.ngx-ic-round[_ngcontent-%COMP%]   .ngx-ic-move[_ngcontent-%COMP%]{border-radius:100%}.disabled[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize[_ngcontent-%COMP%], .disabled[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar[_ngcontent-%COMP%], .disabled[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-move[_ngcontent-%COMP%]{display:none}.ngx-ic-hidden[_nghost-%COMP%]{display:none}'],changeDetection:0}))}return s(),n})();var pt=_(5652),fe=_(4310),Xe=_(4033),Oe=_(9716),ki=_(2417);const ii=["modal"],ni=()=>({placement:"bottom-start"}),ce=()=>({placement:"bottom"}),oi=(s,n)=>({"btn-outline-warning-dark":s,"btn-warning-dark":n}),xt=()=>({placement:"bottom",hideOnClick:!1}),Se=s=>({"is-invalid":s}),qe=()=>({hideOnClick:!1});function Ke(s,n){1&s&&e.nrm(0,"app-loader",8)}function ht(s,n){1&s&&(e.j41(0,"div",53),e.EFF(1," Se non viene rispettato l'aspect ratio, l'immagine verr\xe0 tagliata per adattarsi alle dimensioni specificate! "),e.k0s())}function Mt(s,n){if(1&s){const o=e.RV6();e.j41(0,"div",6)(1,"image-cropper",7),e.nI1(2,"uploadsreplace"),e.bIt("cropperReady",function(){l.eBV(o);const i=e.XpG(3);return l.Njj(i.cropperReadyEvent())})("imageLoaded",function(i){l.eBV(o);const r=e.XpG(3);return l.Njj(r.imageLoadedEvent(i))})("imageCropped",function(i){l.eBV(o);const r=e.XpG(3);return l.Njj(r.imageCroppedEvent(i))}),e.k0s()(),e.nVh(3,Ke,1,0,"app-loader",8),e.j41(4,"div",9)(5,"div",10)(6,"button",11),e.bIt("click",function(){l.eBV(o);const i=e.XpG(3);return l.Njj(i.rotateLeft())}),e.j41(7,"div",12),e.EFF(8,"rotate_left"),e.k0s()(),e.j41(9,"button",13),e.bIt("click",function(){l.eBV(o);const i=e.XpG(3);return l.Njj(i.rotateRight())}),e.j41(10,"div",12),e.EFF(11,"rotate_right"),e.k0s()()(),e.j41(12,"div",14)(13,"button",15),e.bIt("click",function(){l.eBV(o);const i=e.XpG(3);return l.Njj(i.flipHorizontal())}),e.j41(14,"div",16),e.EFF(15," height "),e.k0s()(),e.j41(16,"button",17),e.bIt("click",function(){l.eBV(o);const i=e.XpG(3);return l.Njj(i.flipVertical())}),e.j41(17,"div",12),e.EFF(18,"height"),e.k0s()()(),e.j41(19,"div",14)(20,"button",18),e.bIt("click",function(){l.eBV(o);const i=e.XpG(3);return l.Njj(i.zoomIn())}),e.j41(21,"div",12),e.EFF(22,"zoom_in"),e.k0s()(),e.j41(23,"button",19),e.bIt("click",function(){l.eBV(o);const i=e.XpG(3);return l.Njj(i.zoomOut())}),e.j41(24,"div",12),e.EFF(25,"zoom_out"),e.k0s()()(),e.j41(26,"div",14)(27,"button",20),e.bIt("click",function(){l.eBV(o);const i=e.XpG(3);return l.Njj(i.translateUp())}),e.j41(28,"div",21),e.EFF(29," arrow_circle_up "),e.k0s()(),e.j41(30,"button",22),e.bIt("click",function(){l.eBV(o);const i=e.XpG(3);return l.Njj(i.translateDown())}),e.j41(31,"div",21),e.EFF(32," arrow_circle_down "),e.k0s()(),e.j41(33,"button",23),e.bIt("click",function(){l.eBV(o);const i=e.XpG(3);return l.Njj(i.translateLeft())}),e.j41(34,"div",21),e.EFF(35," arrow_circle_left "),e.k0s()(),e.j41(36,"button",24),e.bIt("click",function(){l.eBV(o);const i=e.XpG(3);return l.Njj(i.translateRight())}),e.j41(37,"div",21),e.EFF(38," arrow_circle_right "),e.k0s()()(),e.j41(39,"button",25,1),e.bIt("click",function(){l.eBV(o);const i=e.sdS(40);return e.XpG(3).toggleMaintainAspectRatio(),l.Njj(i.blur())}),e.j41(41,"div",26),e.EFF(42,"image_aspect_ratio"),e.k0s()(),e.j41(43,"button",27),e.bIt("click",function(){l.eBV(o);const i=e.XpG(3);return l.Njj(i.resetImage())}),e.j41(44,"div",12),e.EFF(45,"restart_alt"),e.k0s()()(),e.j41(46,"div",28)(47,"div",29)(48,"div",30)(49,"div",31)(50,"label",32),e.EFF(51,"Rotazione libera:"),e.k0s()(),e.j41(52,"input",33),e.mxI("ngModelChange",function(i){l.eBV(o);const r=e.XpG(3);return e.DH7(r.rotationInput,i)||(r.rotationInput=i),l.Njj(i)}),e.bIt("ngModelChange",function(){l.eBV(o);const i=e.XpG(3);return l.Njj(i.updateRotation())}),e.k0s()(),e.j41(53,"div",34)(54,"div",31)(55,"label",35),e.EFF(56,"Sposta "),e.j41(57,"span",36),e.EFF(58,"orizz"),e.k0s(),e.j41(59,"span",37),e.EFF(60,"orizzontalmente (px)"),e.k0s(),e.EFF(61,":"),e.k0s(),e.j41(62,"label",38),e.EFF(63,"Sposta "),e.j41(64,"span",36),e.EFF(65,"vert"),e.k0s(),e.j41(66,"span",37),e.EFF(67,"verticalmente (px)"),e.k0s(),e.EFF(68,":"),e.k0s()(),e.j41(69,"div",39)(70,"input",40),e.mxI("ngModelChange",function(i){l.eBV(o);const r=e.XpG(3);return e.DH7(r.translateH,i)||(r.translateH=i),l.Njj(i)}),e.bIt("ngModelChange",function(){l.eBV(o);const i=e.XpG(3);return l.Njj(i.updateTranslate())}),e.k0s(),e.j41(71,"input",41),e.mxI("ngModelChange",function(i){l.eBV(o);const r=e.XpG(3);return e.DH7(r.translateV,i)||(r.translateV=i),l.Njj(i)}),e.bIt("ngModelChange",function(){l.eBV(o);const i=e.XpG(3);return l.Njj(i.updateTranslate())}),e.k0s()()()()(),e.j41(72,"fieldset",42)(73,"legend",43),e.EFF(74," Modifica le dimensioni "),e.k0s(),e.j41(75,"ul",44)(76,"li",45)(77,"div",46)(78,"div",31)(79,"label",47),e.EFF(80,"Larghezza"),e.j41(81,"span",37),e.EFF(82," (px)"),e.k0s(),e.EFF(83,":"),e.k0s(),e.j41(84,"label",48),e.EFF(85,"Altezza"),e.j41(86,"span",37),e.EFF(87," (px)"),e.k0s(),e.EFF(88,":"),e.k0s()(),e.j41(89,"div",39)(90,"input",49),e.mxI("ngModelChange",function(i){l.eBV(o);const r=e.XpG(3);return e.DH7(r.imageWidth,i)||(r.imageWidth=i),l.Njj(i)}),e.bIt("ngModelChange",function(){l.eBV(o);const i=e.XpG(3);return l.Njj(i.imageWidthInputChange())}),e.k0s(),e.j41(91,"span",50),e.bIt("click",function(){l.eBV(o);const i=e.XpG(3);return l.Njj(i.keepAspectRationWhenScaling=!i.keepAspectRationWhenScaling)}),e.nrm(92,"span",51),e.k0s(),e.j41(93,"input",52),e.mxI("ngModelChange",function(i){l.eBV(o);const r=e.XpG(3);return e.DH7(r.imageHeight,i)||(r.imageHeight=i),l.Njj(i)}),e.bIt("ngModelChange",function(){l.eBV(o);const i=e.XpG(3);return l.Njj(i.imageHeightInputChange())}),e.k0s()(),e.nVh(94,ht,2,0,"div",53),e.k0s()(),e.j41(95,"li")(96,"div",54)(97,"input",55),e.mxI("ngModelChange",function(i){l.eBV(o);const r=e.XpG(3);return e.DH7(r.forceDimensionsOnSave,i)||(r.forceDimensionsOnSave=i),l.Njj(i)}),e.k0s(),e.j41(98,"label",56),e.EFF(99,"Salva l'immagine con le dimensioni specificate"),e.k0s()()()()(),e.j41(100,"div",54)(101,"input",57),e.mxI("ngModelChange",function(i){l.eBV(o);const r=e.XpG(3);return e.DH7(r.rewriteOnSave,i)||(r.rewriteOnSave=i),l.Njj(i)}),e.k0s(),e.j41(102,"label",58),e.EFF(103,"Sostituisci la vecchia immagine con quella modificata"),e.k0s()()}if(2&s){const o=e.XpG(3);e.R7$(),e.Y8G("hidden",!o.isImageLoaded)("imageURL",e.bMT(2,48,o.entity.embedUrl))("format",o.exportFormat)("aspectRatio",o.aspectRatio)("maintainAspectRatio",o.maintainAspectRatio)("canvasRotation",o.canvasRotation)("transform",o.transform),e.R7$(2),e.vxM(o.isImageLoaded?-1:3),e.R7$(3),e.Y8G("disableOnTouchDevice",!0)("tippyProps",e.lJ4(50,ni)),e.R7$(3),e.Y8G("disableOnTouchDevice",!0)("tippyProps",e.lJ4(51,ce)),e.R7$(4),e.Y8G("disableOnTouchDevice",!0)("tippyProps",e.lJ4(52,ce)),e.R7$(3),e.Y8G("disableOnTouchDevice",!0)("tippyProps",e.lJ4(53,ce)),e.R7$(4),e.Y8G("disableOnTouchDevice",!0)("tippyProps",e.lJ4(54,ce)),e.R7$(3),e.Y8G("disableOnTouchDevice",!0)("tippyProps",e.lJ4(55,ce)),e.R7$(4),e.Y8G("disableOnTouchDevice",!0)("tippyProps",e.lJ4(56,ce)),e.R7$(3),e.Y8G("disableOnTouchDevice",!0)("tippyProps",e.lJ4(57,ce)),e.R7$(3),e.Y8G("disableOnTouchDevice",!0)("tippyProps",e.lJ4(58,ce)),e.R7$(3),e.Y8G("disableOnTouchDevice",!0)("tippyProps",e.lJ4(59,ce)),e.R7$(3),e.Y8G("ngClass",e.l_i(60,oi,!o.maintainAspectRatio,o.maintainAspectRatio))("appTippy",o.maintainAspectRatio?"Trasformazione libera":"Mantieni il rapporto larghezza/altezza")("disableOnTouchDevice",!0)("tippyProps",e.lJ4(63,xt)),e.R7$(4),e.Y8G("disableOnTouchDevice",!0)("tippyProps",e.lJ4(64,ce)),e.R7$(9),e.R50("ngModel",o.rotationInput),e.R7$(18),e.R50("ngModel",o.translateH),e.R7$(),e.R50("ngModel",o.translateV),e.R7$(19),e.Y8G("ngClass",e.eq3(65,Se,o.isImageLoaded&&(!o.imageWidth||o.imageWidth<1))),e.R50("ngModel",o.imageWidth),e.R7$(),e.Y8G("appTippy",o.keepAspectRationWhenScaling?"Scala liberamente":"Mantieni l'aspect ratio")("disableOnTouchDevice",!0)("tippyProps",e.lJ4(67,qe)),e.R7$(),e.Y8G("innerText",o.keepAspectRationWhenScaling?"link":"link_off"),e.R7$(),e.Y8G("ngClass",e.eq3(68,Se,o.isImageLoaded&&(!o.imageHeight||o.imageHeight<1))),e.R50("ngModel",o.imageHeight),e.R7$(),e.vxM(o.keepAspectRationWhenScaling?-1:94),e.R7$(3),e.R50("ngModel",o.forceDimensionsOnSave),e.R7$(4),e.R50("ngModel",o.rewriteOnSave)}}function Si(s,n){if(1&s&&(e.j41(0,"div",5)(1,"strong"),e.EFF(2,"File non supportato!"),e.k0s(),e.nrm(3,"br"),e.EFF(4," Purtroppo, al momento il file che si sta cercando di modificare ha un'estensione ("),e.j41(5,"em"),e.EFF(6),e.k0s(),e.EFF(7,") non supportata. Se lo si desidera, \xe8 possibile provare a convertire in autonomia il file in formato "),e.j41(8,"em"),e.EFF(9,".jpg"),e.k0s(),e.EFF(10," o "),e.j41(11,"em"),e.EFF(12,".png"),e.k0s(),e.EFF(13," e riprovare in seguito. "),e.k0s()),2&s){const o=e.XpG(3);e.R7$(6),e.SpI(".",o.entity.ext)}}function Pi(s,n){if(1&s&&e.nVh(0,Mt,104,70)(1,Si,14,1,"div",5),2&s){const o=e.XpG(2);e.vxM(o.canImageBeCropped?0:1)}}function mt(s,n){if(1&s&&e.nVh(0,Pi,2,1),2&s){const o=e.XpG();e.vxM(o.entity?0:-1)}}function ae(s,n){if(1&s){const o=e.RV6();e.j41(0,"button",59),e.bIt("click",function(){l.eBV(o),e.XpG(2);const i=e.sdS(1);return l.Njj(i.close("Close click"))}),e.EFF(1," Annulla "),e.k0s(),e.j41(2,"button",60),e.bIt("click",function(){l.eBV(o);const i=e.XpG(2);return l.Njj(i.save())}),e.EFF(3," Salva "),e.k0s()}if(2&s){const o=e.XpG(2);e.R7$(2),e.Y8G("disabled",!o.isCropperReady||!o.canImageBeCropped||!o.croppedImageBlob)}}function $e(s,n){if(1&s&&e.nVh(0,ae,4,1),2&s){const o=e.XpG();e.vxM(o.entity?0:-1)}}let Pe=(()=>{var s;class n{constructor(t,i){this.uploaderService=t,this.uploadObservablesService=i,this.canImageBeCropped=!1,this.isCropperReady=!1,this.isImageLoaded=!1,this.rewriteOnSave=!1,this.imageWidth=0,this.imageHeight=0,this.keepAspectRationWhenScaling=!0,this.forceDimensionsOnSave=!1,this.exportFormat="jpeg",this.aspectRatio=4/3,this.maintainAspectRatio=!1,this.canvasRotation=0,this.transform={translateUnit:"px"},this.rotationInput=0,this.translateH=0,this.translateV=0,this.scale=1,this.translateHStep=0,this.translateVStep=0}ngOnChanges(t){t.entity&&!t.entity.firstChange&&this.entity&&(this.canImageBeCropped=(0,j.GR)(this.entity.ext),this.exportFormat=["png","apng"].includes(this.entity.ext)?"png":"webp"===this.entity.ext?"webp":"jpeg")}open(){return this.modalComponent.open()}resetOnHidden(){this.isImageLoaded=!1,this.isCropperReady=!1,this.resetImage(),this.maintainAspectRatio=!1,this.croppedImageBlob=void 0,this.keepAspectRationWhenScaling=!0,this.forceDimensionsOnSave=!1,this.imageHeight=0,this.imageWidth=0,this.rewriteOnSave=!1}save(){if(!(this.isCropperReady&&this.canImageBeCropped&&this.croppedImageBlob&&this.entity))return;this.modalComponent.close();const t={compress:this.uploaderService.uploaderOptions.compress,allowOverwrite:this.rewriteOnSave,openLinkModalAfterUpload:!1};this.forceDimensionsOnSave&&this.imageWidth>0&&this.imageHeight>0&&(t.compress=!0,t.imageDimensions={width:this.imageWidth,height:this.imageHeight}),this.uploadObservablesService.pushStartUpload({file:new File([this.croppedImageBlob],this.entity.name,{type:this.croppedImageBlob.type,lastModified:Date.now()}),options:t})}cropperReadyEvent(){this.isCropperReady=!0}imageLoadedEvent(t){this.imageWidth=t.original.size.width,this.imageHeight=t.original.size.height,this.translateHStep=Math.round(this.imageWidth/100),this.translateVStep=Math.round(this.imageHeight/100),this.aspectRatio=this.imageWidth/this.imageHeight,this.isImageLoaded=!0}imageCroppedEvent(t){this.croppedImageBlob=t.blob||void 0,this.imageWidth=t.width,this.imageHeight=t.height}imageWidthInputChange(){this.forceDimensionsOnSave=!0,this.keepAspectRationWhenScaling&&(this.imageHeight=Math.round(this.imageWidth/this.aspectRatio))}imageHeightInputChange(){this.forceDimensionsOnSave=!0,this.keepAspectRationWhenScaling&&(this.imageWidth=Math.round(this.imageHeight*this.aspectRatio))}rotateLeft(){this.canvasRotation--,this.flipAfterRotate()}rotateRight(){this.canvasRotation++,this.flipAfterRotate()}flipAfterRotate(){this.transform={...this.transform,flipH:this.transform.flipV,flipV:this.transform.flipH}}updateRotation(){this.transform={...this.transform,rotate:this.rotationInput}}updateTranslate(){this.transform={...this.transform,translateV:this.translateV,translateH:this.translateH}}flipHorizontal(){this.transform={...this.transform,flipH:!this.transform.flipH}}flipVertical(){this.transform={...this.transform,flipV:!this.transform.flipV}}zoomOut(){this.scale-=.1,this.transform={...this.transform,scale:this.scale}}zoomIn(){this.scale+=.1,this.transform={...this.transform,scale:this.scale}}toggleMaintainAspectRatio(){this.maintainAspectRatio=!this.maintainAspectRatio}translateRight(){this.translateH+=this.translateHStep,this.transform={...this.transform,translateH:this.translateH}}translateLeft(){this.translateH+=-this.translateHStep,this.transform={...this.transform,translateH:this.translateH}}translateUp(){this.translateV+=-this.translateVStep,this.transform={...this.transform,translateV:this.translateV}}translateDown(){this.translateV+=this.translateVStep,this.transform={...this.transform,translateV:this.translateV}}resetImage(){this.scale=1,this.translateH=0,this.translateV=0,this.rotationInput=0,this.canvasRotation=0,this.transform={translateUnit:"px"}}static#e=s=()=>(this.\u0275fac=function(i){return new(i||n)(e.rXU(Wt.U),e.rXU(ie.f))},this.\u0275cmp=e.VBU({type:n,selectors:[["app-upload-crop-modal"]],viewQuery:function(i,r){if(1&i&&e.GBs(ii,5),2&i){let a;e.mGM(a=e.lsd())&&(r.modalComponent=a.first)}},inputs:{entity:"entity"},standalone:!1,features:[e.OA$],decls:4,vars:2,consts:[["modal",""],["aspectBtn",""],["size","xl",3,"hidden","title","disableCloseButton"],["appModalBody",""],["appModalFooter",""],[1,"alert","alert-primary","text-center"],[1,"image-cropper-container"],["alignImage","center",3,"cropperReady","imageLoaded","imageCropped","hidden","imageURL","format","aspectRatio","maintainAspectRatio","canvasRotation","transform"],["message","Caricamento del tool in corso"],[1,"image-cropper-utilities","d-flex","flex-wrap","align-items-center","py-1","mt-2","mb-1"],[1,"btn-group","my-2","me-3"],["appTippy","Ruota in senso antiorario",1,"btn","btn-outline-indigo","shadow-none",3,"click","disableOnTouchDevice","tippyProps"],[1,"d-block","material-icons"],["appTippy","Ruota in senso orario",1,"btn","btn-outline-indigo","shadow-none",3,"click","disableOnTouchDevice","tippyProps"],[1,"btn-group","me-3","my-2"],["appTippy","Rifletti orizzontalmente",1,"btn","btn-outline-primary","shadow-none",3,"click","disableOnTouchDevice","tippyProps"],[1,"d-block","material-icons","rotate-z90"],["appTippy","Rifletti verticalmente",1,"btn","btn-outline-primary","shadow-none",3,"click","disableOnTouchDevice","tippyProps"],["appTippy","Zoom in",1,"btn","btn-outline-success","shadow-none",3,"click","disableOnTouchDevice","tippyProps"],["appTippy","Zoom out",1,"btn","btn-outline-success","shadow-none",3,"click","disableOnTouchDevice","tippyProps"],["appTippy","Sposta in alto",1,"btn","btn-outline-secondary","shadow-none",3,"click","disableOnTouchDevice","tippyProps"],[1,"d-block","material-icons-outlined"],["appTippy","Sposta in basso",1,"btn","btn-outline-secondary","shadow-none",3,"click","disableOnTouchDevice","tippyProps"],["appTippy","Sposta a sinistra",1,"btn","btn-outline-secondary","shadow-none",3,"click","disableOnTouchDevice","tippyProps"],["appTippy","Sposta a destra",1,"btn","btn-outline-secondary","shadow-none",3,"click","disableOnTouchDevice","tippyProps"],[1,"btn","shadow-none","my-2","me-3",3,"click","ngClass","appTippy","disableOnTouchDevice","tippyProps"],[1,"material-icons","d-block"],["appTippy","Ripristina",1,"ms-lg-auto","my-2","btn","btn-danger","shadow-none",3,"click","disableOnTouchDevice","tippyProps"],[1,"container","mb-3"],[1,"row"],[1,"col","col-12","col-lg-4","px-0","pe-lg-2","mb-2","mb-lg-0"],[1,"d-flex"],["for","free-rotation",1,"fs-sm","ps-1"],["type","number","id","free-rotation",1,"form-control",3,"ngModelChange","ngModel"],[1,"col","col-12","col-lg-8","px-0","ps-lg-2","mb-2","mb-lg-0","free-translate-input-group"],["for","free-translate-h",1,"fs-sm","ps-1"],[1,"d-sm-none"],[1,"d-none","d-sm-inline"],["for","free-translate-v",1,"fs-sm","ps-1"],[1,"input-group"],["type","number","id","free-translate-h",1,"form-control",3,"ngModelChange","ngModel"],["type","number","id","free-translate-v",1,"form-control",3,"ngModelChange","ngModel"],[1,"px-3","pb-3","pt-2","rounded","mb-3","mb-1","border-dashed","border-light-gray"],[1,"legend-reset","fs-reset","px-2","mb-0"],[1,"list-unstyled","mb-0"],[1,"mb-3"],[1,"free-dimensions-input-group"],["for","free-width",1,"fs-sm","ps-1"],["for","free-height",1,"fs-sm","ps-1"],["type","number","id","free-width","min","1",1,"form-control",3,"ngModelChange","ngClass","ngModel"],[1,"input-group-text","cursor-pointer",3,"click","appTippy","disableOnTouchDevice","tippyProps"],[1,"material-icons",3,"innerText"],["type","number","id","free-height","min","1",1,"form-control",3,"ngModelChange","ngClass","ngModel"],[1,"small","px-1"],[1,"form-check","form-switch"],["type","checkbox","role","switch","id","force-resize",1,"form-check-input",3,"ngModelChange","ngModel"],["for","force-resize",1,"form-check-label","me-auto"],["type","checkbox","role","switch","id","allow-rewrite",1,"form-check-input",3,"ngModelChange","ngModel"],["for","allow-rewrite",1,"form-check-label","me-auto"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"click","disabled"]],template:function(i,r){if(1&i){const a=e.RV6();e.j41(0,"app-modal",2,0),e.bIt("hidden",function(){return l.eBV(a),l.Njj(r.resetOnHidden())}),e.DNE(2,mt,1,1,"ng-template",3)(3,$e,1,1,"ng-template",4),e.k0s()}2&i&&e.Y8G("title","Modifica <em>"+(null==r.entity?null:r.entity.name)+"</em>")("disableCloseButton",!0)},dependencies:[v.YU,x.me,x.Q0,x.Zm,x.BC,x.VZ,x.vS,ti,pt.V,Z.z,fe.d,Xe.I,Oe.e,ki.T],styles:[".rotate-z90[_ngcontent-%COMP%]{transform:rotate(90deg)}.rotate-group[_ngcontent-%COMP%]{width:100%}.free-translate-input-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], .free-dimensions-input-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{flex:1 1 1px}.free-dimensions-input-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:nth-of-type(2){margin-left:calc(24px + 1.5rem)}@media (min-width: 992px){.rotate-group[_ngcontent-%COMP%]{width:initial}.rotate-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{max-width:100px}}"]}))}return s(),n})();var $=_(7515),de=_(8488),H=_(6485);const Te=["modal"];function si(s,n){if(1&s&&(e.j41(0,"div",4)(1,"a",6),e.nrm(2,"img",7),e.k0s()()),2&s){const o=e.XpG(4);e.R7$(),e.Y8G("href",o.entities[0].url,e.B4B),e.R7$(),e.Y8G("src",o.entities[0].embedUrl,e.B4B)("alt",o.entities[0].name)}}function ri(s,n){1&s&&(e.EFF(0," La cancellazione della cartella comporta anche la "),e.j41(1,"strong"),e.EFF(2,"cancellazione di tutto il suo contenuto!"),e.k0s(),e.EFF(3," Si consiglia di procedere solo se si \xe8 sicuro di voler rimuovere definitivamente la cartella. "))}function ut(s,n){if(1&s&&(e.nVh(0,si,3,3,"div",4),e.j41(1,"div",5),e.EFF(2," La cancellazione di "),e.j41(3,"em"),e.EFF(4),e.k0s(),e.EFF(5," \xe8 "),e.j41(6,"strong"),e.EFF(7,"definitiva"),e.k0s(),e.EFF(8,", senza possibilit\xe0 di ripristino. "),e.k0s(),e.j41(9,"p"),e.EFF(10," Il suo link non sar\xe0 pi\xf9 funzionante e, di conseguenza, i siti su cui \xe8 stato condiviso non riusciranno pi\xf9 a visualizzarlo. "),e.nVh(11,ri,4,0),e.k0s()),2&s){const o=e.XpG(3);e.vxM(o.entities[0].isImage?0:-1),e.R7$(4),e.JRh(o.entities[0].name),e.R7$(7),e.vxM(o.entities[0].type===o.entityTypes.FOLDER?11:-1)}}function pe(s,n){if(1&s&&(e.j41(0,"div",5),e.EFF(1," Saranno cancellati "),e.j41(2,"strong"),e.EFF(3,"definitivamente"),e.k0s(),e.EFF(4),e.k0s(),e.j41(5,"p"),e.EFF(6," Tutti i file selezionati non saranno pi\xf9 accessibili, pertanto eventuali link condivisi non saranno pi\xf9 funzionanti. L'operazione potrebbe richiedere diverso tempo. "),e.k0s()),2&s){const o=e.XpG(3);e.R7$(4),e.SpI(" i ",o.entities.length," file selezionati! ")}}function _t(s,n){if(1&s&&e.nVh(0,ut,12,3)(1,pe,7,1),2&s){const o=e.XpG(2);e.vxM(1===o.entities.length?0:1)}}function Tt(s,n){if(1&s&&e.nVh(0,_t,2,1),2&s){const o=e.XpG();e.vxM(o.opened&&o.entities[0]?0:-1)}}function kt(s,n){if(1&s){const o=e.RV6();e.qex(0,8),e.j41(1,"button",9),e.bIt("click",function(){l.eBV(o),e.XpG(2);const i=e.sdS(1);return l.Njj(i.close("Close click"))}),e.EFF(2," Annulla "),e.k0s(),e.j41(3,"button",10),e.bIt("click",function(){l.eBV(o);const i=e.XpG(2);return l.Njj(i.deleteEntity())}),e.EFF(4," Elimina! "),e.k0s(),e.bVm()}}function St(s,n){if(1&s&&e.nVh(0,kt,5,0,"ng-container",8),2&s){const o=e.XpG();e.vxM(o.opened&&o.entities[0]?0:-1)}}let Pt=(()=>{var s;class n{constructor(t,i){this.toastService=t,this.uploadService=i,this.currentFolderPath=[],this.entities=[],this.deleteStartEvent=new e.bkB,this.deleteEndEvent=new e.bkB,this.opened=!1,this.entityTypes=C.OE,this.modalTitle=""}ngOnChanges(t){t.entities&&!t.entities.firstChange&&(this.modalTitle=this.entities.length>1?`Rimuovi ${this.entities.length} file`:1===this.entities.length?`Rimuovi <em>${this.entities[0]?.name||""}</em>`:"Rimuovi 0 file")}open(){return this.opened=!0,this.modalComponent.open()}onHidden(){this.opened=!1}deleteEntity(){var t=this;return(0,S.A)(function*(){if(!t.opened||!t.entities[0])return;const i=[...t.currentFolderPath];t.modalComponent.close(),t.deleteStartEvent.emit({destPath:i,list:t.entities});let r=!1;for(const a of t.entities)if(r=yield t.uploadService.deleteEntity(i,a.name),!r)break;if(t.deleteEndEvent.emit(),r)if(1===t.entities.length){const a=t.entities[0];t.toastService.show({content:"La rimozione "+(a.type===C.OE.FILE?"del file":"della cartella")+` <strong>${a.name}</strong> \xe8 avvenuta con successo!`})}else t.toastService.show({content:`<strong>${t.entities.length} file</strong> eliminati con successo!`});else t.toastService.show({content:"Errore nella rimozione!",level:$.A.ERROR})})()}static#e=s=()=>(this.\u0275fac=function(i){return new(i||n)(e.rXU(de.f),e.rXU(H.B))},this.\u0275cmp=e.VBU({type:n,selectors:[["app-upload-delete-modal"]],viewQuery:function(i,r){if(1&i&&e.GBs(Te,5),2&i){let a;e.mGM(a=e.lsd())&&(r.modalComponent=a.first)}},inputs:{currentFolderPath:"currentFolderPath",entities:"entities"},outputs:{deleteStartEvent:"deleteStartEvent",deleteEndEvent:"deleteEndEvent"},standalone:!1,features:[e.OA$],decls:4,vars:2,consts:[["modal",""],[3,"hidden","title","disableCloseButton"],["appModalBody",""],["appModalFooter",""],[1,"preview","py-1","text-center","mb-3"],[1,"alert","alert-danger","text-center"],["target","_blank","rel","noreferrer",1,"d-inline-block","mw-100",3,"href"],[1,"d-inline-block","mw-100",3,"src","alt"],["footer",""],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-danger",3,"click"]],template:function(i,r){if(1&i){const a=e.RV6();e.j41(0,"app-modal",1,0),e.bIt("hidden",function(){return l.eBV(a),l.Njj(r.onHidden())}),e.DNE(2,Tt,1,1,"ng-template",2)(3,St,1,1,"ng-template",3),e.k0s()}2&i&&e.Y8G("title",r.modalTitle)("disableCloseButton",!0)},dependencies:[Z.z,fe.d,Xe.I],styles:[".preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:200px}"]}))}return s(),n})();var I=_(9986),Ie=_(7948),ai=_(9291);const li=["modal"],Rt=s=>({$implicit:s,description:"Url de"}),wt=s=>({$implicit:s,description:"Link a"}),ci=s=>({$implicit:s,description:"Tag de"});function Ri(s,n){if(1&s&&(e.j41(0,"div",4)(1,"a",10),e.nrm(2,"img",11),e.k0s()()),2&s){const o=e.XpG(3);e.R7$(),e.Y8G("href",o.entities[0].url,e.B4B),e.R7$(),e.Y8G("src",o.entities[0].embedUrl,e.B4B)("alt",o.entities[0].name)}}function c(s,n){1&s&&e.eu8(0)}function d(s,n){1&s&&e.eu8(0)}function h(s,n){if(1&s&&(e.j41(0,"li"),e.DNE(1,d,1,0,"ng-container",5),e.k0s()),2&s){const o=e.XpG(3),t=e.sdS(4);e.R7$(),e.Y8G("ngTemplateOutlet",t)("ngTemplateOutletContext",e.eq3(2,ci,o.html.tag))}}function u(s,n){1&s&&e.eu8(0)}function g(s,n){1&s&&e.eu8(0)}function b(s,n){if(1&s&&(e.j41(0,"li"),e.DNE(1,g,1,0,"ng-container",5),e.k0s()),2&s){const o=e.XpG(3),t=e.sdS(4);e.R7$(),e.Y8G("ngTemplateOutlet",t)("ngTemplateOutletContext",e.eq3(2,ci,o.bbcode.tag))}}function M(s,n){1&s&&e.eu8(0)}function A(s,n){if(1&s&&(e.nVh(0,Ri,3,3,"div",4),e.j41(1,"div"),e.DNE(2,c,1,0,"ng-container",5),e.k0s(),e.j41(3,"fieldset",6)(4,"legend",7),e.EFF(5,"HTML"),e.k0s(),e.j41(6,"ul",8),e.nVh(7,h,2,4,"li"),e.j41(8,"li"),e.DNE(9,u,1,0,"ng-container",5),e.k0s()()(),e.j41(10,"fieldset",9)(11,"legend",7),e.EFF(12,"BBCODE"),e.k0s(),e.j41(13,"ul",8),e.nVh(14,b,2,4,"li"),e.j41(15,"li"),e.DNE(16,M,1,0,"ng-container",5),e.k0s()()()),2&s){const o=e.XpG(2),t=e.sdS(4);e.vxM(1===o.entities.length&&o.entities[0].isImage?0:-1),e.R7$(2),e.Y8G("ngTemplateOutlet",t)("ngTemplateOutletContext",e.eq3(9,Rt,o.urls)),e.R7$(5),e.vxM(o.html.tag.length?7:-1),e.R7$(2),e.Y8G("ngTemplateOutlet",t)("ngTemplateOutletContext",e.eq3(11,wt,o.html.link)),e.R7$(5),e.vxM(o.bbcode.tag.length?14:-1),e.R7$(2),e.Y8G("ngTemplateOutlet",t)("ngTemplateOutletContext",e.eq3(13,wt,o.bbcode.link))}}function z(s,n){if(1&s&&e.nVh(0,A,17,15),2&s){const o=e.XpG();e.vxM(o.entities.length?0:-1)}}function Y(s,n){if(1&s&&(e.j41(0,"div",12),e.EFF(1),e.k0s(),e.nrm(2,"app-custom-pre",13),e.nI1(3,"arrayJoin")),2&s){const o=n.$implicit,t=n.description;e.R7$(),e.Lme(" ",t,"",o.length>1?"gli elementi":"ll'elemento",": "),e.R7$(),e.Y8G("content",e.i5U(3,3,o,"\n"))}}let ve=(()=>{var s;class n{constructor(){this.entities=[],this.touchDevice=I.CN,this.modalTitle="",this.urls=[],this.html={tag:[],link:[]},this.bbcode={tag:[],link:[]},this.opened=!1}ngOnChanges(t){if(this.opened&&t.entities&&!t.entities.firstChange){this.modalTitle=1!==this.entities.length?"Codici delle immagini":`Codici di <em>${this.entities[0]?.name||""}</em>`,this.urls=[],this.html={tag:[],link:[]},this.bbcode={tag:[],link:[]};for(const i of this.entities)this.urls.push(i.url),this.html.link.push(`<a href="${i.url}" target="_blank">${i.name}</a>`),this.bbcode.link.push(`[URL=${i.url}]${i.name}[/URL]`),i.isImage&&(this.html.tag.push(`<img src="${i.url}" alt="${i.name}">`),this.bbcode.tag.push(`[IMG]${i.url}[/IMG]`))}}open(){return this.opened=!0,this.modalComponent.open()}onHidden(){this.opened=!1}static#e=s=()=>(this.\u0275fac=function(i){return new(i||n)},this.\u0275cmp=e.VBU({type:n,selectors:[["app-upload-file-links-modal"]],viewQuery:function(i,r){if(1&i&&e.GBs(li,5),2&i){let a;e.mGM(a=e.lsd())&&(r.modalComponent=a.first)}},inputs:{entities:"entities"},standalone:!1,features:[e.OA$],decls:5,vars:1,consts:[["modal",""],["linkInput",""],[3,"hidden","title"],["appModalBody",""],[1,"preview","py-1","text-center","mb-2"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"px-3","pb-3","pt-1","rounded","mt-3","border-dashed","border-light-gray"],[1,"legend-reset","fs-reset","px-2","mb-0"],[1,"list-unstyled","mb-0"],[1,"px-3","pb-3","pt-1","rounded","mt-3","mb-1","border-dashed","border-light-gray"],["target","_blank","rel","noreferrer",1,"d-inline-block","mw-100",3,"href"],[1,"d-inline-block","mw-100",3,"src","alt"],[1,"fs-sm","d-inline-block"],[3,"content"]],template:function(i,r){if(1&i){const a=e.RV6();e.j41(0,"app-modal",2,0),e.bIt("hidden",function(){return l.eBV(a),l.Njj(r.onHidden())}),e.DNE(2,z,1,1,"ng-template",3),e.k0s(),e.DNE(3,Y,4,6,"ng-template",null,1,e.C5r)}2&i&&e.Y8G("title",r.modalTitle)},dependencies:[v.T3,Ie.S,Z.z,fe.d,ai.I],styles:[".preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:200px}fieldset[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]:not(:first-of-type){margin-top:.75rem}"]}))}return s(),n})();const Wn=["modal"],Qn=s=>({"mt-2":s}),qn=(s,n,o)=>({loading:s,"has-error":n,"touch-device":o}),wi=s=>({$implicit:s}),Kn=s=>({placement:"top",hideOnClick:s}),Zn=(s,n)=>({selected:s,"ps-2":n}),Jn=s=>({"is-expanded":s}),eo=()=>[5,10],to=s=>({placement:"top-end",offset:s});function io(s,n){1&s&&(e.j41(0,"p",7),e.EFF(1," \xc8 possibile spostare pi\xf9 file contemporaneamente in una stessa destinazione. Occorre sottolineare che, a seguito dello spostamento, tutti i "),e.j41(2,"strong"),e.EFF(3,"link dei file saranno modificati"),e.k0s(),e.EFF(4," e, pertanto, i vacchi indirizzi non risulteranno pi\xf9 funzionanti. L'operazione potrebbe richiedere diverso tempo. "),e.k0s())}function no(s,n){1&s&&(e.j41(0,"p",7),e.EFF(1," \xc8 possibile spostare un file nella cartella base ("),e.j41(2,"em"),e.EFF(3,"root"),e.k0s(),e.EFF(4,"), in quella di livello superiore, se esistente, oppure in una sottocartella presente nella cartella corrente. Spostanto un file, verr\xe0 "),e.j41(5,"strong"),e.EFF(6,"modificato anche il suo link"),e.k0s(),e.EFF(7,", pertanto eventuali link gi\xe0 condivisi andranno aggiornati. "),e.k0s())}function oo(s,n){1&s&&(e.j41(0,"p",7),e.EFF(1," \xc8 possibile spostare un'intera cartella e "),e.j41(2,"strong"),e.EFF(3,"tutto il suo contenuto"),e.k0s(),e.EFF(4," nella cartella base ("),e.j41(5,"em"),e.EFF(6,"root"),e.k0s(),e.EFF(7,"), in quella di livello superiore, se esistente, oppure in una sottocartella presente nella cartella corrente. Occorre evidenziare che, spostando una cartella, i "),e.j41(8,"strong"),e.EFF(9,"link di tutti gli elementi"),e.k0s(),e.EFF(10," in essa contenuti saranno "),e.j41(11,"strong"),e.EFF(12,"modificati"),e.k0s(),e.EFF(13," e, pertanto, se gi\xe0 condivisi andranno aggiornati. "),e.k0s())}function so(s,n){if(1&s&&e.nVh(0,no,8,0,"p",7)(1,oo,14,0,"p",7),2&s){const o=e.XpG(3);e.vxM(o.entities[0].type===o.entityTypes.FILE?0:1)}}function ro(s,n){1&s&&e.eu8(0)}function ao(s,n){if(1&s&&(e.j41(0,"div",9),e.DNE(1,ro,1,0,"ng-container",13),e.k0s()),2&s){const o=e.XpG(3),t=e.sdS(5);e.R7$(),e.Y8G("ngTemplateOutlet",t)("ngTemplateOutletContext",e.eq3(2,wi,o.newLink?o.newLink:o.entities[0].url))}}function lo(s,n){1&s&&e.eu8(0)}function co(s,n){if(1&s&&(e.nVh(0,io,5,0,"p",7)(1,so,2,1),e.j41(2,"p")(3,"em"),e.EFF(4,"Tip:"),e.k0s(),e.EFF(5," cliccando sulla "),e.j41(6,"strong"),e.EFF(7,"freccia blu"),e.k0s(),e.EFF(8," accanto al nome della cartella \xe8 possibile navigare nelle eventuali sottocartelle. Se non \xe8 presente alcun simbolo accanto al nome di una cartella, quest'ultima non ha sottocartelle. "),e.k0s(),e.j41(9,"div",8),e.nVh(10,ao,2,4,"div",9),e.j41(11,"fieldset",10)(12,"legend",11),e.EFF(13," Cartella di destinazione: "),e.k0s(),e.j41(14,"ul",12),e.DNE(15,lo,1,0,"ng-container",13),e.k0s()()()),2&s){const o=e.XpG(2),t=e.sdS(7);e.vxM(o.entities.length>1?0:1),e.R7$(10),e.vxM(1===o.entities.length?10:-1),e.R7$(),e.Y8G("ngClass",e.eq3(6,Qn,o.entities.length>1)),e.R7$(3),e.Y8G("ngClass",e.sMw(8,qn,o.loading,!o.isValid,o.touchDevice)),e.R7$(),e.Y8G("ngTemplateOutlet",t)("ngTemplateOutletContext",e.eq3(12,wi,o.folders[0]))}}function po(s,n){if(1&s&&e.nVh(0,co,16,14),2&s){const o=e.XpG();e.vxM(o.entities[0]?0:-1)}}function ho(s,n){if(1&s){const o=e.RV6();e.qex(0,14),e.j41(1,"button",15),e.bIt("click",function(){l.eBV(o),e.XpG(2);const i=e.sdS(1);return l.Njj(i.close("Close click"))}),e.EFF(2," Annulla "),e.k0s(),e.j41(3,"button",16),e.bIt("click",function(){l.eBV(o);const i=e.XpG(2);return l.Njj(i.move())}),e.EFF(4," Sposta "),e.k0s(),e.bVm()}if(2&s){const o=e.XpG(2);e.R7$(3),e.Y8G("disabled",!o.isValid)}}function mo(s,n){if(1&s&&e.nVh(0,ho,5,1,"ng-container",14),2&s){const o=e.XpG();e.vxM(o.entities.length?0:-1)}}function uo(s,n){if(1&s){const o=e.RV6();e.j41(0,"label",17),e.EFF(1,"Anteprima nuovo link:"),e.k0s(),e.j41(2,"div",18),e.nrm(3,"input",19),e.j41(4,"div",20,3),e.bIt("click",function(){l.eBV(o);const i=e.sdS(5),r=e.XpG();return l.Njj(!r.touchDevice&&i.changeContent("Copiato!","Copia"))}),e.j41(6,"span",21),e.EFF(7,"content_copy"),e.k0s()()()}if(2&s){const o=n.$implicit,t=e.XpG();e.R7$(3),e.Y8G("value",o),e.R7$(),e.Y8G("cdkCopyToClipboard",o)("appTippy",t.touchDevice?"Copiato!":"Copia")("tippyProps",e.eq3(4,Kn,t.touchDevice))}}function _o(s,n){1&s&&(e.j41(0,"div",23)(1,"div",27)(2,"span",28),e.EFF(3,"Loading..."),e.k0s()()())}function go(s,n){if(1&s){const o=e.RV6();e.j41(0,"a",30),e.bIt("click",function(){l.eBV(o);const i=e.XpG(2).$implicit,r=e.XpG();return l.Njj(r.getSubfolders(i))}),e.j41(1,"div",31),e.EFF(2," chevron_right "),e.k0s()()}if(2&s){const o=e.XpG(2).$implicit;e.Y8G("ngClass",e.eq3(1,Jn,!o.collapsed))}}function fo(s,n){if(1&s&&e.nVh(0,go,3,3,"a",29),2&s){const o=e.XpG().$implicit;e.vxM(!o.checked||o.subfolders.length?0:-1)}}function vo(s,n){if(1&s&&(e.j41(0,"div",25)(1,"div",32),e.EFF(2,"info"),e.k0s()()),2&s){const o=e.XpG(2);e.Y8G("appTippy",o.errorMessage)("tippyProps",e.eq3(3,to,e.lJ4(2,eo)))}}function Co(s,n){1&s&&e.eu8(0)}function bo(s,n){if(1&s&&e.DNE(0,Co,1,0,"ng-container",13),2&s){const o=n.$implicit;e.XpG(3);const t=e.sdS(7);e.Y8G("ngTemplateOutlet",t)("ngTemplateOutletContext",e.eq3(2,wi,o))}}function Eo(s,n){if(1&s){const o=e.RV6();e.j41(0,"ul",33),e.mxI("ngbCollapseChange",function(i){l.eBV(o);const r=e.XpG().$implicit;return e.DH7(r.collapsed,i)||(r.collapsed=i),l.Njj(i)}),e.Z7z(1,bo,1,4,"ng-container",null,e.fX1),e.k0s()}if(2&s){const o=e.XpG().$implicit;e.R50("ngbCollapse",o.collapsed),e.R7$(),e.Dyx(o.subfolders)}}function Fo(s,n){if(1&s){const o=e.RV6();e.j41(0,"li")(1,"div",22),e.nVh(2,_o,4,0,"div",23)(3,fo,1,1),e.j41(4,"div",24),e.bIt("click",function(){const i=l.eBV(o).$implicit,r=e.XpG();return l.Njj(r.setSelectedPath(i,i.collapsed))}),e.k0s(),e.nVh(5,vo,3,5,"div",25),e.k0s(),e.nVh(6,Eo,3,1,"ul",26),e.k0s()}if(2&s){const o=n.$implicit,t=e.XpG();e.R7$(),e.Y8G("ngClass",e.l_i(5,Zn,t.selectedPathAsString===o.pathString,!o.loading&&o.checked&&0===o.subfolders.length)),e.R7$(),e.vxM(o.loading?2:3),e.R7$(2),e.Y8G("innerHTML",o.name,e.npT),e.R7$(),e.vxM(t.isValid||t.selectedPathAsString!==o.pathString?-1:5),e.R7$(),e.vxM(o.subfolders.length>0?6:-1)}}let yo=(()=>{var s;class n{constructor(t,i,r){this.uploadService=t,this.toastService=i,this.uploadObservablesService=r,this.currentFolderPath=[],this.entities=[],this.moveEvent=new e.bkB,this.deleteBeforeMovingEvent=new e.bkB,this.touchDevice=I.CN,this.entityTypes=C.OE,this.modalTitle="",this.newLink="",this.isValid=!1,this.loading=!1,this.currentFolderPathAsString="",this.errorMessage="",this.folders=[],this.newFolderPath=[],this.basepath="",this.opened=!1}ngOnInit(){this.currentFolderPathAsString=this.currentFolderPath.join("/"),this.setRootFolder(),this.startExternalMoveSubscription=this.uploadObservablesService.startMoveObservable.subscribe(t=>{this.sendMoveRequest(t.destPath,t.originPath,t.entities)})}ngOnChanges(t){if(t.entities&&!t.entities.firstChange){this.modalTitle=this.entities.length>1?`Sposta ${this.entities.length} file`:1===this.entities.length?`Sposta <em>${this.entities[0]?.name||""}</em>`:"Sposta 0 file";const i=this.entities[0].url.match(/^(https:\/\/[^/]*\/i\/[^/]*)/);i&&(this.basepath=`${i[0]}/`)}t.currentFolderPath&&!t.currentFolderPath.firstChange&&(this.currentFolderPathAsString=this.currentFolderPath.join("/"))}open(){return this.opened=!0,this.reset(),this.modalComponent.open()}onHidden(){this.opened=!1}reset(){this.selectedPathAsString=void 0,this.newLink="",this.newFolderPath=[],this.isValid=!1,this.setRootFolder()}setRootFolder(){this.folders=[{name:"Cartella base (root)",paths:[],pathString:"",checked:!1,loading:!1,collapsed:!0,subfolders:[]}]}move(){var t=this;return(0,S.A)(function*(){if(!t.opened||!t.isValid||!t.entities[0])return;const i=[...t.newFolderPath],r=[...t.currentFolderPath],a=[...t.entities];t.modalComponent.close(),t.sendMoveRequest(i,r,a)})()}sendMoveRequest(t,i,r){var a=this;return(0,S.A)(function*(){a.deleteBeforeMovingEvent.emit({destPath:i,list:r});const p=1===r.length?(r[0].type===C.OE.FILE?`File <strong>${r[0].name}</strong> spostato`:`Cartella <strong>${r[0].name}</strong> spostata`)+" con successo!":`<strong>${r.length} elementi</strong> spostati con successo!`,f=[];for(let F=0;F<r.length;F+=5){const P=r.slice(F,F+5),R=yield Promise.all(P.map(D=>a.uploadService.moveRenameEntity(i,t,D.name)));f.push(...R.map((D,X)=>({data:D,type:P[X].type})))}a.moveEvent.emit({list:r,destPath:t,originPath:i,results:f}),a.toastService.show({content:p})})()}getSubfolders(t){var i=this;return(0,S.A)(function*(){if(i.loading)return;if(t.checked){if(0===t.subfolders.length)return;return t.collapsed||i.closeSubfoldersCollapseElements(t),void(t.collapsed=!t.collapsed)}i.loading=t.loading=!0;const r=yield i.uploadService.getFileList(t.paths);r.folders.length&&(t.subfolders=r.folders.map(a=>{const p=[...t.paths,a.name];return{name:a.name,paths:p,pathString:p.join("/"),checked:!1,loading:!1,collapsed:!0,subfolders:[]}}).sort((a,p)=>a.name.localeCompare(p.name))),t.checked=!0,setTimeout(()=>{t.subfolders.length>0&&(t.collapsed=!t.collapsed),i.loading=t.loading=!1},200)})()}setSelectedPath(t,i=!1){if(i&&this.getSubfolders(t).then(),this.selectedPathAsString=t.paths.join("/"),this.selectedPathAsString===this.currentFolderPathAsString)return this.isValid=!1,this.newLink="",void(this.errorMessage="La cartella di origine \xe8 uguale alla destinazione!");if(this.newFolderPath=[...t.paths],1===this.entities.length){if(this.entities[0].type===C.OE.FOLDER&&(this.selectedPathAsString+"/").startsWith(this.currentFolderPathAsString+(this.currentFolderPathAsString.length?"/":"")+this.entities[0].name+"/"))return this.isValid=!1,this.newLink="",void(this.errorMessage="La cartella di arrivo contiene quella di origine!");this.newLink=this.basepath+`${this.newFolderPath.map(a=>encodeURIComponent(a)).join("/")}`+(this.newFolderPath.length?"/":"")+encodeURIComponent(this.entities[0].name)}this.isValid=!0}closeSubfoldersCollapseElements(t){if(t.subfolders)for(const i of t.subfolders)i.collapsed=!0,this.closeSubfoldersCollapseElements(i)}ngOnDestroy(){this.startExternalMoveSubscription?.unsubscribe()}static#e=s=()=>(this.\u0275fac=function(i){return new(i||n)(e.rXU(H.B),e.rXU(de.f),e.rXU(ie.f))},this.\u0275cmp=e.VBU({type:n,selectors:[["app-upload-move-modal"]],viewQuery:function(i,r){if(1&i&&e.GBs(Wn,5),2&i){let a;e.mGM(a=e.lsd())&&(r.modalComponent=a.first)}},inputs:{currentFolderPath:"currentFolderPath",entities:"entities"},outputs:{moveEvent:"moveEvent",deleteBeforeMovingEvent:"deleteBeforeMovingEvent"},standalone:!1,features:[e.OA$],decls:8,vars:2,consts:[["modal",""],["newLinkInput",""],["folderTree",""],["tippyRef","appTippy"],[3,"hidden","title","disableCloseButton"],["appModalBody",""],["appModalFooter",""],[1,"mb-1"],[1,"mt-2"],[1,"mb-3"],[1,"pb-3","pt-2","rounded","border-dashed","border-light-gray",3,"ngClass"],[1,"legend-reset","fs-sm","px-2","mb-0"],[1,"list-unstyled","mb-0","folder-tree",3,"ngClass"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["footer",""],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"click","disabled"],["for","new-link",1,"fs-sm"],[1,"input-group"],["type","text","id","new-link","disabled","",1,"form-control",3,"value"],[1,"input-group-text","cursor-pointer",3,"click","cdkCopyToClipboard","appTippy","tippyProps"],[1,"material-icons","d-block","text-muted"],[1,"d-flex","align-items-center","tree-title","rounded",3,"ngClass"],[1,"spinner-cont","d-flex","align-items-center","flex-shrink-0"],[1,"cursor-pointer","flex-grow-1","f-name","me-2","text-truncate",3,"click","innerHTML"],[1,"me-1","d-flex","cursor-pointer","flex-shrink-0",3,"appTippy","tippyProps"],[1,"list-unstyled","collapse-content","sub-tree","mb-0",3,"ngbCollapse"],["role","status",1,"spinner-border"],[1,"visually-hidden"],["role","button",1,"d-flex","align-items-center","collapse-btn","flex-shrink-0",3,"ngClass"],["role","button",1,"d-flex","align-items-center","collapse-btn","flex-shrink-0",3,"click","ngClass"],[1,"collapse-icon","collapse-icon-right","material-icons"],[1,"material-icons-outlined","icon-small"],[1,"list-unstyled","collapse-content","sub-tree","mb-0",3,"ngbCollapseChange","ngbCollapse"]],template:function(i,r){if(1&i){const a=e.RV6();e.j41(0,"app-modal",4,0),e.bIt("hidden",function(){return l.eBV(a),l.Njj(r.onHidden())}),e.DNE(2,po,1,1,"ng-template",5)(3,mo,1,1,"ng-template",6),e.k0s(),e.DNE(4,uo,8,6,"ng-template",null,1,e.C5r)(6,Fo,7,8,"ng-template",null,2,e.C5r)}2&i&&e.Y8G("title",r.modalTitle)("disableCloseButton",!0)},dependencies:[ye.dF,v.YU,v.T3,Z.z,fe.d,Xe.I,y.$G,Oe.e],styles:["fieldset[_ngcontent-%COMP%]{padding-left:11px;padding-right:11px}.folder-tree.loading[_ngcontent-%COMP%]{pointer-events:none!important}.sub-tree[_ngcontent-%COMP%]{margin-left:.125rem}.spinner-cont[_ngcontent-%COMP%]{width:24px;height:24px;padding:6px}.spinner-border[_ngcontent-%COMP%]{width:100%;height:100%;border-width:.125rem;color:#4864fe}.tree-title[_ngcontent-%COMP%]{transition:background-color .2s}.folder-tree[_ngcontent-%COMP%]:not(.touch-device)   .tree-title[_ngcontent-%COMP%]:not(.selected):hover{background-color:rgb(var(--bs-light-rgb))}.f-name[_ngcontent-%COMP%]{padding:.125rem 0}.folder-tree[_ngcontent-%COMP%]:not(.has-error)   .tree-title.selected[_ngcontent-%COMP%]{background-color:#dae0ff}.has-error[_ngcontent-%COMP%]   .tree-title.selected[_ngcontent-%COMP%]{background-color:#f1d5d8;color:#701b23}.has-error[_ngcontent-%COMP%]   .tree-title.selected[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:inherit!important}.has-error[_ngcontent-%COMP%]   .tree-title.selected[_ngcontent-%COMP%]   .spinner-border[_ngcontent-%COMP%]{color:#701b23}@media (min-width: 992px){.sub-tree[_ngcontent-%COMP%]{margin-left:11px;padding-left:12px;border-left:1px solid #dee2e6}}"]}))}return s(),n})();var He=_(4857);const xo=["modal"],Mo=(s,n)=>({"is-valid":s,"is-invalid":n}),To=s=>({$implicit:s}),ko=s=>({placement:"top",hideOnClick:s});function So(s,n){1&s&&(e.EFF(0," \xc8 possibile rinominare un file liberamente, tuttavia occorre tenere presente che "),e.j41(1,"strong"),e.EFF(2,"la modifica del nome comporta il cambiamento del link"),e.k0s(),e.EFF(3,", pertanto al termine dell'operazione andranno aggiornati tutti i link gi\xe0 condivisi, i quali in caso contrario non saranno pi\xf9 funzionanti. "))}function Po(s,n){1&s&&(e.EFF(0," Rinominando una cartella, verr\xe0 "),e.j41(1,"strong"),e.EFF(2,"modificato il link di tutti i file contenuti"),e.k0s(),e.EFF(3," in essa. Pertanto, eventuali link gi\xe0 condivisi non saranno pi\xf9 funzionanti e andranno aggiornati. "))}function Ro(s,n){1&s&&e.EFF(0," Il nome non pu\xf2 essere vuoto! ")}function wo(s,n){if(1&s&&e.nrm(0,"span",18),2&s){const o=e.XpG(5);e.Y8G("innerHTML",o.errorMessage,e.npT)}}function Oo(s,n){1&s&&e.EFF(0," Questo nome \xe8 gi\xe0 in uso! ")}function Io(s,n){if(1&s&&e.nVh(0,wo,1,1,"span",18)(1,Oo,1,0),2&s){const o=e.XpG(4);e.vxM(o.nameValidationErrors.alreadyUsed?1:0)}}function Do(s,n){if(1&s&&(e.j41(0,"div",16),e.nVh(1,Ro,1,0)(2,Io,2,1),e.k0s()),2&s){const o=e.XpG(3);e.R7$(),e.vxM(o.nameValidationErrors.invalidLength?1:2)}}function jo(s,n){1&s&&e.eu8(0)}function Lo(s,n){if(1&s){const o=e.RV6();e.j41(0,"p",7),e.EFF(1," Il nome pu\xf2 contenere i caratteri "),e.j41(2,"em"),e.EFF(3,"a-z"),e.k0s(),e.EFF(4,", sia maiuscoli che minuscoli, i trattini alti e bassi "),e.j41(5,"em"),e.EFF(6,"-_"),e.k0s(),e.EFF(7," e i numeri. "),e.nVh(8,So,4,0)(9,Po,4,0),e.k0s(),e.j41(10,"div",8)(11,"label",9),e.EFF(12,"Nome attuale:"),e.k0s(),e.nrm(13,"input",10),e.k0s(),e.j41(14,"fieldset",11)(15,"legend",12),e.EFF(16," Valori modificati "),e.k0s(),e.j41(17,"ul",13)(18,"li")(19,"label",14),e.EFF(20,"Nuovo nome:"),e.k0s(),e.j41(21,"input",15,2),e.mxI("ngModelChange",function(i){l.eBV(o);const r=e.XpG(2);return e.DH7(r.newName,i)||(r.newName=i),l.Njj(i)}),e.bIt("ngModelChange",function(){l.eBV(o);const i=e.XpG(2);return l.Njj(i.checkNameValidity())}),e.k0s(),e.nVh(23,Do,3,1,"div",16),e.k0s(),e.j41(24,"li"),e.DNE(25,jo,1,0,"ng-container",17),e.k0s()()()}if(2&s){const o=e.sdS(22),t=e.XpG(2),i=e.sdS(5);e.R7$(8),e.vxM(t.entity.type===t.entityTypes.FILE?8:9),e.R7$(5),e.Y8G("value",t.currentName),e.R7$(8),e.Y8G("pattern",t.entity.type===t.entityTypes.FILE?t.filenameValidationRegex:t.foldernameValidationRegex)("ngClass",e.l_i(8,Mo,t.currentName!==t.newName&&o.dirty&&t.isNewNameValid,o.dirty&&!t.isNewNameValid)),e.R50("ngModel",t.newName),e.R7$(2),e.vxM(t.isNewNameValid?-1:23),e.R7$(2),e.Y8G("ngTemplateOutlet",i)("ngTemplateOutletContext",e.eq3(11,To,t.path+t.newNameParsedUrl+t.ext))}}function No(s,n){if(1&s&&e.nVh(0,Lo,26,13),2&s){const o=e.XpG();e.vxM(o.entity?0:-1)}}function Uo(s,n){if(1&s){const o=e.RV6();e.j41(0,"button",19),e.bIt("click",function(){l.eBV(o),e.XpG();const i=e.sdS(1);return l.Njj(i.close("Close click"))}),e.EFF(1," Annulla "),e.k0s(),e.j41(2,"button",20),e.bIt("click",function(){l.eBV(o);const i=e.XpG();return l.Njj(i.rename())}),e.EFF(3," Salva "),e.k0s()}if(2&s){const o=e.XpG();e.R7$(2),e.Y8G("disabled",o.currentName===o.newName||!o.isNewNameValid)}}function Ao(s,n){if(1&s){const o=e.RV6();e.j41(0,"label",21),e.EFF(1,"Anteprima nuovo link:"),e.k0s(),e.j41(2,"div",22),e.nrm(3,"input",23),e.j41(4,"div",24,3),e.bIt("click",function(){l.eBV(o);const i=e.sdS(5),r=e.XpG();return l.Njj(!r.touchDevice&&i.changeContent("Copiato!","Copia"))}),e.j41(6,"span",25),e.EFF(7,"content_copy"),e.k0s()()()}if(2&s){const o=n.$implicit,t=e.XpG();e.R7$(3),e.Y8G("value",o),e.R7$(),e.Y8G("cdkCopyToClipboard",o)("appTippy",t.touchDevice?"Copiato!":"Copia")("tippyProps",e.eq3(4,ko,t.touchDevice))}}let zo=(()=>{var s;class n{constructor(t,i,r){this.toastService=t,this.uploadService=i,this.uploadObservablesService=r,this.currentFolderPath=[],this.reservedNames=[],this.renameEvent=new e.bkB,this.touchDevice=I.CN,this.currentName="",this.newName="",this.newNameParsedUrl="",this.ext="",this.isNewNameValid=!1,this.entityTypes=C.OE,this.path="",this.filenameValidationRegex=He.uX,this.foldernameValidationRegex=He.gF,this.errorMessage="",this.nameValidationErrors=He.tv,this.characterFileErrorMessage="Il nome pu\xf2 contenere solo i caratteri <em>a-z</em>, i trattini alti e bassi <em>-_</em>, gli spazi, i punti e i numeri!",this.characterFolderErrorMessage="Il nome pu\xf2 contenere solo i caratteri <em>a-z</em>, i trattini alti e bassi <em>-_</em>, gli spazi e i numeri!",this.startAndEndErrorMessage="Il nome non pu\xf2 iniziare o finire con un punto o uno spazio!",this.opened=!1}ngOnChanges(t){t.entity&&!t.entity.firstChange&&this.entity&&(this.ext=this.entity.ext?`.${this.entity.ext}`:"",this.currentName=this.newName=this.ext?this.entity.name.replace(this.ext,""):this.entity.name,this.path=this.entity.url.split("/").slice(0,-1).join("/")+"/",this.createNameForUrl())}open(){return this.opened=!0,this.modalComponent.open()}onHidden(){this.opened=!1,this.newName=this.newNameParsedUrl=this.currentName,this.isNewNameValid=!1,this.nameValidationErrors=He.tv}checkNameValidity(){this.nameValidationErrors=(0,j.Jq)(this.newName,this.currentName,this.entity?.type||C.OE.FILE,this.reservedNames||[],this.ext),this.isNewNameValid=!Object.values(this.nameValidationErrors).some(t=>t),this.isNewNameValid?this.createNameForUrl():this.setErrorMessage()}createNameForUrl(){this.newNameParsedUrl=encodeURIComponent(this.newName)}setErrorMessage(){this.errorMessage=this.nameValidationErrors.invalidStartOrEnd?this.startAndEndErrorMessage:this.entity?.type===C.OE.FOLDER?this.characterFolderErrorMessage:this.characterFileErrorMessage}rename(){var t=this;return(0,S.A)(function*(){if(!t.opened||!t.isNewNameValid||!t.entity)return;const i=t.newName+t.ext,r={...t.entity};t.modalComponent.close();let a=!1,p=` <strong>${r.name}</strong> modificato con successo!`;const m=[...t.currentFolderPath];t.uploadObservablesService.pushEntityPending([{type:r.type,name:r.name,start:!0}]);const f=yield t.uploadService.moveRenameEntity(m,m,r.name,i);if(a=!(!f||!f.url),t.uploadObservablesService.pushEntityPending([{type:r.type,name:r.name,start:!1}]),a)return t.renameEvent.emit({list:[r],newEntityData:f,destPath:m}),p=(r.type===C.OE.FILE?"Nome del file":"Nome della cartella")+p,void t.toastService.show({content:p});t.toastService.show({content:"La modifica del nome <strong>non</strong> \xe8 andata a buon fine!<br>Prova a ricaricare la pagina ed a rieseguirla.",level:$.A.ERROR})})()}static#e=s=()=>(this.\u0275fac=function(i){return new(i||n)(e.rXU(de.f),e.rXU(H.B),e.rXU(ie.f))},this.\u0275cmp=e.VBU({type:n,selectors:[["app-upload-rename-modal"]],viewQuery:function(i,r){if(1&i&&e.GBs(xo,5),2&i){let a;e.mGM(a=e.lsd())&&(r.modalComponent=a.first)}},inputs:{currentFolderPath:"currentFolderPath",entity:"entity",reservedNames:"reservedNames"},outputs:{renameEvent:"renameEvent"},standalone:!1,features:[e.OA$],decls:6,vars:2,consts:[["modal",""],["newUrl",""],["newNameInput","ngModel"],["tippyRef","appTippy"],[3,"hidden","title","disableCloseButton"],["appModalBody",""],["appModalFooter",""],[1,"mb-0"],[1,"mt-2"],["for","current-name",1,"fs-sm"],["type","text","disabled","","id","current-name",1,"form-control",3,"value"],[1,"px-3","pb-3","pt-1","rounded","mt-3","mb-1","border-dashed","border-light-gray"],[1,"legend-reset","fs-reset","px-2","mb-0"],[1,"list-unstyled","mb-0"],["for","file-new-name",1,"fs-sm"],["type","text","id","file-new-name","required","",1,"form-control",3,"ngModelChange","pattern","ngClass","ngModel"],[1,"invalid-feedback"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"innerHTML"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"click","disabled"],["for","new-link",1,"fs-sm"],[1,"input-group"],["type","text","id","new-link","disabled","",1,"form-control",3,"value"],[1,"input-group-text","cursor-pointer",3,"click","cdkCopyToClipboard","appTippy","tippyProps"],[1,"material-icons","d-block","text-muted"]],template:function(i,r){if(1&i){const a=e.RV6();e.j41(0,"app-modal",4,0),e.bIt("hidden",function(){return l.eBV(a),l.Njj(r.onHidden())}),e.DNE(2,No,1,1,"ng-template",5)(3,Uo,4,1,"ng-template",6),e.k0s(),e.DNE(4,Ao,8,6,"ng-template",null,1,e.C5r)}2&i&&e.Y8G("title","Rinomina <em>"+((null==r.entity?null:r.entity.name)||"")+"</em>")("disableCloseButton",!0)},dependencies:[ye.dF,v.YU,v.T3,x.me,x.BC,x.YS,x.R_,x.vS,Z.z,fe.d,Xe.I,Oe.e],styles:["fieldset[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]:not(:first-of-type){margin-top:.75rem}"]}))}return s(),n})(),Go=(()=>{var s;class n{constructor(t){this.uploadCacheService=t}parseUploadEvent(t){const i=this.parseSubscriptionEventMessage(t),r=this.uploadCacheService.getItem(i.targetPaths);if(!r||!i.output)return;const a=r.files.findIndex(m=>m.url===i.output?.url)>-1,p=(0,j.ZA)(i.output.url);return p.size=i.output.size,p.time=1e3*i.output.time,{rewrite:a,destPath:i.targetPaths,list:[p]}}parseCreateFolderEvent(t){const i=this.parseSubscriptionEventMessage(t);if(!i.output)return;const r=(0,j.D)(i.output);return{opened:!1,destPath:i.targetPaths,list:[r]}}parseDeleteEntityEvent(t,i,r){const a=this.parseSubscriptionEventMessage(t);if(a.output)return{...this.checkCompromissions(a.targetPaths,i,a.targetName,a.isFile,r),event:{destPath:a.targetPaths,list:[{name:a.targetName,type:a.isFile?C.OE.FILE:C.OE.FOLDER}]}}}parseMoveEntityEvent(t,i,r){const a=this.parseSubscriptionEventMessage(t);return a.output?{isRename:a.sourcePaths.join("/")===a.targetPaths.join("/"),...this.checkCompromissions(a.sourcePaths,i,a.sourceName,a.isFile,r),newEntity:{...a.output,time:1e3*a.output.time},type:a.isFile?C.OE.FILE:C.OE.FOLDER,source:{name:a.sourceName,paths:a.sourcePaths},target:{name:a.targetName,paths:a.targetPaths}}:void 0}parseSubscriptionEventMessage(t){const i=(t.payload.content.source||"").split("/"),r=(t.payload.content.target||"").split("/"),a=r[r.length-1].indexOf(".")>-1;let p;try{p=JSON.parse(t.output).success||void 0}catch{}return{sourceName:i[i.length-1],sourcePaths:i.slice(0,-1),targetName:r[r.length-1],targetPaths:r.slice(0,-1),isFile:a,output:p}}checkCompromissions(t,i,r,a,p){const m=i.join("/");return!a&&m.includes([...t,r].join("/"))?{pathCompromised:!0,entityCompromised:!1}:m===t.join("/")&&p.find(f=>f.name===r)?{pathCompromised:!1,entityCompromised:!0}:{pathCompromised:!1,entityCompromised:!1}}static#e=s=()=>(this.\u0275fac=function(i){return new(i||n)(l.KVO(ze.J))},this.\u0275prov=l.jDH({token:n,factory:n.\u0275fac,providedIn:"root"}))}return s(),n})();var Ot=function(s){return s.MOVE="MOVE",s.DELETE="DELETE",s.NEW_DIR="NEW_DIR",s.UPLOAD="UPLOAD",s}(Ot||{}),Ze=_(870),Vo=_(1729),Bo=_(6350),Xo=_(4981),Zi=_(3665),$o=_(1669);let Ji=(()=>{var s;class n{constructor(){this.uploadEndpointsService=(0,l.WQX)(Ze.D),this.privacyService=(0,l.WQX)($o.Q),this.savePreference=!1,this.appName=I.JB}disable(){this.uploadEndpointsService.disableRemoteAdvice(this.savePreference)}static#e=s=()=>(this.\u0275fac=function(i){return new(i||n)},this.\u0275cmp=e.VBU({type:n,selectors:[["app-upload-endpoint-advice"]],decls:32,vars:8,consts:[["alert",""],["type","primary",1,"mx-auto",3,"closed","dismissible"],[1,"text-center"],[1,"text-justify"],["target","_blank",3,"href"],["target","_blank",3,"href","innerText"],["role","button",1,"button",3,"click"],[1,"text-end"],["role","button",1,"small",3,"click"]],template:function(i,r){if(1&i){const a=e.RV6();e.j41(0,"ngb-alert",1,0),e.bIt("closed",function(){return l.eBV(a),l.Njj(r.disable())}),e.j41(2,"p",2)(3,"strong"),e.EFF(4,"Server esterno!"),e.k0s()(),e.j41(5,"p",3),e.EFF(6," Il server selezionato per l'upload, "),e.j41(7,"strong"),e.EFF(8),e.k0s(),e.EFF(9,", non \xe8 presente nella lista di quelli suggeriti di default. "),e.k0s(),e.j41(10,"p",3)(11,"strong"),e.EFF(12,"Tutti i file e i dati"),e.k0s(),e.EFF(13," raccolti saranno conservati su "),e.j41(14,"strong"),e.EFF(15,"server di terze parti"),e.k0s(),e.EFF(16,": per ogni richiesta occorre contattare direttamente il proprietario del server tramite "),e.j41(17,"a",4),e.nI1(18,"ffuidToLink"),e.EFF(19,"messaggio privato"),e.k0s(),e.EFF(20," o l'indirizzo email "),e.nrm(21,"a",5),e.EFF(22,". \xc8 possibile tornare al "),e.j41(23,"a",6),e.bIt("click",function(){return l.eBV(a),l.Njj(r.uploadEndpointsService.resetActiveRemote())}),e.EFF(24,"server di default"),e.k0s(),e.EFF(25," tramite l'apposito select di scelta del server. Leggi di pi\xf9 nella "),e.j41(26,"a",6),e.bIt("click",function(){return l.eBV(a),l.Njj(r.privacyService.toggleModal())}),e.EFF(27,"privacy policy"),e.k0s(),e.EFF(28),e.k0s(),e.j41(29,"div",7)(30,"a",8),e.bIt("click",function(){l.eBV(a);const m=e.sdS(1);return r.savePreference=!0,l.Njj(m.close())}),e.EFF(31,"Ho capito, non mostrare per 30 giorni"),e.k0s()()()}2&i&&(e.Y8G("dismissible",!0),e.R7$(8),e.JRh(r.uploadEndpointsService.requiredActiveRemote.name),e.R7$(9),e.Y8G("href",e.bMT(18,6,r.uploadEndpointsService.requiredActiveRemote.owner),e.B4B),e.R7$(4),e.Y8G("href","mailto:"+r.uploadEndpointsService.requiredActiveRemote.email,e.B4B)("innerText",r.uploadEndpointsService.requiredActiveRemote.email),e.R7$(7),e.SpI(" di ",r.appName,". "))},dependencies:[y.oi,y.Cv,Zi.k],styles:["ngb-alert[_ngcontent-%COMP%]{max-width:1000px;border-radius:0;border-left-width:0;border-right-width:0;padding-left:3rem}@media (min-width: 768px){ngb-alert[_ngcontent-%COMP%]{border-left-width:1px;border-right-width:1px;border-radius:.25rem}}"],changeDetection:0}))}return s(),n})();var De=_(7696);function Ho(s,n){1&s&&(e.j41(0,"p",5),e.EFF(1," L'account loggato "),e.j41(2,"strong"),e.EFF(3,"\xe8 proprietario di questo server"),e.k0s(),e.EFF(4,". Rimuovendo il server dalla lista, gli altri utenti che hanno "),e.j41(5,"strong"),e.EFF(6,"gi\xe0 aggiunto"),e.k0s(),e.EFF(7," il server "),e.j41(8,"strong"),e.EFF(9,"continueranno a vederne le informazioni di contatto"),e.k0s(),e.EFF(10," (in particolare, account proprietario ed email di contatto), senza tuttavia poterlo selezionare. Gli utenti che invece "),e.j41(11,"strong"),e.EFF(12,"non"),e.k0s(),e.EFF(13," hanno ancora inserito il server nella loro lista, "),e.j41(14,"strong"),e.EFF(15,"non potranno aggiungerlo"),e.k0s(),e.EFF(16,". "),e.k0s(),e.j41(17,"p",5),e.EFF(18," Cancellando il server, "),e.j41(19,"strong")(20,"u"),e.EFF(21,"non"),e.k0s(),e.EFF(22," saranno rimossi"),e.k0s(),e.EFF(23," i file gi\xe0 caricati da tutti gli utenti che lo hanno utilizzato e, pertanto, tali file continueranno ad "),e.j41(24,"strong"),e.EFF(25,"essere visibili"),e.k0s(),e.EFF(26," a chiunque ne possegga il link. "),e.j41(27,"strong"),e.EFF(28,"Il proprietario \xe8 responsabile"),e.k0s(),e.EFF(29," e continua a rimanere responsabile per i file caricati sul suo server: se si desidera quindi chiudere completamente il server si consiglia di rimuovere anche i file caricati da chiunque lo abbia utilizzato oppure limitarne l'accesso. "),e.k0s(),e.j41(30,"p",5),e.EFF(31," L'azione di cancellazione del server tramite questo pannello "),e.j41(32,"strong"),e.EFF(33,"non adempie"),e.k0s(),e.EFF(34," nemmeno agli obblighi di rimozione dei dati sensibili a fini della normativa privacy: tali obblighi "),e.j41(35,"strong"),e.EFF(36,"permangono esclusivamente a carico del proprietario"),e.k0s(),e.EFF(37,". "),e.k0s())}function Yo(s,n){1&s&&(e.EFF(0," Una volta rimosso il server, \xe8 possibile aggiungerlo nuovamente "),e.j41(1,"strong"),e.EFF(2,"solo se si possiede il suo ID"),e.k0s(),e.EFF(3," e se, nel frattempo, il proprietario non lo rimuove a sua volta, limitandone cos\xec l'utilizzo. "))}function Wo(s,n){1&s&&(e.EFF(0," Questo server \xe8 stato "),e.j41(1,"strong"),e.EFF(2,"rimosso dal suo proprietario"),e.k0s(),e.EFF(3,". Eliminandolo dalla lista "),e.j41(4,"strong"),e.EFF(5,"non sar\xe0 in alcun modo possibile"),e.k0s(),e.EFF(6," inserirlo nuovamente! "))}function Qo(s,n){if(1&s&&(e.j41(0,"p",5),e.EFF(1," Rimuovendo il server dalla lista, non sar\xe0 pi\xf9 selezionabile tra quelli su cui agire. I file "),e.j41(2,"strong"),e.EFF(3,"gi\xe0 caricati"),e.k0s(),e.EFF(4," sul server che si sta eliminando "),e.j41(5,"strong")(6,"u"),e.EFF(7,"non"),e.k0s(),e.EFF(8," saranno rimossi"),e.k0s(),e.EFF(9," e continueranno ad "),e.j41(10,"strong"),e.EFF(11,"essere visibili"),e.k0s(),e.EFF(12," a chiunque ne possegga il link. Per cancellare i file, si possono utilizzare le apposite funzioni del pannello di gestione file "),e.j41(13,"strong"),e.EFF(14,"prima"),e.k0s(),e.EFF(15," di rimuovere il server dalla lista, oppure "),e.j41(16,"strong"),e.EFF(17,"contattare il proprietario"),e.k0s(),e.EFF(18," del server stesso. "),e.k0s(),e.j41(19,"p",5),e.nVh(20,Yo,4,0)(21,Wo,7,0),e.k0s()),2&s){const o=e.XpG();e.R7$(20),e.vxM(o.remote().deleted?21:20)}}let qo=(()=>{var s;class n{constructor(){this.remote=T.hFB.required(),this.type=T.hFB.required(),this.confirmationEvent=new e.bkB,this.appName=I.JB,this.isOwnedType=(0,te.EW)(()=>this.type()===De.j.OWNED)}static#e=s=()=>(this.\u0275fac=function(i){return new(i||n)},this.\u0275cmp=e.VBU({type:n,selectors:[["app-upload-endpoints-delete"]],inputs:{remote:[1,"remote"],type:[1,"type"]},outputs:{confirmationEvent:"confirmationEvent"},decls:18,vars:5,consts:[[1,"alert","alert-danger","text-center"],[1,"form-check"],["type","checkbox","id","remove-remote-confirm",1,"form-check-input",3,"ngModelChange","ngModel"],["for","remove-remote-confirm",1,"form-check-label"],[3,"innerText"],[1,"text-justify","mb-3"]],template:function(i,r){1&i&&(e.j41(0,"div",0),e.EFF(1," La rimozione del server "),e.j41(2,"strong"),e.EFF(3),e.k0s(),e.EFF(4," (id: "),e.j41(5,"em"),e.EFF(6),e.k0s(),e.EFF(7,") \xe8 "),e.j41(8,"strong"),e.EFF(9,"definitiva"),e.k0s(),e.EFF(10,", senza possibilit\xe0 di annullamento dell'operazione.\n"),e.k0s(),e.nVh(11,Ho,38,0)(12,Qo,22,1),e.j41(13,"p",1)(14,"input",2),e.bIt("ngModelChange",function(p){return r.confirmationEvent.emit(p)}),e.k0s(),e.j41(15,"label",3),e.EFF(16," Conferma la rimozione del server "),e.nrm(17,"strong",4),e.k0s()()),2&i&&(e.R7$(3),e.JRh(r.remote().name),e.R7$(3),e.JRh(r.remote().id),e.R7$(5),e.vxM(r.isOwnedType()?11:12),e.R7$(3),e.Y8G("ngModel",!1),e.R7$(3),e.Y8G("innerText",r.remote().name))},dependencies:[x.YN,x.Zm,x.BC,x.vS],encapsulation:2,changeDetection:0}))}return s(),n})();var Ko=_(6589),Oi=_(2998);const Zo={type:"object",required:["name","address","email"],properties:{id:{type:["string",null],title:"Id del server:",description:"L'id del server che si sta modificando.",widget:{formlyConfig:{props:{disabled:!0},expressions:{hide:s=>!s.model?.id}}}},name:{type:"string",title:"Nome del server:",description:"Il nome con cui il server sar\xe0 presente nell'elenco e riconosciuto dai suoi utilizzatori."},address:{type:"string",title:"Indirizzo del server:",description:"L'url a cui verranno inviate tutte le richieste per la gestione dei files.",widget:{formlyConfig:{validators:{pattern:{expression:s=>!s.value||/^https:\/\/.+/.test(s.value),message:(s,n)=>`"${n.formControl?.value}" non \xe8 un url valido!`}}}}},email:{type:"string",title:"Email di contatto:",description:"L'indirizzo email [b]pubblico[/b] e [b]visibile a tutti[/b] a cui gli utenti protranno inviare richieste di supporto.",widget:{formlyConfig:{validators:{validation:["email"]}}}},selectAfterAdd:{type:"checkbox",default:!1,widget:{formlyConfig:{expressions:{"props.label":s=>"Seleziona il server dopo "+(s.model?.id?"la modifica":"l'inserimento")}}}}}};function en(s){return I.QY.test(s)}var It=_(9079),es=_(6148);const ts=s=>({"is-invalid":s});function is(s,n){1&s&&e.EFF(0," L'ID specificato non \xe8 corretto! ")}function ns(s,n){1&s&&e.EFF(0," Inserisci un ID! ")}function os(s,n){if(1&s&&(e.j41(0,"div",16),e.nVh(1,is,1,0)(2,ns,1,0),e.k0s()),2&s){const o=e.XpG(2);e.R7$(),e.vxM(o.linkedRemoteIdModel.length?1:2)}}function ss(s,n){if(1&s){const o=e.RV6();e.j41(0,"div",11)(1,"p",12),e.EFF(2," \xc8 possibile aggiungere un server alla propria lista tramite "),e.j41(3,"strong"),e.EFF(4,"l'ID"),e.k0s(),e.EFF(5),e.k0s(),e.j41(6,"p",12),e.EFF(7," Dopo aver inserito l'ID e cliccato sull'apposito pulsante "),e.j41(8,"em"),e.EFF(9,"Salva"),e.k0s(),e.EFF(10,", se il server corrispondente \xe8 "),e.j41(11,"strong"),e.EFF(12,"esistente e non disabilitato"),e.k0s(),e.EFF(13," sar\xe0 aggiunto alla propria lista e "),e.j41(14,"strong"),e.EFF(15,"potr\xe0 essere selezionato"),e.k0s(),e.EFF(16," dall'apposito select per caricare e gestire file "),e.j41(17,"strong"),e.EFF(18,"su quello spazio"),e.k0s(),e.EFF(19,". "),e.k0s(),e.j41(20,"p",13),e.EFF(21," Cos\xec facendo, "),e.j41(22,"strong"),e.EFF(23,"tutti i file e i dati"),e.k0s(),e.EFF(24," ad essi associati (tra cui tipo di file, ultima modifica, dimensione; nonch\xe9 le informazioni sull'account che ha caricato il file, ad esempio nome, id, user agent, ip) saranno "),e.j41(25,"strong"),e.EFF(26,"conservati e gestiti"),e.k0s(),e.EFF(27," direttamente dal "),e.j41(28,"strong"),e.EFF(29,"proprietario del server"),e.k0s(),e.EFF(30,", a cui devono essere "),e.j41(31,"strong"),e.EFF(32,"indirizzate eventuali richieste"),e.k0s(),e.EFF(33," in merito, sfruttando anche le informazioni di contatto presenti tra i dettagli del server nel pannello con la lista dei server aggiunti. "),e.k0s(),e.j41(34,"label",14),e.EFF(35,"ID del server:"),e.k0s(),e.j41(36,"input",15,1),e.mxI("ngModelChange",function(i){l.eBV(o);const r=e.XpG();return e.DH7(r.linkedRemoteIdModel,i)||(r.linkedRemoteIdModel=i),l.Njj(i)}),e.bIt("ngModelChange",function(){l.eBV(o);const i=e.XpG();return l.Njj(i.checkIdValidity())}),e.k0s(),e.nVh(38,os,3,1,"div",16),e.j41(39,"div",17),e.EFF(40," Inserisci l'id di un server fornito dal suo proprietario per caricare le immagini su quello spazio! "),e.k0s(),e.j41(41,"p",18)(42,"input",19),e.mxI("ngModelChange",function(i){l.eBV(o);const r=e.XpG();return e.DH7(r.linkedRemoteSelectAfterAddModel,i)||(r.linkedRemoteSelectAfterAddModel=i),l.Njj(i)}),e.k0s(),e.j41(43,"label",20),e.EFF(44," Seleziona il server dopo l'inserimento "),e.k0s()()()}if(2&s){const o=e.sdS(37),t=e.XpG();e.R7$(5),e.SpI(" fornito o reso pubblico dal proprietario che ha inserito tutti i dati del server e lo ha reso idoneo a comunicare con il pannello di ",t.appName,". "),e.R7$(31),e.Y8G("ngClass",e.eq3(6,ts,o.touched&&o.invalid))("pattern",t.linkedRemoteRegexp),e.R50("ngModel",t.linkedRemoteIdModel),e.R7$(2),e.vxM(o.touched&&o.invalid?38:-1),e.R7$(4),e.R50("ngModel",t.linkedRemoteSelectAfterAddModel)}}function rs(s,n){if(1&s){const o=e.RV6();e.j41(0,"div",21)(1,"p",12),e.EFF(2," Tramite questo form \xe8 possibile aggiungere un nuovo server in qualit\xe0 di proprietari oppure modificarne uno gi\xe0 inserito. L'aggiunta di un nuovo server pu\xf2 essere eseguita solo dal "),e.j41(3,"strong"),e.EFF(4,"proprietario del server"),e.k0s(),e.EFF(5,". "),e.k0s(),e.j41(6,"p",12),e.EFF(7," Dopo averlo inserito, il server comparir\xe0 nella propria lista: da qui sar\xe0 possibile "),e.j41(8,"strong"),e.EFF(9,"copiare l'ID"),e.k0s(),e.EFF(10," del server per condividerlo con altri e permettere anche a loro di aggiungerlo e utilizzarlo. "),e.k0s(),e.j41(11,"p",13),e.EFF(12," Si ricorda che il "),e.j41(13,"strong"),e.EFF(14,"proprietario"),e.k0s(),e.EFF(15," del server \xe8 "),e.j41(16,"strong"),e.EFF(17,"responsabile per i file e i dati"),e.k0s(),e.EFF(18),e.j41(19,"strong"),e.EFF(20,"gestione di richieste o reclami"),e.k0s(),e.EFF(21," da chiunque provenienti in merito ai file e dati presenti sul server aggiunto. \xc8 pertanto fondamentale "),e.j41(22,"strong"),e.EFF(23,"specificare un indirizzo mail "),e.j41(24,"u"),e.EFF(25,"pubblico"),e.k0s()(),e.EFF(26," a cui gli utenti e chiunque ne abbia interesse possano scrivere. Tale indirizzo mail "),e.j41(27,"strong"),e.EFF(28,"sar\xe0 pubblicamente mostrato"),e.k0s(),e.EFF(29," a chiunque aggiunga il server alla propria lista: si consiglia pertanto di utilizzare un indirizzo dedicato a questo scopo. Anche il "),e.j41(30,"strong"),e.EFF(31,"link all'account"),e.k0s(),e.EFF(32," proprietario del server sar\xe0 "),e.j41(33,"strong"),e.EFF(34,"mostrato tra le informazioni pubbliche"),e.k0s(),e.EFF(35,", in modo da consentire agli utenti di inviare messaggi privati a tale account. "),e.k0s(),e.j41(36,"div",22,2),e.bIt("modelChangeEvent",function(){l.eBV(o);const i=e.sdS(37),r=e.XpG();return l.Njj(r.checkFormValidity(i.form.valid))}),e.k0s()()}if(2&s){const o=e.XpG();e.R7$(18),e.SpI(" caricati e conservati sul suo spazio. ",o.appName," non ha accesso al server n\xe9 si sostituisce in alcun modo al proprietario per la "),e.R7$(18),e.Y8G("schema",o.remoteFormSchema)("enableModelChangeEvent",!0)("model",o.remoteFormModel)}}var Je=function(s){return s.LINK="link",s.CREATE="create",s}(Je||{});let as=(()=>{var s;class n{constructor(){this.destroyRef=(0,l.WQX)(l.abz),this.uploadEndpointsService=(0,l.WQX)(Ze.D),this.remote=(0,T.hFB)(),this.remoteId=(0,T.hFB)(),this.saveObservable=T.hFB.required(),this.validityChange=new e.bkB,this.saveRemoteEvent=new e.bkB,this.appName=I.JB,this.formNavItems=Je,this.formNavActive=Je.LINK,this.linkedRemoteIdModel="",this.linkedRemoteRegexp=I.QY,this.linkedRemoteSelectAfterAddModel=!1,this.remoteFormSchema=Zo,this.remoteFormModel={address:"",name:"",email:"",selectAfterAdd:!1},this.currentValidity=!1,this.isRemoteFormValid=!1,this.isRemoteIdValid=!1}ngOnInit(){this.uploadEndpointsService.lastListSelected===De.j.OWNED&&(this.formNavActive=Je.CREATE);const t=this.remote();if(t)this.formNavActive=Je.CREATE,this.remoteFormModel={id:t.id,name:t.name,address:t.address,email:t.email,selectAfterAdd:!1};else{const i=this.remoteId();i&&(this.linkedRemoteIdModel=i,this.checkIdValidity())}this.saveObservable().pipe((0,It.pQ)(this.destroyRef)).subscribe(()=>{if(this.isLinkForm()&&this.isRemoteIdValid)this.saveRemoteEvent.emit({selectAfterAdd:this.linkedRemoteSelectAfterAddModel,id:this.linkedRemoteIdModel});else if(this.isCreateForm()&&this.isRemoteFormValid){const i=this.remote()?.id;this.saveRemoteEvent.emit({...this.remoteFormModel,id:i})}})}checkValidityOnTabChange(){this.emitValidityEvent(this.isLinkForm()&&this.isRemoteIdValid||this.isCreateForm()&&this.isRemoteFormValid)}checkIdValidity(){this.emitValidityEvent(this.isRemoteIdValid=en(this.linkedRemoteIdModel))}checkFormValidity(t){this.emitValidityEvent(this.isRemoteFormValid=t)}emitValidityEvent(t){t!==this.currentValidity&&this.validityChange.emit(this.currentValidity=t)}isLinkForm(){return this.formNavActive===Je.LINK}isCreateForm(){return this.formNavActive===Je.CREATE}static#e=s=()=>(this.\u0275fac=function(i){return new(i||n)},this.\u0275cmp=e.VBU({type:n,selectors:[["app-upload-endpoints-form"]],inputs:{remote:[1,"remote"],remoteId:[1,"remoteId"],saveObservable:[1,"saveObservable"]},outputs:{validityChange:"validityChange",saveRemoteEvent:"saveRemoteEvent"},decls:20,vars:6,consts:[["nav","ngbNav"],["linkedIdInput","ngModel"],["customForm",""],[1,"text-justify"],[1,"my-4","d-flex","justify-content-center"],[1,"btn","btn-sm","mx-2",3,"click","ngClass"],[1,"btn","btn-sm",3,"click","ngClass"],["ngbNav","",1,"mb-0","list-unstyled","d-none",3,"activeIdChange","activeId"],[3,"ngbNavItem"],["ngbNavContent",""],[3,"ngbNavOutlet"],[1,"linked-remote-form"],[1,"text-justify","mb-2"],[1,"text-justify","mb-3"],["for","remote-linked-id",1,"form-label"],["id","remote-linked-id","type","text","required","",1,"form-control",3,"ngModelChange","ngClass","pattern","ngModel"],[1,"invalid-feedback"],[1,"form-text","text-muted"],[1,"form-check","my-3"],["type","checkbox","id","linked-select-remote-after-add",1,"form-check-input",3,"ngModelChange","ngModel"],["for","linked-select-remote-after-add",1,"form-check-label"],[1,"remote-form"],["app-custom-form","",3,"modelChangeEvent","schema","enableModelChangeEvent","model"]],template:function(i,r){if(1&i){const a=e.RV6();e.j41(0,"p",3),e.EFF(1," Questo pannello consente di aggiungere alla propria lista un server gi\xe0 inserito dal suo proprietario oppure di creare un nuovo server specificandone tutti i dati richiesti. In entrambi i casi, il server "),e.j41(2,"strong"),e.EFF(3,"sar\xe0 inserito nella propria lista"),e.k0s(),e.EFF(4," e in seguito potr\xe0 essere selezionato per iniziare a caricare e gestire file "),e.j41(5,"strong"),e.EFF(6,"su quello spazio"),e.k0s(),e.EFF(7,".\n"),e.k0s(),e.j41(8,"div",4)(9,"button",5),e.bIt("click",function(){l.eBV(a);const m=e.sdS(14);return l.Njj(m.select(r.formNavItems.CREATE))}),e.EFF(10,"Inserisci nuovo"),e.k0s(),e.j41(11,"button",6),e.bIt("click",function(){l.eBV(a);const m=e.sdS(14);return l.Njj(m.select(r.formNavItems.LINK))}),e.EFF(12,"Aggiungi da ID"),e.k0s()(),e.j41(13,"ul",7,0),e.mxI("activeIdChange",function(m){return l.eBV(a),e.DH7(r.formNavActive,m)||(r.formNavActive=m),l.Njj(m)}),e.bIt("activeIdChange",function(){return l.eBV(a),l.Njj(r.checkValidityOnTabChange())}),e.j41(15,"li",8),e.DNE(16,ss,45,8,"ng-template",9),e.k0s(),e.j41(17,"li",8),e.DNE(18,rs,38,4,"ng-template",9),e.k0s()(),e.nrm(19,"div",10)}if(2&i){const a=e.sdS(14);e.R7$(9),e.Y8G("ngClass",r.formNavActive===r.formNavItems.CREATE?"btn-primary":"btn-outline-primary"),e.R7$(2),e.Y8G("ngClass",r.formNavActive===r.formNavItems.LINK?"btn-primary":"btn-outline-primary"),e.R7$(2),e.R50("activeId",r.formNavActive),e.R7$(2),e.Y8G("ngbNavItem",r.formNavItems.LINK),e.R7$(2),e.Y8G("ngbNavItem",r.formNavItems.CREATE),e.R7$(2),e.Y8G("ngbNavOutlet",a)}},dependencies:[Ko.w,es.L,x.YN,x.me,x.Zm,x.BC,x.YS,x.R_,x.vS,y.Pv,y.Um,y.X9,y.sy,y.Gx,y.m_,v.YU],styles:['.divider[_ngcontent-%COMP%]:before, .divider[_ngcontent-%COMP%]:after{content:"";flex-grow:1;border-bottom:1px solid #dee2e6}'],changeDetection:0}))}return s(),n})();var ls=_(9935),cs=_(5613),ds=_(4572),Ii=_(8141),tn=_(5558);const ps=s=>({"touch-device":s}),hs=s=>({"border-bottom pb-3 mb-3":s}),ms=()=>({placement:"left"}),us=()=>["left-top","auto"],_s=s=>({disabled:s}),gs=(s,n)=>n.id;function fs(s,n){1&s&&e.nrm(0,"app-loader",0)}function vs(s,n){1&s&&(e.j41(0,"div",7)(1,"div",21),e.EFF(2,"star"),e.k0s()())}function Cs(s,n){1&s&&(e.j41(0,"div",8),e.EFF(1,"Disabilitato"),e.k0s())}function bs(s,n){if(1&s){const o=e.RV6();e.j41(0,"div",10)(1,"div",22),e.bIt("click",function(){l.eBV(o);const i=e.XpG().$implicit,r=e.XpG(2);return l.Njj(r.selectRemote(i))}),e.EFF(2,"push_pin"),e.k0s()()}2&s&&e.Y8G("tippyProps",e.lJ4(1,ms))}function Es(s,n){if(1&s){const o=e.RV6();e.j41(0,"li")(1,"a",27),e.bIt("click",function(){l.eBV(o);const i=e.XpG(2).$implicit,r=e.XpG(2);return l.Njj(r.editEvent.emit(i.id))}),e.j41(2,"div",26),e.EFF(3,"edit"),e.k0s(),e.j41(4,"div"),e.EFF(5,"Modifica"),e.k0s()()()}}function Fs(s,n){if(1&s){const o=e.RV6();e.j41(0,"li")(1,"a",28),e.bIt("click",function(){l.eBV(o);const i=e.XpG(2).$implicit,r=e.XpG(2);return l.Njj(r.selectRemote(i))}),e.j41(2,"div",26),e.EFF(3,"check_circle"),e.k0s(),e.j41(4,"div"),e.EFF(5,"Seleziona"),e.k0s()()()}if(2&s){let o;const t=e.XpG(2).$implicit,i=e.XpG(2);e.R7$(),e.Y8G("ngClass",e.eq3(1,_s,t.deleted||(null==(o=i.uploadEndpointsService.activeRemote())?null:o.id)===t.id))}}function ys(s,n){if(1&s){const o=e.RV6();e.j41(0,"li")(1,"a",27),e.bIt("click",function(){l.eBV(o);const i=e.XpG(2).$implicit,r=e.XpG(2);return l.Njj(r.deleteEvent.emit(i.id))}),e.j41(2,"div",26),e.EFF(3,"delete"),e.k0s(),e.nrm(4,"div",29),e.k0s()()}if(2&s){const o=e.XpG(4);e.R7$(4),e.Y8G("innerText",o.removeButtonText())}}function xs(s,n){if(1&s&&(e.j41(0,"div",11)(1,"div",23),e.EFF(2,"more_vert"),e.k0s(),e.j41(3,"ul",24)(4,"li")(5,"a",25)(6,"div",26),e.EFF(7,"fingerprint"),e.k0s(),e.j41(8,"div"),e.EFF(9,"Copia ID"),e.k0s()()(),e.nVh(10,Es,6,0,"li")(11,Fs,6,3,"li"),e.nVh(12,ys,5,1,"li"),e.k0s()()),2&s){const o=e.XpG().$implicit,t=e.XpG(2);e.Y8G("placement",e.lJ4(4,us)),e.R7$(5),e.Y8G("cdkCopyToClipboard",o.id),e.R7$(5),e.vxM(t.isOwnedType()?10:11),e.R7$(2),e.vxM(t.isOwnedType()&&o.deleted?-1:12)}}function Ms(s,n){1&s&&(e.j41(0,"div",12),e.EFF(1," Il server \xe8 stato "),e.j41(2,"strong"),e.EFF(3,"correttamente disabilitato"),e.k0s(),e.EFF(4,". Continuer\xe0 a rimanere visibile agli utenti che lo hanno gi\xe0 inserito nella loro lista, in modo da poterne contattare il proprietario, senza tuttavia essere selezionabile tra quelli su cui agire. Nessun nuovo utente, anche se in possesso dell'ID del server, potr\xe0 aggiungerlo alla propria lista. "),e.k0s())}function Ts(s,n){if(1&s&&(e.j41(0,"div",17),e.EFF(1," Nome: "),e.nrm(2,"a",30),e.nI1(3,"ffuidToLink"),e.k0s()),2&s){const o=n;e.R7$(2),e.Y8G("href",e.bMT(3,2,o.uid),e.B4B)("innerHTML",o.nickname,e.npT)}}function ks(s,n){if(1&s&&(e.j41(0,"li",2)(1,"div",3)(2,"div",4)(3,"div",5),e.nrm(4,"div",6),e.nVh(5,vs,3,0,"div",7),e.nVh(6,Cs,2,0,"div",8),e.k0s(),e.nrm(7,"div",9),e.k0s(),e.nVh(8,bs,3,2,"div",10)(9,xs,13,5,"div",11),e.k0s(),e.nVh(10,Ms,5,0,"div",12),e.j41(11,"div",13)(12,"div",14)(13,"div",15),e.EFF(14,"Proprietario:"),e.k0s(),e.j41(15,"div",16),e.nVh(16,Ts,4,4,"div",17),e.nrm(17,"div",18),e.k0s()(),e.j41(18,"div",19)(19,"div",15),e.EFF(20," Dettagli: "),e.k0s(),e.j41(21,"div",16)(22,"div",17),e.EFF(23," Contatto: "),e.nrm(24,"a",20),e.k0s(),e.j41(25,"div"),e.EFF(26),e.nI1(27,"date"),e.k0s()()()()()),2&s){let o,t;const i=n.$implicit,r=n.$index,a=n.$count,p=e.XpG(2);e.Y8G("ngClass",e.eq3(15,hs,r!==a-1)),e.R7$(4),e.Y8G("innerText",i.name),e.R7$(),e.vxM((null==(o=p.uploadEndpointsService.activeRemote())?null:o.id)===i.id?5:-1),e.R7$(),e.vxM(i.deleted?6:-1),e.R7$(),e.Y8G("innerText",i.address),e.R7$(),e.vxM(i.default?8:9),e.R7$(2),e.vxM(i.deleted&&p.isOwnedType()?10:-1),e.R7$(6),e.vxM((t=i.ownerDetails)?16:-1,t),e.R7$(),e.Y8G("innerHTML","ID: "+i.owner,e.npT),e.R7$(7),e.Y8G("href","mailto:"+i.email,e.B4B)("innerText",i.email),e.R7$(2),e.SpI("Aggiornato: ",e.i5U(27,12,i.lastUpdate,"dd/MM/Y HH:mm"))}}function Ss(s,n){if(1&s&&(e.j41(0,"ul",1),e.Z7z(1,ks,28,17,"li",2,gs),e.k0s()),2&s){const o=e.XpG();e.Y8G("ngClass",e.eq3(1,ps,o.touchDevice)),e.R7$(),e.Dyx(o.remotes())}}let Ps=(()=>{var s;class n{constructor(){this.userService=(0,l.WQX)(cs.D),this.uploadEndpointsService=(0,l.WQX)(Ze.D),this.loading=(0,T.hFB)(!0),this.listType=T.hFB.required(),this.deleteEvent=new e.bkB,this.editEvent=new e.bkB,this.touchDevice=I.CN,this.userListLoading=(0,l.vPA)(!0),this.isOwnedType=(0,te.EW)(()=>this.listType()===De.j.OWNED),this.removeButtonText=(0,te.EW)(()=>this.isOwnedType()?"Elimina":"Rimuovi"),this.remotes=(0,te.EW)(()=>{const t=this.remoteList(),i=this.userList()||{};return t.map(r=>({...r,ownerDetails:i[r.owner]}))}),this.remoteList=(0,te.EW)(()=>this.uploadEndpointsService.remotesList()[this.listType()]),this.userList=(0,It.ot)((0,ds.z)([(0,It.br)(this.loading),(0,It.br)(this.remoteList)]).pipe((0,se.p)(([t])=>!t),(0,Ii.M)(()=>this.userListLoading.set(!0)),(0,tn.n)(([,t])=>this.getUsers(t.map(i=>i.owner))),(0,Ii.M)(()=>this.userListLoading.set(!1))),{initialValue:void 0})}getUsers(t){var i=this;return(0,S.A)(function*(){return t.length?(yield i.userService.getDetailsFromUids(t,!1)).reduce((a,p)=>({...a,[p.uid]:p}),{}):{}})()}selectRemote(t){t.deleted||this.uploadEndpointsService.setActiveRemote(t.id)}static#e=s=()=>(this.\u0275fac=function(i){return new(i||n)},this.\u0275cmp=e.VBU({type:n,selectors:[["app-upload-endpoints-list"]],inputs:{loading:[1,"loading"],listType:[1,"listType"]},outputs:{deleteEvent:"deleteEvent",editEvent:"editEvent"},decls:2,vars:1,consts:[["message","Recupero della lista"],[1,"remotes","list-unstyled","mb-0",3,"ngClass"],[1,"ps-2",3,"ngClass"],[1,"d-flex","align-items-center"],[1,"me-auto","flex-grow-1","d-flex","flex-column","min-w-0"],[1,"fw-bold","text-primary","d-flex","align-items-center"],[1,"text-truncate","mw-100",3,"innerText"],["appTippy","Server selezionato",1,"owner-icon","cursor-pointer","ms-2"],["appTippy","Il proprietario ha disabilitato questo server",1,"cursor-pointer","badge","text-bg-danger","rounded-pill","ms-2"],[1,"small","text-muted","text-truncate","mw-100",3,"innerText"],["appTippy","Predefinito",1,"ms-3","icon",3,"tippyProps"],["ngbDropdown","","display","dynamic","container","body",1,"dropdown-no-caret","ms-3","icon",3,"placement"],[1,"alert","alert-primary","mb-0","small","mt-2","text-justify"],[1,"row","mt-3","pe-2"],[1,"col-12","col-lg-6","mb-3","mb-lg-0"],[1,"bg-light","rounded","py-1","px-2"],[1,"px-2","py-1","small"],[1,"text-truncate","mw-100"],[3,"innerHTML"],[1,"col-12","col-lg-6"],["target","_blank",3,"href","innerText"],[1,"material-icons","d-block"],[1,"material-icons-outlined","d-block","cursor-pointer",3,"click"],["ngbDropdownToggle","",1,"material-icons-outlined","d-block","cursor-pointer","dropdown-toggle"],["ngbDropdownMenu","",1,"list-unstyled","mb-0","dropdown-material-icons","dropdown-menu"],["role","button",1,"dropdown-item","d-flex","align-items-center",3,"cdkCopyToClipboard"],[1,"material-icons-outlined","d-block"],["role","button",1,"dropdown-item","d-flex","align-items-center",3,"click"],["role","button",1,"dropdown-item","d-flex","align-items-center",3,"click","ngClass"],[3,"innerText"],["target","_blank",3,"href","innerHTML"]],template:function(i,r){1&i&&e.nVh(0,fs,1,0,"app-loader",0)(1,Ss,3,3,"ul",1),2&i&&e.vxM(r.loading()||r.userListLoading()?0:1)},dependencies:[v.YU,y.zH,y.tg,y.do,y.U0,ye.dF,G.iZ,pt.V,ls.e,v.vh,Zi.k],styles:[".remotes[_ngcontent-%COMP%]:not(.touch-device)   .icon[_ngcontent-%COMP%]{opacity:.7;transition:opacity .2s}.remotes[_ngcontent-%COMP%]:not(.touch-device)   .icon[_ngcontent-%COMP%]:hover{opacity:1}.owner-icon[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:16px}"],changeDetection:0}))}return s(),n})();function Rs(s,n){1&s&&(e.j41(0,"div",10),l.qSk(),e.j41(1,"svg",12),e.nrm(2,"path",13)(3,"rect",14)(4,"circle",15)(5,"circle",16)(6,"circle",17)(7,"path",18)(8,"rect",19)(9,"circle",20)(10,"circle",21)(11,"circle",22)(12,"path",23)(13,"rect",24)(14,"circle",25)(15,"circle",26)(16,"circle",27),e.k0s(),l.joV(),e.j41(17,"div",28)(18,"p",29)(19,"strong"),e.EFF(20,"Nessun server inserito!"),e.k0s()(),e.j41(21,"p",29),e.EFF(22,"Usa l'apposito pulsante per aggiungere il tuo server."),e.k0s()()())}function ws(s,n){if(1&s){const o=e.RV6();e.j41(0,"app-upload-endpoints-list",30),e.bIt("editEvent",function(i){l.eBV(o);const r=e.XpG(2);return l.Njj(r.editEvent.emit(i))})("deleteEvent",function(i){l.eBV(o);const r=e.XpG(2);return l.Njj(r.deleteEvent.emit(i))}),e.k0s()}if(2&s){const o=e.XpG(2);e.Y8G("loading",o.loading())("listType",o.listTypes.OWNED)}}function Os(s,n){if(1&s&&(e.j41(0,"div")(1,"p",9),e.EFF(2," La lista "),e.j41(3,"em"),e.EFF(4,"I miei server"),e.k0s(),e.EFF(5," mostra tutti i server di cui si \xe8 proprietari e che sono stati aggiunti tramite l'apposito form. Cliccando sui tre puntini verticali di fianco al nome del server, sono disponibili le opzioni per "),e.j41(6,"strong"),e.EFF(7,"copiare l'ID"),e.k0s(),e.EFF(8," del server, "),e.j41(9,"strong"),e.EFF(10,"modificarne i dati"),e.k0s(),e.EFF(11," o "),e.j41(12,"strong"),e.EFF(13,"eliminarlo"),e.k0s(),e.EFF(14,". Con il pulsante "),e.j41(15,"em"),e.EFF(16,"Nuovo"),e.k0s(),e.EFF(17," in basso a destra nel modal, si pu\xf2 aggiungere un nuovo server. "),e.k0s(),e.nVh(18,Rs,23,0,"div",10)(19,ws,1,2,"app-upload-endpoints-list",11),e.k0s()),2&s){const o=e.XpG();e.R7$(18),e.vxM(0===o.uploadEndpointsService.remotesList().owned.length?18:19)}}function Is(s,n){if(1&s){const o=e.RV6();e.j41(0,"div")(1,"p",9),e.EFF(2," La lista "),e.j41(3,"em"),e.EFF(4,"Server aggiunti"),e.k0s(),e.EFF(5," contiene l'elenco dei server "),e.j41(6,"strong"),e.EFF(7,"appartenenti a terzi"),e.k0s(),e.EFF(8," che sono stati inseriti tramite ID. Per ogni server \xe8 possibile "),e.j41(9,"strong"),e.EFF(10,"contattarne il proprietario"),e.k0s(),e.EFF(11," mediante il link al suo profilo, per inviare un "),e.j41(12,"strong"),e.EFF(13,"MP"),e.k0s(),e.EFF(14,", oppure tramite l'"),e.j41(15,"strong"),e.EFF(16,"email"),e.k0s(),e.EFF(17," fornita dal proprietario stesso. Ad eccezione dei predefiniti, inseriti di default a tutti, cliccando sui tre puntini verticali di fianco al nome del server, diviene possibile "),e.j41(18,"strong"),e.EFF(19,"copiare l'ID"),e.k0s(),e.EFF(20," del server o "),e.j41(21,"strong"),e.EFF(22,"togliere"),e.k0s(),e.EFF(23," il server dalla lista. Con il pulsante "),e.j41(24,"em"),e.EFF(25,"Nuovo"),e.k0s(),e.EFF(26," in basso a destra nel modal, si pu\xf2 aggiungere un nuovo server. "),e.k0s(),e.j41(27,"app-upload-endpoints-list",31),e.bIt("deleteEvent",function(i){l.eBV(o);const r=e.XpG();return l.Njj(r.unlinkEvent.emit(i))}),e.k0s()()}if(2&s){const o=e.XpG();e.R7$(27),e.Y8G("loading",o.loading())("listType",o.listTypes.LINKED)}}let Ds=(()=>{var s;class n{constructor(){this.uploadEndpointsService=(0,l.WQX)(Ze.D),this.loading=(0,T.hFB)(!0),this.deleteEvent=new e.bkB,this.editEvent=new e.bkB,this.unlinkEvent=new e.bkB,this.activeList=De.j.OWNED,this.listTypes=De.j}ngOnInit(){this.activeList=this.uploadEndpointsService.lastListSelected||(0===this.uploadEndpointsService.remotesList().owned.length?De.j.LINKED:De.j.OWNED),this.uploadEndpointsService.lastListSelected||this.saveLastActiveList()}saveLastActiveList(){this.uploadEndpointsService.lastListSelected=this.activeList}static#e=s=()=>(this.\u0275fac=function(i){return new(i||n)},this.\u0275cmp=e.VBU({type:n,selectors:[["app-upload-endpoints-list-wrapper"]],inputs:{loading:[1,"loading"]},outputs:{deleteEvent:"deleteEvent",editEvent:"editEvent",unlinkEvent:"unlinkEvent"},decls:14,vars:7,consts:[["nav","ngbNav"],[1,"mb-3","text-justify"],[1,"my-4","d-flex","justify-content-center"],[1,"btn","btn-sm",3,"click","ngClass"],[1,"btn","btn-sm","mx-2",3,"click","ngClass"],["ngbNav","",1,"mb-0","list-unstyled","d-none",3,"activeIdChange","activeId","destroyOnHide"],[3,"ngbNavItem"],["ngbNavContent",""],[3,"ngbNavOutlet"],[1,"text-justify","mb-3"],[1,"text-center","mt-4"],[3,"loading","listType"],["xmlns","http://www.w3.org/2000/svg","width","150","height","150","viewBox","458.8734130859375 250 280.2471923828125 331.2012939453125",0,"xmlns","xlink","http://www.w3.org/1999/xlink","role","img"],["d","M858.65906,513.48057H594.33494a7.97081,7.97081,0,0,1-7.96157-7.96157V416.34942a7.97081,7.97081,0,0,1,7.96157-7.96157H858.65906a7.9707,7.9707,0,0,1,7.96157,7.96157V505.519A7.9707,7.9707,0,0,1,858.65906,513.48057Z","transform","translate(-127.5 -158.38785)","fill","#f1f1f1"],["x","500.27353","y","273.88471","width","70.06181","height","7.96157","fill","currentColor"],["cx","662.68956","cy","278.66165","r","4.77694","fill","currentColor"],["cx","678.6127","cy","278.66165","r","4.77694","fill","currentColor"],["cx","694.53583","cy","278.66165","r","4.77694","fill","currentColor"],["d","M858.65906,626.53486H594.33494a7.97081,7.97081,0,0,1-7.96157-7.96157V529.40371a7.97081,7.97081,0,0,1,7.96157-7.96157H858.65906a7.9707,7.9707,0,0,1,7.96157,7.96157v89.16958A7.9707,7.9707,0,0,1,858.65906,626.53486Z","transform","translate(-127.5 -158.38785)","fill","#f1f1f1"],["x","500.27353","y","386.939","width","70.06181","height","7.96157","fill","currentColor"],["cx","662.68956","cy","391.71594","r","4.77694","fill","currentColor"],["cx","678.6127","cy","391.71594","r","4.77694","fill","currentColor"],["cx","694.53583","cy","391.71594","r","4.77694","fill","currentColor"],["d","M858.65906,739.58915H594.33494a7.97081,7.97081,0,0,1-7.96157-7.96156V642.458a7.97081,7.97081,0,0,1,7.96157-7.96157H858.65906a7.9707,7.9707,0,0,1,7.96157,7.96157v89.16959A7.97069,7.97069,0,0,1,858.65906,739.58915Z","transform","translate(-127.5 -158.38785)","fill","#f1f1f1"],["x","500.27353","y","499.99329","width","70.06181","height","7.96157","fill","currentColor"],["cx","662.68956","cy","504.77024","r","4.77694","fill","currentColor"],["cx","678.6127","cy","504.77024","r","4.77694","fill","currentColor"],["cx","694.53583","cy","504.77024","r","4.77694","fill","currentColor"],[1,"small","mt-2"],[1,"mb-0"],[3,"editEvent","deleteEvent","loading","listType"],[1,"d-block",3,"deleteEvent","loading","listType"]],template:function(i,r){if(1&i){const a=e.RV6();e.j41(0,"p",1),e.EFF(1," Tramite le liste server \xe8 possibile visualizzare e gestire i server attualmente associati all'account loggato.\n"),e.k0s(),e.j41(2,"div",2)(3,"button",3),e.bIt("click",function(){l.eBV(a);const m=e.sdS(8);return l.Njj(m.select(r.listTypes.OWNED))}),e.EFF(4,"I miei server"),e.k0s(),e.j41(5,"button",4),e.bIt("click",function(){l.eBV(a);const m=e.sdS(8);return l.Njj(m.select(r.listTypes.LINKED))}),e.EFF(6,"Server aggiunti"),e.k0s()(),e.j41(7,"ul",5,0),e.mxI("activeIdChange",function(m){return l.eBV(a),e.DH7(r.activeList,m)||(r.activeList=m),l.Njj(m)}),e.bIt("activeIdChange",function(){return l.eBV(a),l.Njj(r.saveLastActiveList())}),e.j41(9,"li",6),e.DNE(10,Os,20,1,"ng-template",7),e.k0s(),e.j41(11,"li",6),e.DNE(12,Is,28,2,"ng-template",7),e.k0s()(),e.nrm(13,"div",8)}if(2&i){const a=e.sdS(8);e.R7$(3),e.Y8G("ngClass",r.activeList===r.listTypes.OWNED?"btn-primary":"btn-outline-primary"),e.R7$(2),e.Y8G("ngClass",r.activeList===r.listTypes.LINKED?"btn-primary":"btn-outline-primary"),e.R7$(2),e.R50("activeId",r.activeList),e.Y8G("destroyOnHide",!0),e.R7$(2),e.Y8G("ngbNavItem",r.listTypes.OWNED),e.R7$(2),e.Y8G("ngbNavItem",r.listTypes.LINKED),e.R7$(2),e.Y8G("ngbNavOutlet",a)}},dependencies:[y.Pv,y.Um,y.X9,y.sy,y.Gx,y.m_,v.YU,Ps],styles:["svg[_ngcontent-%COMP%]{opacity:.7;max-width:100%}"],changeDetection:0}))}return s(),n})();var js=_(8967),Ls=_(4273);const Ns=["uploadRemotesModal"],Us=s=>({"pb-0":s});function As(s,n){if(1&s){const o=e.RV6();e.j41(0,"app-upload-endpoints-list-wrapper",6),e.bIt("deleteEvent",function(i){l.eBV(o);const r=e.XpG(3);return l.Njj(r.listEvent(i,r.listTypes.OWNED,r.buttonActions.DELETE))})("editEvent",function(i){l.eBV(o);const r=e.XpG(3);return l.Njj(r.listEvent(i,r.listTypes.OWNED,r.buttonActions.SAVE))})("unlinkEvent",function(i){l.eBV(o);const r=e.XpG(3);return l.Njj(r.listEvent(i,r.listTypes.LINKED,r.buttonActions.DELETE))}),e.k0s()}if(2&s){const o=e.XpG(3);e.Y8G("loading",o.loading())}}function zs(s,n){if(1&s){const o=e.RV6();e.j41(0,"app-upload-endpoints-delete",8),e.bIt("confirmationEvent",function(i){l.eBV(o);const r=e.XpG(4);return l.Njj(r.deleteButtonEnabled.set(i))}),e.k0s()}if(2&s){const o=e.XpG(4);e.Y8G("remote",n)("type",o.currentRemoteType())}}function Gs(s,n){if(1&s&&e.nVh(0,zs,1,2,"app-upload-endpoints-delete",7),2&s){let o;const t=e.XpG(3);e.vxM((o=t.currentRemote())?0:-1,o)}}function Vs(s,n){if(1&s){const o=e.RV6();e.j41(0,"app-upload-endpoints-form",9),e.bIt("validityChange",function(i){l.eBV(o);const r=e.XpG(3);return l.Njj(r.saveButtonEnabled.set(i))})("saveRemoteEvent",function(i){l.eBV(o);const r=e.XpG(3);return l.Njj(r.saveRemote(i))}),e.k0s()}if(2&s){const o=e.XpG(3);e.Y8G("remoteId",o.currentRemoteId())("remote",o.currentRemote())("saveObservable",o.buttonSaveSubject)}}function Bs(s,n){if(1&s&&e.nVh(0,As,1,1,"app-upload-endpoints-list-wrapper",4)(1,Gs,1,1)(2,Vs,1,3,"app-upload-endpoints-form",5),2&s){const o=e.XpG(2);e.vxM(o.currentAction()===o.buttonActions.ADD?0:o.currentAction()===o.buttonActions.DELETE?1:2)}}function Xs(s,n){if(1&s&&e.nVh(0,Bs,3,1),2&s){const o=e.XpG();e.vxM(o.isModalOpened()?0:-1)}}function $s(s,n){if(1&s){const o=e.RV6();e.j41(0,"button",10),e.bIt("click",function(){l.eBV(o);const i=e.XpG();return l.Njj(i.secondaryButtonClick())}),e.k0s(),e.j41(1,"button",11),e.bIt("click",function(){l.eBV(o);const i=e.XpG();return l.Njj(i.primaryButtonClick())}),e.k0s()}if(2&s){const o=e.XpG();e.Y8G("innerText",o.buttonTexts().secondary),e.R7$(),e.Y8G("ngClass",o.currentAction()===o.buttonActions.DELETE?"btn-danger":"btn-primary")("innerText",o.buttonTexts().primary)("disabled",o.buttonDisabled())}}var J=function(s){return s.SAVE="save",s.ADD="add",s.DELETE="delete",s}(J||{});let Hs=(()=>{var s;class n{constructor(){this.uploadEndpointsService=(0,l.WQX)(Ze.D),this.uploadObservablesService=(0,l.WQX)(ie.f),this.toastService=(0,l.WQX)(de.f),this.modalsService=(0,l.WQX)(js.M),this.loading=(0,l.vPA)(!1),this.isModalOpened=(0,l.vPA)(!1),this.saveButtonEnabled=(0,l.vPA)(!1),this.deleteButtonEnabled=(0,l.vPA)(!1),this.buttonSaveSubject=new k.B,this.currentAction=(0,l.vPA)(J.ADD),this.buttonTexts=(0,te.EW)(()=>{switch(this.currentAction()){case J.ADD:return{primary:"Nuovo",secondary:"Chiudi"};case J.SAVE:return{primary:"Salva",secondary:"Annulla"};case J.DELETE:return{primary:"Elimina",secondary:"Annulla"}}}),this.buttonActions=J,this.listTypes=De.j,this.buttonDisabled=(0,te.EW)(()=>{const t=this.currentAction(),i=this.saveButtonEnabled(),r=this.deleteButtonEnabled();return this.loading()||t===J.SAVE&&!i||t===J.DELETE&&!r}),this.currentRemoteId=(0,l.vPA)(void 0),this.currentRemoteType=(0,l.vPA)(void 0),this.currentRemote=(0,te.EW)(()=>{const t=this.currentRemoteType();if(!t)return;const i=this.currentRemoteId();return i?this.uploadEndpointsService.remotesList()[t].find(r=>r.id===i):void 0}),this.uploadObservablesService.remoteFormObservable.pipe((0,It.pQ)()).subscribe(t=>{t&&(this.currentAction.set(J.SAVE),this.currentRemoteId.set(t),this.saveButtonEnabled.set(en(t)),this.open(!1))})}ngAfterViewInit(){this.modalsService.openFromUrlQueryParam(Ls.O.UPLOAD_ENDPOINTS,void 0,()=>this.open(!1)),this.currentAction()===J.SAVE&&this.open(!1)}open(t=!0){this.remotesModal&&(t&&this.resetAction(),this.isModalOpened.set(!0),this.remotesModal.open())}primaryButtonClick(){var t=this;return(0,S.A)(function*(){const i=t.currentAction();if(i!==J.ADD){if(i===J.DELETE){const r=t.currentRemote()?.id,a=t.currentRemoteType();return r&&a?void(yield t.removeRemote(r,a)):void t.toastService.show({content:"Nessun server selezionato!",level:$.A.ERROR})}i===J.SAVE&&t.saveButtonEnabled()&&t.buttonSaveSubject.next()}else t.setCurrentAction(J.SAVE)})()}removeRemote(t,i){var r=this;return(0,S.A)(function*(){r.loading.set(!0),r.resetAction(),(i===De.j.LINKED?yield r.uploadEndpointsService.unlinkRemote(t):yield r.uploadEndpointsService.deleteRemote(t))||r.toastService.show({content:"Errore nella rimozione del server!",level:$.A.ERROR}),r.loading.set(!1)})()}saveRemote(t){var i=this;return(0,S.A)(function*(){i.loading.set(!0),i.resetAction();let r=!1;if(function Jo(s){return"object"==typeof s&&null!==s&&(0,Oi.l$)(s,"email")}(t)){const a=yield i.uploadEndpointsService.upsertRemote(t.name,t.address,t.email,t.id);r=void 0!==a,a&&t.selectAfterAdd&&i.uploadEndpointsService.setActiveRemote(a)}else{if(i.uploadEndpointsService.remotesList().linked.findIndex(a=>a.id===t.id)>-1)return i.toastService.show({content:"Questo server \xe8 gi\xe0 nella lista!"}),void i.loading.set(!1);r=yield i.uploadEndpointsService.linkRemote(t.id),t.selectAfterAdd&&r&&i.uploadEndpointsService.setActiveRemote(t.id)}r||i.toastService.show({content:"Errore nell'inserimento server!",level:$.A.ERROR}),i.loading.set(!1)})()}secondaryButtonClick(){this.currentAction()===J.ADD?this.remotesModal?.close():this.resetAction()}resetAction(){this.setCurrentAction(J.ADD),this.currentRemoteType.set(void 0),this.currentRemoteId.set(void 0),this.saveButtonEnabled.set(!1),this.deleteButtonEnabled.set(!1)}setCurrentAction(t){this.currentAction.set(t),this.remotesModal?.scrollBodyToTop()}listEvent(t,i,r){this.currentRemoteType.set(i),this.currentRemoteId.set(t),this.setCurrentAction(r)}static#e=s=()=>(this.\u0275fac=function(i){return new(i||n)},this.\u0275cmp=e.VBU({type:n,selectors:[["app-upload-endpoints-manager"]],viewQuery:function(i,r){if(1&i&&e.GBs(Ns,5),2&i){let a;e.mGM(a=e.lsd())&&(r.remotesModal=a.first)}},decls:4,vars:4,consts:[["uploadRemotesModal",""],["title","Gestione server di upload",3,"hidden","disableCloseButton","bodyClass"],["appModalBody",""],["appModalFooter",""],[3,"loading"],[3,"remoteId","remote","saveObservable"],[3,"deleteEvent","editEvent","unlinkEvent","loading"],[3,"remote","type"],[3,"confirmationEvent","remote","type"],[3,"validityChange","saveRemoteEvent","remoteId","remote","saveObservable"],[1,"btn","btn-secondary",3,"click","innerText"],[1,"btn",3,"click","ngClass","innerText","disabled"]],template:function(i,r){if(1&i){const a=e.RV6();e.j41(0,"app-modal",1,0),e.bIt("hidden",function(){return l.eBV(a),l.Njj(r.isModalOpened.set(!1))}),e.DNE(2,Xs,1,1,"ng-template",2)(3,$s,2,4,"ng-template",3),e.k0s()}2&i&&e.Y8G("disableCloseButton",!0)("bodyClass",e.eq3(2,Us,r.currentAction()===r.buttonActions.SAVE))},dependencies:[q.Q,Z.z,fe.d,Xe.I,Ds,v.YU,qo,as],encapsulation:2,changeDetection:0}))}return s(),n})();const Ys=s=>({"cursor-pointer":s}),Ws=(s,n)=>n.id;function Qs(s,n){if(1&s&&(e.j41(0,"option",5),e.EFF(1),e.k0s()),2&s){const o=n.$implicit,t=n.$index,i=e.XpG();e.Y8G("value",t)("selected",o.id===i.uploadEndpointsService.activeRemoteId())("disabled",o.deleted),e.R7$(),e.JRh(o.name)}}let nn=(()=>{var s;class n{constructor(){this.uploadEndpointsService=(0,l.WQX)(Ze.D),this.fileLoading=(0,T.hFB)(!0)}setRemote(t){const i=this.uploadEndpointsService.remotesList().linked[Number(t)];i&&!i.deleted&&this.uploadEndpointsService.setActiveRemote(i.id)}static#e=s=()=>(this.\u0275fac=function(i){return new(i||n)},this.\u0275cmp=e.VBU({type:n,selectors:[["app-upload-endpoints"]],inputs:{fileLoading:[1,"fileLoading"]},decls:12,vars:4,consts:[["remoteSelect",""],["modal",""],[1,"input-group"],["for","upload-endpoints-select",1,"input-group-text"],["id","upload-endpoints-select",1,"form-select",3,"change","disabled"],[3,"value","selected","disabled"],[1,"input-group-text","text-muted","cursor-pointer",3,"click","ngClass"],[1,"material-icons-outlined","d-block"]],template:function(i,r){if(1&i){const a=e.RV6();e.j41(0,"div",2)(1,"label",3),e.EFF(2,"Server:"),e.k0s(),e.j41(3,"select",4,0),e.bIt("change",function(){l.eBV(a);const m=e.sdS(4);return l.Njj(r.setRemote(m.value))}),e.Z7z(5,Qs,2,4,"option",5,Ws),e.k0s(),e.j41(7,"div",6),e.bIt("click",function(){l.eBV(a);const m=e.sdS(11);return l.Njj(!r.fileLoading()&&m.open())}),e.j41(8,"span",7),e.EFF(9,"edit"),e.k0s()()(),e.nrm(10,"app-upload-endpoints-manager",null,1)}2&i&&(e.R7$(3),e.Y8G("disabled",r.fileLoading()),e.R7$(2),e.Dyx(r.uploadEndpointsService.remotesList().linked),e.R7$(2),e.Y8G("ngClass",e.eq3(2,Ys,!r.fileLoading())))},dependencies:[Hs,v.YU],styles:[".input-group[_ngcontent-%COMP%]{box-shadow:0 .125rem .25rem #00000013}@media (min-width: 960px){.input-group[_ngcontent-%COMP%]{margin-top:1.5rem}}"],changeDetection:0}))}return s(),n})();var qs=_(1459),on=_(1946),Ks=_(1833);const Zs=s=>({disabled:s});let sn=(()=>{var s;class n{constructor(t,i,r){this.uploadObservalesService=t,this.toastService=i,this.proxyService=r,this.isSelected=!1,this.actionNames=C.SP,this.canBeCropped=!0}ngOnInit(){this.canBeCropped=(0,j.GR)(this.file.ext)}pushAction(t){this.uploadObservalesService.pushAction({name:t,payload:{entities:(0,j.L6)([this.file])}})}pushSelectedFile(){this.dropdownRef.close(),this.uploadObservalesService.pushSelectedFile({name:this.file.name,selected:!this.isSelected})}downloadFile(){var t=this;return(0,S.A)(function*(){t.dropdownRef.close(),t.uploadObservalesService.pushEntityPending([{type:C.OE.FILE,name:t.file.name,start:!0}]);const i=yield t.proxyService.get(t.file.embedUrl);if(i){const r=URL.createObjectURL(i),a=document.createElement("a");a.href=r,a.download=t.file.name,a.click()}else t.toastService.show({content:`Errore nel download del file <strong>${t.file.name}</strong>!`,level:$.A.ERROR});t.uploadObservalesService.pushEntityPending([{type:C.OE.FILE,name:t.file.name,start:!1}])})()}static#e=s=()=>(this.\u0275fac=function(i){return new(i||n)(e.rXU(ie.f),e.rXU(de.f),e.rXU(Ks.U))},this.\u0275cmp=e.VBU({type:n,selectors:[["app-upload-file-menu"]],inputs:{file:"file",isSelected:"isSelected",dropdownRef:"dropdownRef"},standalone:!1,decls:43,vars:5,consts:[[1,"list-unstyled","mb-0","dropdown-material-icons"],["role","button",1,"dropdown-item","d-flex","align-items-center",3,"click"],[1,"material-icons-outlined","d-block"],["role","button",1,"dropdown-item","d-flex","align-items-center",3,"click","ngClass"],[1,"material-icons-outlined","d-block",3,"innerText"],[3,"innerText"],[1,"dropdown-divider"]],template:function(i,r){1&i&&(e.j41(0,"ul",0)(1,"li")(2,"a",1),e.bIt("click",function(){return r.pushAction(r.actionNames.FILE_SHOW_LINKS)}),e.j41(3,"div",2),e.EFF(4,"construction"),e.k0s(),e.j41(5,"div"),e.EFF(6,"Codici"),e.k0s()()(),e.j41(7,"li")(8,"a",1),e.bIt("click",function(){return r.downloadFile()}),e.j41(9,"div",2),e.EFF(10,"file_download"),e.k0s(),e.j41(11,"div"),e.EFF(12,"Scarica"),e.k0s()()(),e.j41(13,"li")(14,"a",1),e.bIt("click",function(){return r.pushAction(r.actionNames.MOVE)}),e.j41(15,"div",2),e.EFF(16,"drive_file_move"),e.k0s(),e.j41(17,"div"),e.EFF(18,"Sposta"),e.k0s()()(),e.j41(19,"li")(20,"a",1),e.bIt("click",function(){return r.pushAction(r.actionNames.RENAME)}),e.j41(21,"div",2),e.EFF(22," drive_file_rename_outline "),e.k0s(),e.j41(23,"div"),e.EFF(24,"Rinomina"),e.k0s()()(),e.j41(25,"li")(26,"a",3),e.bIt("click",function(){return r.pushAction(r.actionNames.FILE_EDIT)}),e.j41(27,"div",2),e.EFF(28,"transform"),e.k0s(),e.j41(29,"div"),e.EFF(30,"Modifica"),e.k0s()()(),e.j41(31,"li")(32,"a",1),e.bIt("click",function(){return r.pushSelectedFile()}),e.nrm(33,"div",4)(34,"div",5),e.k0s()(),e.j41(35,"li"),e.nrm(36,"hr",6),e.k0s(),e.j41(37,"li")(38,"a",1),e.bIt("click",function(){return r.pushAction(r.actionNames.DELETE)}),e.j41(39,"div",2),e.EFF(40,"delete"),e.k0s(),e.j41(41,"div"),e.EFF(42,"Elimina"),e.k0s()()()()),2&i&&(e.R7$(26),e.Y8G("ngClass",e.eq3(3,Zs,!r.canBeCropped)),e.R7$(7),e.Y8G("innerText",r.isSelected?"unpublished":"check_circle_outline"),e.R7$(),e.Y8G("innerText",r.isSelected?"Deseleziona":"Seleziona"))},dependencies:[v.YU],encapsulation:2}))}return s(),n})(),Js=(()=>{var s;class n{static#e=s=()=>(this.\u0275fac=function(i){return new(i||n)},this.\u0275cmp=e.VBU({type:n,selectors:[["app-upload-all-file-filtered"]],standalone:!1,decls:17,vars:0,consts:[[1,"pt-3","px-2","text-center","empty-filtered-list"],["xmlns","http://www.w3.org/2000/svg","width","161.909065","height","158.04346","viewBox","0 0 647.63626 632.17383",1,"p-1","overflow-visible"],["d","M687.3279,276.08691H512.81813a15.01828,15.01828,0,0,0-15,15v387.85l-2,.61005-42.81006,13.11a8.00676,8.00676,0,0,1-9.98974-5.31L315.678,271.39691a8.00313,8.00313,0,0,1,5.31006-9.99l65.97022-20.2,191.25-58.54,65.96972-20.2a7.98927,7.98927,0,0,1,9.99024,5.3l32.5498,106.32Z","transform","translate(-276.18187 -133.91309)","fill","#f2f2f2"],["d","M725.408,274.08691l-39.23-128.14a16.99368,16.99368,0,0,0-21.23-11.28l-92.75,28.39L380.95827,221.60693l-92.75,28.4a17.0152,17.0152,0,0,0-11.28028,21.23l134.08008,437.93a17.02661,17.02661,0,0,0,16.26026,12.03,16.78926,16.78926,0,0,0,4.96972-.75l63.58008-19.46,2-.62v-2.09l-2,.61-64.16992,19.65a15.01489,15.01489,0,0,1-18.73-9.95l-134.06983-437.94a14.97935,14.97935,0,0,1,9.94971-18.73l92.75-28.4,191.24024-58.54,92.75-28.4a15.15551,15.15551,0,0,1,4.40966-.66,15.01461,15.01461,0,0,1,14.32032,10.61l39.0498,127.56.62012,2h2.08008Z","transform","translate(-276.18187 -133.91309)","fill","#3f3d56"],["d","M398.86279,261.73389a9.0157,9.0157,0,0,1-8.61133-6.3667l-12.88037-42.07178a8.99884,8.99884,0,0,1,5.9712-11.24023l175.939-53.86377a9.00867,9.00867,0,0,1,11.24072,5.9707l12.88037,42.07227a9.01029,9.01029,0,0,1-5.9707,11.24072L401.49219,261.33887A8.976,8.976,0,0,1,398.86279,261.73389Z","transform","translate(-276.18187 -133.91309)","fill","#565656"],["cx","190.15351","cy","24.95465","r","20","fill","#565656"],["cx","190.15351","cy","24.95465","r","12.66462","fill","#fff"],["d","M878.81836,716.08691h-338a8.50981,8.50981,0,0,1-8.5-8.5v-405a8.50951,8.50951,0,0,1,8.5-8.5h338a8.50982,8.50982,0,0,1,8.5,8.5v405A8.51013,8.51013,0,0,1,878.81836,716.08691Z","transform","translate(-276.18187 -133.91309)","fill","#e6e6e6"],["d","M723.31813,274.08691h-210.5a17.02411,17.02411,0,0,0-17,17v407.8l2-.61v-407.19a15.01828,15.01828,0,0,1,15-15H723.93825Zm183.5,0h-394a17.02411,17.02411,0,0,0-17,17v458a17.0241,17.0241,0,0,0,17,17h394a17.0241,17.0241,0,0,0,17-17v-458A17.02411,17.02411,0,0,0,906.81813,274.08691Zm15,475a15.01828,15.01828,0,0,1-15,15h-394a15.01828,15.01828,0,0,1-15-15v-458a15.01828,15.01828,0,0,1,15-15h394a15.01828,15.01828,0,0,1,15,15Z","transform","translate(-276.18187 -133.91309)","fill","#3f3d56"],["d","M801.81836,318.08691h-184a9.01015,9.01015,0,0,1-9-9v-44a9.01016,9.01016,0,0,1,9-9h184a9.01016,9.01016,0,0,1,9,9v44A9.01015,9.01015,0,0,1,801.81836,318.08691Z","transform","translate(-276.18187 -133.91309)","fill","#565656"],["cx","433.63626","cy","105.17383","r","20","fill","#565656"],["cx","433.63626","cy","105.17383","r","12.18187","fill","#fff"],[1,"mt-2"],[1,"text-muted"]],template:function(i,r){1&i&&(e.j41(0,"div",0),l.qSk(),e.j41(1,"svg",1),e.nrm(2,"path",2)(3,"path",3)(4,"path",4)(5,"circle",5)(6,"circle",6)(7,"path",7)(8,"path",8)(9,"path",9)(10,"circle",10)(11,"circle",11),e.k0s(),l.joV(),e.j41(12,"div",12)(13,"strong"),e.EFF(14,"Nessun elemento trovato!"),e.k0s()(),e.j41(15,"div",13),e.EFF(16," Prova a modificare le parole chiave da cercare. "),e.k0s()())},styles:["svg[_ngcontent-%COMP%]{opacity:.5}"]}))}return s(),n})(),er=(()=>{var s;class n{constructor(t){this.uploadObservablesService=t}startUpload(){this.uploadObservablesService.pushStartUpload()}static#e=s=()=>(this.\u0275fac=function(i){return new(i||n)(e.rXU(ie.f))},this.\u0275cmp=e.VBU({type:n,selectors:[["app-upload-empty-file-list"]],standalone:!1,decls:7,vars:0,consts:[[1,"text-center","py-2","px-2"],[1,"text-muted"],[1,"mb-3"],[1,"btn","btn-primary",3,"click"]],template:function(i,r){1&i&&(e.j41(0,"div",0)(1,"div",1),e.EFF(2,"Nessun file caricato!"),e.k0s(),e.j41(3,"div",2),e.EFF(4," Puoi iniziare l'upload di un nuovo file tramite il pulsante sottostante. "),e.k0s(),e.j41(5,"button",3),e.bIt("click",function(){return r.startUpload()}),e.EFF(6,"Carica!"),e.k0s()())},encapsulation:2}))}return s(),n})();var rn=_(2625),tr=_(4330),Dt=_(8359),ir=_(605),nr=_(536),an=_(1985),or=_(4412),et=_(4522),ln=_(5735),Re=_(7847),sr=_(6354),rr=_(6697),cn=_(9172),ar=_(8968),Ce=_(9944),dn=_(1577),lr=_(9726),cr=_(408);function Di(s){const n=s.cloneNode(!0),o=n.querySelectorAll("[id]"),t=s.nodeName.toLowerCase();n.removeAttribute("id");for(let i=0;i<o.length;i++)o[i].removeAttribute("id");return"canvas"===t?mn(s,n):("input"===t||"select"===t||"textarea"===t)&&hn(s,n),pn("canvas",s,n,mn),pn("input, textarea, select",s,n,hn),n}function pn(s,n,o,t){const i=n.querySelectorAll(s);if(i.length){const r=o.querySelectorAll(s);for(let a=0;a<i.length;a++)t(i[a],r[a])}}let dr=0;function hn(s,n){"file"!==n.type&&(n.value=s.value),"radio"===n.type&&n.name&&(n.name=`mat-clone-${n.name}-${dr++}`)}function mn(s,n){const o=n.getContext("2d");if(o)try{o.drawImage(s,0,0)}catch{}}function ji(s){const n=s.getBoundingClientRect();return{top:n.top,right:n.right,bottom:n.bottom,left:n.left,width:n.width,height:n.height,x:n.x,y:n.y}}function Li(s,n,o){const{top:t,bottom:i,left:r,right:a}=s;return o>=t&&o<=i&&n>=r&&n<=a}function jt(s,n,o){s.top+=n,s.bottom=s.top+s.height,s.left+=o,s.right=s.left+s.width}function un(s,n,o,t){const{top:i,right:r,bottom:a,left:p,width:m,height:f}=s,F=m*n,P=f*n;return t>i-P&&t<a+P&&o>p-F&&o<r+F}class _n{_document;positions=new Map;constructor(n){this._document=n}clear(){this.positions.clear()}cache(n){this.clear(),this.positions.set(this._document,{scrollPosition:this.getViewportScrollPosition()}),n.forEach(o=>{this.positions.set(o,{scrollPosition:{top:o.scrollTop,left:o.scrollLeft},clientRect:ji(o)})})}handleScroll(n){const o=(0,et.Fb)(n),t=this.positions.get(o);if(!t)return null;const i=t.scrollPosition;let r,a;if(o===this._document){const f=this.getViewportScrollPosition();r=f.top,a=f.left}else r=o.scrollTop,a=o.scrollLeft;const p=i.top-r,m=i.left-a;return this.positions.forEach((f,F)=>{f.clientRect&&o!==F&&o.contains(F)&&jt(f.clientRect,p,m)}),i.top=r,i.left=a,{top:p,left:m}}getViewportScrollPosition(){return{top:window.scrollY,left:window.scrollX}}}function gn(s,n){const o=s.rootNodes;if(1===o.length&&o[0].nodeType===n.ELEMENT_NODE)return o[0];const t=n.createElement("div");return o.forEach(i=>t.appendChild(i)),t}function Ni(s,n,o){for(let t in n)if(n.hasOwnProperty(t)){const i=n[t];i?s.setProperty(t,i,o?.has(t)?"important":""):s.removeProperty(t)}return s}function gt(s,n){const o=n?"":"none";Ni(s.style,{"touch-action":n?"":"none","-webkit-user-drag":n?"":"none","-webkit-tap-highlight-color":n?"":"transparent","user-select":o,"-ms-user-select":o,"-webkit-user-select":o,"-moz-user-select":o})}function fn(s,n,o){Ni(s.style,{position:n?"":"fixed",top:n?"":"0",opacity:n?"":"0",left:n?"":"-999em"},o)}function di(s,n){return n&&"none"!=n?s+" "+n:s}function vn(s,n){s.style.width=`${n.width}px`,s.style.height=`${n.height}px`,s.style.transform=Lt(n.left,n.top)}function Lt(s,n){return`translate3d(${Math.round(s)}px, ${Math.round(n)}px, 0)`}function Cn(s){const n=s.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(s)*n}function Ui(s,n){return s.getPropertyValue(n).split(",").map(t=>t.trim())}const mr=new Set(["position"]);class ur{_document;_rootElement;_direction;_initialDomRect;_previewTemplate;_previewClass;_pickupPositionOnPage;_initialTransform;_zIndex;_renderer;_previewEmbeddedView;_preview;get element(){return this._preview}constructor(n,o,t,i,r,a,p,m,f,F){this._document=n,this._rootElement=o,this._direction=t,this._initialDomRect=i,this._previewTemplate=r,this._previewClass=a,this._pickupPositionOnPage=p,this._initialTransform=m,this._zIndex=f,this._renderer=F}attach(n){this._preview=this._createPreview(),n.appendChild(this._preview),bn(this._preview)&&this._preview.showPopover()}destroy(){this._preview.remove(),this._previewEmbeddedView?.destroy(),this._preview=this._previewEmbeddedView=null}setTransform(n){this._preview.style.transform=n}getBoundingClientRect(){return this._preview.getBoundingClientRect()}addClass(n){this._preview.classList.add(n)}getTransitionDuration(){return function hr(s){const n=getComputedStyle(s),o=Ui(n,"transition-property"),t=o.find(p=>"transform"===p||"all"===p);if(!t)return 0;const i=o.indexOf(t),r=Ui(n,"transition-duration"),a=Ui(n,"transition-delay");return Cn(r[i])+Cn(a[i])}(this._preview)}addEventListener(n,o){return this._renderer.listen(this._preview,n,o)}_createPreview(){const n=this._previewTemplate,o=this._previewClass,t=n?n.template:null;let i;if(t&&n){const r=n.matchSize?this._initialDomRect:null,a=n.viewContainer.createEmbeddedView(t,n.context);a.detectChanges(),i=gn(a,this._document),this._previewEmbeddedView=a,n.matchSize?vn(i,r):i.style.transform=Lt(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else i=Di(this._rootElement),vn(i,this._initialDomRect),this._initialTransform&&(i.style.transform=this._initialTransform);return Ni(i.style,{"pointer-events":"none",margin:bn(i)?"0 auto 0 0":"0",position:"fixed",top:"0",left:"0","z-index":this._zIndex+""},mr),gt(i,!1),i.classList.add("cdk-drag-preview"),i.setAttribute("popover","manual"),i.setAttribute("dir",this._direction),o&&(Array.isArray(o)?o.forEach(r=>i.classList.add(r)):i.classList.add(o)),i}}function bn(s){return"showPopover"in s}const _r={passive:!0},En={passive:!1},gr={passive:!1,capture:!0},Fn="cdk-drag-placeholder",yn=new Set(["position"]);class vr{_config;_document;_ngZone;_viewportRuler;_dragDropRegistry;_renderer;_rootElementCleanups;_cleanupShadowRootSelectStart;_preview;_previewContainer;_placeholderRef;_placeholder;_pickupPositionInElement;_pickupPositionOnPage;_marker;_anchor=null;_passiveTransform={x:0,y:0};_activeTransform={x:0,y:0};_initialTransform;_hasStartedDragging=(0,l.vPA)(!1);_hasMoved;_initialContainer;_initialIndex;_parentPositions;_moveEvents=new k.B;_pointerDirectionDelta;_pointerPositionAtLastDirectionChange;_lastKnownPointerPosition;_rootElement;_ownerSVGElement;_rootElementTapHighlight;_pointerMoveSubscription=Dt.yU.EMPTY;_pointerUpSubscription=Dt.yU.EMPTY;_scrollSubscription=Dt.yU.EMPTY;_resizeSubscription=Dt.yU.EMPTY;_lastTouchEventTime;_dragStartTime;_boundaryElement=null;_nativeInteractionsEnabled=!0;_initialDomRect;_previewRect;_boundaryRect;_previewTemplate;_placeholderTemplate;_handles=[];_disabledHandles=new Set;_dropContainer;_direction="ltr";_parentDragRef;_cachedShadowRoot;lockAxis=null;dragStartDelay=0;previewClass;scale=1;get disabled(){return this._disabled||!(!this._dropContainer||!this._dropContainer.disabled)}set disabled(n){n!==this._disabled&&(this._disabled=n,this._toggleNativeDragInteractions(),this._handles.forEach(o=>gt(o,n)))}_disabled=!1;beforeStarted=new k.B;started=new k.B;released=new k.B;ended=new k.B;entered=new k.B;exited=new k.B;dropped=new k.B;moved=this._moveEvents;data;constrainPosition;constructor(n,o,t,i,r,a,p){this._config=o,this._document=t,this._ngZone=i,this._viewportRuler=r,this._dragDropRegistry=a,this._renderer=p,this.withRootElement(n).withParent(o.parentDragRef||null),this._parentPositions=new _n(t),a.registerDragItem(this)}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(n){this._handles=n.map(t=>(0,Re.i8)(t)),this._handles.forEach(t=>gt(t,this.disabled)),this._toggleNativeDragInteractions();const o=new Set;return this._disabledHandles.forEach(t=>{this._handles.indexOf(t)>-1&&o.add(t)}),this._disabledHandles=o,this}withPreviewTemplate(n){return this._previewTemplate=n,this}withPlaceholderTemplate(n){return this._placeholderTemplate=n,this}withRootElement(n){const o=(0,Re.i8)(n);if(o!==this._rootElement){this._removeRootElementListeners();const t=this._renderer;this._rootElementCleanups=this._ngZone.runOutsideAngular(()=>[t.listen(o,"mousedown",this._pointerDown,En),t.listen(o,"touchstart",this._pointerDown,_r),t.listen(o,"dragstart",this._nativeDragStart,En)]),this._initialTransform=void 0,this._rootElement=o}return typeof SVGElement<"u"&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}withBoundaryElement(n){return this._boundaryElement=n?(0,Re.i8)(n):null,this._resizeSubscription.unsubscribe(),n&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}withParent(n){return this._parentDragRef=n,this}dispose(){this._removeRootElementListeners(),this.isDragging()&&this._rootElement?.remove(),this._marker?.remove(),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeListeners(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._marker=this._parentDragRef=null}isDragging(){return this._hasStartedDragging()&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}resetToBoundary(){if(this._boundaryElement&&this._rootElement&&function pr(s,n){return n.left<s.left||n.left+n.width>s.right||n.top<s.top||n.top+n.height>s.bottom}(this._boundaryElement.getBoundingClientRect(),this._rootElement.getBoundingClientRect())){const n=this._boundaryElement.getBoundingClientRect(),o=this._rootElement.getBoundingClientRect();let t=0,i=0;o.left<n.left?t=n.left-o.left:o.right>n.right&&(t=n.right-o.right),o.top<n.top?i=n.top-o.top:o.bottom>n.bottom&&(i=n.bottom-o.bottom);let p=this._activeTransform.x+t,m=this._activeTransform.y+i;this._rootElement.style.transform=Lt(p,m),this._activeTransform={x:p,y:m},this._passiveTransform={x:p,y:m}}}disableHandle(n){!this._disabledHandles.has(n)&&this._handles.indexOf(n)>-1&&(this._disabledHandles.add(n),gt(n,!0))}enableHandle(n){this._disabledHandles.has(n)&&(this._disabledHandles.delete(n),gt(n,this.disabled))}withDirection(n){return this._direction=n,this}_withDropContainer(n){this._dropContainer=n}getFreeDragPosition(){const n=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:n.x,y:n.y}}setFreeDragPosition(n){return this._activeTransform={x:0,y:0},this._passiveTransform.x=n.x,this._passiveTransform.y=n.y,this._dropContainer||this._applyRootElementTransform(n.x,n.y),this}withPreviewContainer(n){return this._previewContainer=n,this}_sortFromLastPointerPosition(){const n=this._lastKnownPointerPosition;n&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(n),n)}_removeListeners(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe(),this._cleanupShadowRootSelectStart?.(),this._cleanupShadowRootSelectStart=void 0}_destroyPreview(){this._preview?.destroy(),this._preview=null}_destroyPlaceholder(){this._anchor?.remove(),this._placeholder?.remove(),this._placeholderRef?.destroy(),this._placeholder=this._anchor=this._placeholderRef=null}_pointerDown=n=>{if(this.beforeStarted.next(),this._handles.length){const o=this._getTargetHandle(n);o&&!this._disabledHandles.has(o)&&!this.disabled&&this._initializeDragSequence(o,n)}else this.disabled||this._initializeDragSequence(this._rootElement,n)};_pointerMove=n=>{const o=this._getPointerPositionOnPage(n);if(!this._hasStartedDragging()){if(Math.abs(o.x-this._pickupPositionOnPage.x)+Math.abs(o.y-this._pickupPositionOnPage.y)>=this._config.dragStartThreshold){const p=Date.now()>=this._dragStartTime+this._getDragStartDelay(n),m=this._dropContainer;if(!p)return void this._endDragSequence(n);(!m||!m.isDragging()&&!m.isReceiving())&&(n.cancelable&&n.preventDefault(),this._hasStartedDragging.set(!0),this._ngZone.run(()=>this._startDragSequence(n)))}return}n.cancelable&&n.preventDefault();const t=this._getConstrainedPointerPosition(o);if(this._hasMoved=!0,this._lastKnownPointerPosition=o,this._updatePointerDirectionDelta(t),this._dropContainer)this._updateActiveDropContainer(t,o);else{const i=this.constrainPosition?this._initialDomRect:this._pickupPositionOnPage,r=this._activeTransform;r.x=t.x-i.x+this._passiveTransform.x,r.y=t.y-i.y+this._passiveTransform.y,this._applyRootElementTransform(r.x,r.y)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:t,event:n,distance:this._getDragDistance(t),delta:this._pointerDirectionDelta})})};_pointerUp=n=>{this._endDragSequence(n)};_endDragSequence(n){if(this._dragDropRegistry.isDragging(this)&&(this._removeListeners(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),this._hasStartedDragging()))if(this.released.next({source:this,event:n}),this._dropContainer)this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(n),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)});else{this._passiveTransform.x=this._activeTransform.x;const o=this._getPointerPositionOnPage(n);this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(o),dropPoint:o,event:n})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)}}_startDragSequence(n){Nt(n)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();const o=this._getShadowRoot(),t=this._dropContainer;if(o&&this._ngZone.runOutsideAngular(()=>{this._cleanupShadowRootSelectStart=this._renderer.listen(o,"selectstart",Cr,gr)}),t){const i=this._rootElement,r=i.parentNode,a=this._placeholder=this._createPlaceholderElement(),p=this._marker=this._marker||this._document.createComment("");r.insertBefore(p,i),this._initialTransform=i.style.transform||"",this._preview=new ur(this._document,this._rootElement,this._direction,this._initialDomRect,this._previewTemplate||null,this.previewClass||null,this._pickupPositionOnPage,this._initialTransform,this._config.zIndex||1e3,this._renderer),this._preview.attach(this._getPreviewInsertionPoint(r,o)),fn(i,!1,yn),this._document.body.appendChild(r.replaceChild(a,i)),this.started.next({source:this,event:n}),t.start(),this._initialContainer=t,this._initialIndex=t.getItemIndex(this)}else this.started.next({source:this,event:n}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(t?t.getScrollableParents():[])}_initializeDragSequence(n,o){this._parentDragRef&&o.stopPropagation();const t=this.isDragging(),i=Nt(o),r=!i&&0!==o.button,a=this._rootElement,p=(0,et.Fb)(o),m=!i&&this._lastTouchEventTime&&this._lastTouchEventTime+800>Date.now(),f=i?(0,ln.w)(o):(0,ln._)(o);if(p&&p.draggable&&"mousedown"===o.type&&o.preventDefault(),t||r||m||f)return;if(this._handles.length){const R=a.style;this._rootElementTapHighlight=R.webkitTapHighlightColor||"",R.webkitTapHighlightColor="transparent"}this._hasMoved=!1,this._hasStartedDragging.set(this._hasMoved),this._removeListeners(),this._initialDomRect=this._rootElement.getBoundingClientRect(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(R=>this._updateOnScroll(R)),this._boundaryElement&&(this._boundaryRect=ji(this._boundaryElement));const F=this._previewTemplate;this._pickupPositionInElement=F&&F.template&&!F.matchSize?{x:0,y:0}:this._getPointerPositionInElement(this._initialDomRect,n,o);const P=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(o);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:P.x,y:P.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,o)}_cleanupDragArtifacts(n){fn(this._rootElement,!0,yn),this._marker.parentNode.replaceChild(this._rootElement,this._marker),this._destroyPreview(),this._destroyPlaceholder(),this._initialDomRect=this._boundaryRect=this._previewRect=this._initialTransform=void 0,this._ngZone.run(()=>{const o=this._dropContainer,t=o.getItemIndex(this),i=this._getPointerPositionOnPage(n),r=this._getDragDistance(i),a=o._isOverContainer(i.x,i.y);this.ended.next({source:this,distance:r,dropPoint:i,event:n}),this.dropped.next({item:this,currentIndex:t,previousIndex:this._initialIndex,container:o,previousContainer:this._initialContainer,isPointerOverContainer:a,distance:r,dropPoint:i,event:n}),o.drop(this,t,this._initialIndex,this._initialContainer,a,r,i,n),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:n,y:o},{x:t,y:i}){let r=this._initialContainer._getSiblingContainerFromPosition(this,n,o);!r&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(n,o)&&(r=this._initialContainer),r&&r!==this._dropContainer&&this._ngZone.run(()=>{const a=this._dropContainer.getItemIndex(this),p=this._dropContainer.getItemAtIndex(a+1)?.getVisibleElement()||null;this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._conditionallyInsertAnchor(r,this._dropContainer,p),this._dropContainer=r,this._dropContainer.enter(this,n,o,r===this._initialContainer&&r.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:r,currentIndex:r.getItemIndex(this)})}),this.isDragging()&&(this._dropContainer._startScrollingIfNecessary(t,i),this._dropContainer._sortItem(this,n,o,this._pointerDirectionDelta),this.constrainPosition?this._applyPreviewTransform(n,o):this._applyPreviewTransform(n-this._pickupPositionInElement.x,o-this._pickupPositionInElement.y))}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();const n=this._placeholder.getBoundingClientRect();this._preview.addClass("cdk-drag-animating"),this._applyPreviewTransform(n.left,n.top);const o=this._preview.getTransitionDuration();return 0===o?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(t=>{const i=p=>{(!p||this._preview&&(0,et.Fb)(p)===this._preview.element&&"transform"===p.propertyName)&&(a(),t(),clearTimeout(r))},r=setTimeout(i,1.5*o),a=this._preview.addEventListener("transitionend",i)}))}_createPlaceholderElement(){const n=this._placeholderTemplate,o=n?n.template:null;let t;return o?(this._placeholderRef=n.viewContainer.createEmbeddedView(o,n.context),this._placeholderRef.detectChanges(),t=gn(this._placeholderRef,this._document)):t=Di(this._rootElement),t.style.pointerEvents="none",t.classList.add(Fn),t}_getPointerPositionInElement(n,o,t){const i=o===this._rootElement?null:o,r=i?i.getBoundingClientRect():n,a=Nt(t)?t.targetTouches[0]:t,p=this._getViewportScrollPosition();return{x:r.left-n.left+(a.pageX-r.left-p.left),y:r.top-n.top+(a.pageY-r.top-p.top)}}_getPointerPositionOnPage(n){const o=this._getViewportScrollPosition(),t=Nt(n)?n.touches[0]||n.changedTouches[0]||{pageX:0,pageY:0}:n,i=t.pageX-o.left,r=t.pageY-o.top;if(this._ownerSVGElement){const a=this._ownerSVGElement.getScreenCTM();if(a){const p=this._ownerSVGElement.createSVGPoint();return p.x=i,p.y=r,p.matrixTransform(a.inverse())}}return{x:i,y:r}}_getConstrainedPointerPosition(n){const o=this._dropContainer?this._dropContainer.lockAxis:null;let{x:t,y:i}=this.constrainPosition?this.constrainPosition(n,this,this._initialDomRect,this._pickupPositionInElement):n;if("x"===this.lockAxis||"x"===o?i=this._pickupPositionOnPage.y-(this.constrainPosition?this._pickupPositionInElement.y:0):("y"===this.lockAxis||"y"===o)&&(t=this._pickupPositionOnPage.x-(this.constrainPosition?this._pickupPositionInElement.x:0)),this._boundaryRect){const{x:r,y:a}=this.constrainPosition?{x:0,y:0}:this._pickupPositionInElement,p=this._boundaryRect,{width:m,height:f}=this._getPreviewRect(),F=p.top+a,P=p.bottom-(f-a);t=xn(t,p.left+r,p.right-(m-r)),i=xn(i,F,P)}return{x:t,y:i}}_updatePointerDirectionDelta(n){const{x:o,y:t}=n,i=this._pointerDirectionDelta,r=this._pointerPositionAtLastDirectionChange,a=Math.abs(o-r.x),p=Math.abs(t-r.y);return a>this._config.pointerDirectionChangeThreshold&&(i.x=o>r.x?1:-1,r.x=o),p>this._config.pointerDirectionChangeThreshold&&(i.y=t>r.y?1:-1,r.y=t),i}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;const n=this._handles.length>0||!this.isDragging();n!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=n,gt(this._rootElement,n))}_removeRootElementListeners(){this._rootElementCleanups?.forEach(n=>n()),this._rootElementCleanups=void 0}_applyRootElementTransform(n,o){const t=1/this.scale,i=Lt(n*t,o*t),r=this._rootElement.style;null==this._initialTransform&&(this._initialTransform=r.transform&&"none"!=r.transform?r.transform:""),r.transform=di(i,this._initialTransform)}_applyPreviewTransform(n,o){const t=this._previewTemplate?.template?void 0:this._initialTransform,i=Lt(n,o);this._preview.setTransform(di(i,t))}_getDragDistance(n){const o=this._pickupPositionOnPage;return o?{x:n.x-o.x,y:n.y-o.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}_containInsideBoundaryOnResize(){let{x:n,y:o}=this._passiveTransform;if(0===n&&0===o||this.isDragging()||!this._boundaryElement)return;const t=this._rootElement.getBoundingClientRect(),i=this._boundaryElement.getBoundingClientRect();if(0===i.width&&0===i.height||0===t.width&&0===t.height)return;const r=i.left-t.left,a=t.right-i.right,p=i.top-t.top,m=t.bottom-i.bottom;i.width>t.width?(r>0&&(n+=r),a>0&&(n-=a)):n=0,i.height>t.height?(p>0&&(o+=p),m>0&&(o-=m)):o=0,(n!==this._passiveTransform.x||o!==this._passiveTransform.y)&&this.setFreeDragPosition({y:o,x:n})}_getDragStartDelay(n){const o=this.dragStartDelay;return"number"==typeof o?o:Nt(n)?o.touch:o?o.mouse:0}_updateOnScroll(n){const o=this._parentPositions.handleScroll(n);if(o){const t=(0,et.Fb)(n);this._boundaryRect&&t!==this._boundaryElement&&t.contains(this._boundaryElement)&&jt(this._boundaryRect,o.top,o.left),this._pickupPositionOnPage.x+=o.left,this._pickupPositionOnPage.y+=o.top,this._dropContainer||(this._activeTransform.x-=o.left,this._activeTransform.y-=o.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}_getViewportScrollPosition(){return this._parentPositions.positions.get(this._document)?.scrollPosition||this._parentPositions.getViewportScrollPosition()}_getShadowRoot(){return void 0===this._cachedShadowRoot&&(this._cachedShadowRoot=(0,et.KT)(this._rootElement)),this._cachedShadowRoot}_getPreviewInsertionPoint(n,o){const t=this._previewContainer||"global";if("parent"===t)return n;if("global"===t){const i=this._document;return o||i.fullscreenElement||i.webkitFullscreenElement||i.mozFullScreenElement||i.msFullscreenElement||i.body}return(0,Re.i8)(t)}_getPreviewRect(){return(!this._previewRect||!this._previewRect.width&&!this._previewRect.height)&&(this._previewRect=this._preview?this._preview.getBoundingClientRect():this._initialDomRect),this._previewRect}_nativeDragStart=n=>{if(this._handles.length){const o=this._getTargetHandle(n);o&&!this._disabledHandles.has(o)&&!this.disabled&&n.preventDefault()}else this.disabled||n.preventDefault()};_getTargetHandle(n){return this._handles.find(o=>n.target&&(n.target===o||o.contains(n.target)))}_conditionallyInsertAnchor(n,o,t){if(n===this._initialContainer)this._anchor?.remove(),this._anchor=null;else if(o===this._initialContainer&&o.hasAnchor){const i=this._anchor??=Di(this._placeholder);i.classList.remove(Fn),i.classList.add("cdk-drag-anchor"),i.style.transform="",t?t.before(i):(0,Re.i8)(o.element).appendChild(i)}}}function xn(s,n,o){return Math.max(n,Math.min(o,s))}function Nt(s){return"t"===s.type[0]}function Cr(s){s.preventDefault()}function Mn(s,n,o){const t=Ut(n,s.length-1),i=Ut(o,s.length-1);if(t===i)return;const r=s[t],a=i<t?-1:1;for(let p=t;p!==i;p+=a)s[p]=s[p+a];s[i]=r}function Ut(s,n){return Math.max(0,Math.min(n,s))}class Tn{_dragDropRegistry;_element;_sortPredicate;_itemPositions=[];_activeDraggables;orientation="vertical";direction;constructor(n){this._dragDropRegistry=n}_previousSwap={drag:null,delta:0,overlaps:!1};start(n){this.withItems(n)}sort(n,o,t,i){const r=this._itemPositions,a=this._getItemIndexFromPointerPosition(n,o,t,i);if(-1===a&&r.length>0)return null;const p="horizontal"===this.orientation,m=r.findIndex(W=>W.drag===n),f=r[a],P=f.clientRect,R=m>a?1:-1,D=this._getItemOffsetPx(r[m].clientRect,P,R),X=this._getSiblingOffsetPx(m,r,R),we=r.slice();return Mn(r,m,a),r.forEach((W,Wi)=>{if(we[Wi]===W)return;const Ee=W.drag===n,Ye=Ee?D:X,Gt=Ee?n.getPlaceholderElement():W.drag.getRootElement();W.offset+=Ye;const Vt=Math.round(W.offset*(1/W.drag.scale));p?(Gt.style.transform=di(`translate3d(${Vt}px, 0, 0)`,W.initialTransform),jt(W.clientRect,0,Ye)):(Gt.style.transform=di(`translate3d(0, ${Vt}px, 0)`,W.initialTransform),jt(W.clientRect,Ye,0))}),this._previousSwap.overlaps=Li(P,o,t),this._previousSwap.drag=f.drag,this._previousSwap.delta=p?i.x:i.y,{previousIndex:m,currentIndex:a}}enter(n,o,t,i){const r=null==i||i<0?this._getItemIndexFromPointerPosition(n,o,t):i,a=this._activeDraggables,p=a.indexOf(n),m=n.getPlaceholderElement();let f=a[r];if(f===n&&(f=a[r+1]),!f&&(null==r||-1===r||r<a.length-1)&&this._shouldEnterAsFirstChild(o,t)&&(f=a[0]),p>-1&&a.splice(p,1),f&&!this._dragDropRegistry.isDragging(f)){const F=f.getRootElement();F.parentElement.insertBefore(m,F),a.splice(r,0,n)}else this._element.appendChild(m),a.push(n);m.style.transform="",this._cacheItemPositions()}withItems(n){this._activeDraggables=n.slice(),this._cacheItemPositions()}withSortPredicate(n){this._sortPredicate=n}reset(){this._activeDraggables?.forEach(n=>{const o=n.getRootElement();if(o){const t=this._itemPositions.find(i=>i.drag===n)?.initialTransform;o.style.transform=t||""}}),this._itemPositions=[],this._activeDraggables=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1}getActiveItemsSnapshot(){return this._activeDraggables}getItemIndex(n){return this._getVisualItemPositions().findIndex(o=>o.drag===n)}getItemAtIndex(n){return this._getVisualItemPositions()[n]?.drag||null}updateOnScroll(n,o){this._itemPositions.forEach(({clientRect:t})=>{jt(t,n,o)}),this._itemPositions.forEach(({drag:t})=>{this._dragDropRegistry.isDragging(t)&&t._sortFromLastPointerPosition()})}withElementContainer(n){this._element=n}_cacheItemPositions(){const n="horizontal"===this.orientation;this._itemPositions=this._activeDraggables.map(o=>{const t=o.getVisibleElement();return{drag:o,offset:0,initialTransform:t.style.transform||"",clientRect:ji(t)}}).sort((o,t)=>n?o.clientRect.left-t.clientRect.left:o.clientRect.top-t.clientRect.top)}_getVisualItemPositions(){return"horizontal"===this.orientation&&"rtl"===this.direction?this._itemPositions.slice().reverse():this._itemPositions}_getItemOffsetPx(n,o,t){const i="horizontal"===this.orientation;let r=i?o.left-n.left:o.top-n.top;return-1===t&&(r+=i?o.width-n.width:o.height-n.height),r}_getSiblingOffsetPx(n,o,t){const i="horizontal"===this.orientation,r=o[n].clientRect,a=o[n+-1*t];let p=r[i?"width":"height"]*t;if(a){const m=i?"left":"top",f=i?"right":"bottom";-1===t?p-=a.clientRect[m]-r[f]:p+=r[m]-a.clientRect[f]}return p}_shouldEnterAsFirstChild(n,o){if(!this._activeDraggables.length)return!1;const t=this._itemPositions,i="horizontal"===this.orientation;if(t[0].drag!==this._activeDraggables[0]){const a=t[t.length-1].clientRect;return i?n>=a.right:o>=a.bottom}{const a=t[0].clientRect;return i?n<=a.left:o<=a.top}}_getItemIndexFromPointerPosition(n,o,t,i){const r="horizontal"===this.orientation,a=this._itemPositions.findIndex(({drag:p,clientRect:m})=>p!==n&&((!i||p!==this._previousSwap.drag||!this._previousSwap.overlaps||(r?i.x:i.y)!==this._previousSwap.delta)&&(r?o>=Math.floor(m.left)&&o<Math.floor(m.right):t>=Math.floor(m.top)&&t<Math.floor(m.bottom))));return-1!==a&&this._sortPredicate(a,n)?a:-1}}class br{_document;_dragDropRegistry;_element;_sortPredicate;_rootNode;_activeItems;_previousSwap={drag:null,deltaX:0,deltaY:0,overlaps:!1};_relatedNodes=[];constructor(n,o){this._document=n,this._dragDropRegistry=o}start(n){const o=this._element.childNodes;this._relatedNodes=[];for(let t=0;t<o.length;t++){const i=o[t];this._relatedNodes.push([i,i.nextSibling])}this.withItems(n)}sort(n,o,t,i){const r=this._getItemIndexFromPointerPosition(n,o,t),a=this._previousSwap;if(-1===r||this._activeItems[r]===n)return null;const p=this._activeItems[r];if(a.drag===p&&a.overlaps&&a.deltaX===i.x&&a.deltaY===i.y)return null;const m=this.getItemIndex(n),f=n.getPlaceholderElement(),F=p.getRootElement();r>m?F.after(f):F.before(f),Mn(this._activeItems,m,r);const P=this._getRootNode().elementFromPoint(o,t);return a.deltaX=i.x,a.deltaY=i.y,a.drag=p,a.overlaps=F===P||F.contains(P),{previousIndex:m,currentIndex:r}}enter(n,o,t,i){const r=this._activeItems.indexOf(n);r>-1&&this._activeItems.splice(r,1);let a=null==i||i<0?this._getItemIndexFromPointerPosition(n,o,t):i;-1===a&&(a=this._getClosestItemIndexToPointer(n,o,t));const p=this._activeItems[a];p&&!this._dragDropRegistry.isDragging(p)?(this._activeItems.splice(a,0,n),p.getRootElement().before(n.getPlaceholderElement())):(this._activeItems.push(n),this._element.appendChild(n.getPlaceholderElement()))}withItems(n){this._activeItems=n.slice()}withSortPredicate(n){this._sortPredicate=n}reset(){const n=this._element,o=this._previousSwap;for(let t=this._relatedNodes.length-1;t>-1;t--){const[i,r]=this._relatedNodes[t];i.parentNode===n&&i.nextSibling!==r&&(null===r?n.appendChild(i):r.parentNode===n&&n.insertBefore(i,r))}this._relatedNodes=[],this._activeItems=[],o.drag=null,o.deltaX=o.deltaY=0,o.overlaps=!1}getActiveItemsSnapshot(){return this._activeItems}getItemIndex(n){return this._activeItems.indexOf(n)}getItemAtIndex(n){return this._activeItems[n]||null}updateOnScroll(){this._activeItems.forEach(n=>{this._dragDropRegistry.isDragging(n)&&n._sortFromLastPointerPosition()})}withElementContainer(n){n!==this._element&&(this._element=n,this._rootNode=void 0)}_getItemIndexFromPointerPosition(n,o,t){const i=this._getRootNode().elementFromPoint(Math.floor(o),Math.floor(t)),r=i?this._activeItems.findIndex(a=>{const p=a.getRootElement();return i===p||p.contains(i)}):-1;return-1!==r&&this._sortPredicate(r,n)?r:-1}_getRootNode(){return this._rootNode||(this._rootNode=(0,et.KT)(this._element)||this._document),this._rootNode}_getClosestItemIndexToPointer(n,o,t){if(0===this._activeItems.length)return-1;if(1===this._activeItems.length)return 0;let i=1/0,r=-1;for(let a=0;a<this._activeItems.length;a++){const p=this._activeItems[a];if(p!==n){const{x:m,y:f}=p.getRootElement().getBoundingClientRect(),F=Math.hypot(o-m,t-f);F<i&&(i=F,r=a)}}return r}}var be=function(s){return s[s.NONE=0]="NONE",s[s.UP=1]="UP",s[s.DOWN=2]="DOWN",s}(be||{}),oe=function(s){return s[s.NONE=0]="NONE",s[s.LEFT=1]="LEFT",s[s.RIGHT=2]="RIGHT",s}(oe||{});class Er{_dragDropRegistry;_ngZone;_viewportRuler;element;disabled=!1;sortingDisabled=!1;lockAxis=null;autoScrollDisabled=!1;autoScrollStep=2;hasAnchor=!1;enterPredicate=()=>!0;sortPredicate=()=>!0;beforeStarted=new k.B;entered=new k.B;exited=new k.B;dropped=new k.B;sorted=new k.B;receivingStarted=new k.B;receivingStopped=new k.B;data;_container;_isDragging=!1;_parentPositions;_sortStrategy;_domRect;_draggables=[];_siblings=[];_activeSiblings=new Set;_viewportScrollSubscription=Dt.yU.EMPTY;_verticalScrollDirection=be.NONE;_horizontalScrollDirection=oe.NONE;_scrollNode;_stopScrollTimers=new k.B;_cachedShadowRoot=null;_document;_scrollableElements=[];_initialScrollSnap;_direction="ltr";constructor(n,o,t,i,r){this._dragDropRegistry=o,this._ngZone=i,this._viewportRuler=r;const a=this.element=(0,Re.i8)(n);this._document=t,this.withOrientation("vertical").withElementContainer(a),o.registerDropContainer(this),this._parentPositions=new _n(t)}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this.receivingStarted.complete(),this.receivingStopped.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this._draggingStarted(),this._notifyReceivingSiblings()}enter(n,o,t,i){this._draggingStarted(),null==i&&this.sortingDisabled&&(i=this._draggables.indexOf(n)),this._sortStrategy.enter(n,o,t,i),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:n,container:this,currentIndex:this.getItemIndex(n)})}exit(n){this._reset(),this.exited.next({item:n,container:this})}drop(n,o,t,i,r,a,p,m={}){this._reset(),this.dropped.next({item:n,currentIndex:o,previousIndex:t,container:this,previousContainer:i,isPointerOverContainer:r,distance:a,dropPoint:p,event:m})}withItems(n){const o=this._draggables;return this._draggables=n,n.forEach(t=>t._withDropContainer(this)),this.isDragging()&&(o.filter(i=>i.isDragging()).every(i=>-1===n.indexOf(i))?this._reset():this._sortStrategy.withItems(this._draggables)),this}withDirection(n){return this._direction=n,this._sortStrategy instanceof Tn&&(this._sortStrategy.direction=n),this}connectedTo(n){return this._siblings=n.slice(),this}withOrientation(n){if("mixed"===n)this._sortStrategy=new br(this._document,this._dragDropRegistry);else{const o=new Tn(this._dragDropRegistry);o.direction=this._direction,o.orientation=n,this._sortStrategy=o}return this._sortStrategy.withElementContainer(this._container),this._sortStrategy.withSortPredicate((o,t)=>this.sortPredicate(o,t,this)),this}withScrollableParents(n){const o=this._container;return this._scrollableElements=-1===n.indexOf(o)?[o,...n]:n.slice(),this}withElementContainer(n){if(n===this._container)return this;(0,Re.i8)(this.element);const t=this._scrollableElements.indexOf(this._container),i=this._scrollableElements.indexOf(n);return t>-1&&this._scrollableElements.splice(t,1),i>-1&&this._scrollableElements.splice(i,1),this._sortStrategy&&this._sortStrategy.withElementContainer(n),this._cachedShadowRoot=null,this._scrollableElements.unshift(n),this._container=n,this}getScrollableParents(){return this._scrollableElements}getItemIndex(n){return this._isDragging?this._sortStrategy.getItemIndex(n):this._draggables.indexOf(n)}getItemAtIndex(n){return this._isDragging?this._sortStrategy.getItemAtIndex(n):this._draggables[n]||null}isReceiving(){return this._activeSiblings.size>0}_sortItem(n,o,t,i){if(this.sortingDisabled||!this._domRect||!un(this._domRect,.05,o,t))return;const r=this._sortStrategy.sort(n,o,t,i);r&&this.sorted.next({previousIndex:r.previousIndex,currentIndex:r.currentIndex,container:this,item:n})}_startScrollingIfNecessary(n,o){if(this.autoScrollDisabled)return;let t,i=be.NONE,r=oe.NONE;if(this._parentPositions.positions.forEach((a,p)=>{p===this._document||!a.clientRect||t||un(a.clientRect,.05,n,o)&&([i,r]=function Fr(s,n,o,t,i){const r=Pn(n,i),a=Rn(n,t);let p=be.NONE,m=oe.NONE;if(r){const f=s.scrollTop;r===be.UP?f>0&&(p=be.UP):s.scrollHeight-f>s.clientHeight&&(p=be.DOWN)}if(a){const f=s.scrollLeft;"rtl"===o?a===oe.RIGHT?f<0&&(m=oe.RIGHT):s.scrollWidth+f>s.clientWidth&&(m=oe.LEFT):a===oe.LEFT?f>0&&(m=oe.LEFT):s.scrollWidth-f>s.clientWidth&&(m=oe.RIGHT)}return[p,m]}(p,a.clientRect,this._direction,n,o),(i||r)&&(t=p))}),!i&&!r){const{width:a,height:p}=this._viewportRuler.getViewportSize(),m={width:a,height:p,top:0,right:a,bottom:p,left:0};i=Pn(m,o),r=Rn(m,n),t=window}t&&(i!==this._verticalScrollDirection||r!==this._horizontalScrollDirection||t!==this._scrollNode)&&(this._verticalScrollDirection=i,this._horizontalScrollDirection=r,this._scrollNode=t,(i||r)&&t?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_draggingStarted(){const n=this._container.style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=n.msScrollSnapType||n.scrollSnapType||"",n.scrollSnapType=n.msScrollSnapType="none",this._sortStrategy.start(this._draggables),this._cacheParentPositions(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}_cacheParentPositions(){this._parentPositions.cache(this._scrollableElements),this._domRect=this._parentPositions.positions.get(this._container).clientRect}_reset(){this._isDragging=!1;const n=this._container.style;n.scrollSnapType=n.msScrollSnapType=this._initialScrollSnap,this._siblings.forEach(o=>o._stopReceiving(this)),this._sortStrategy.reset(),this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_startScrollInterval=()=>{this._stopScrolling(),(0,ir.Y)(0,nr.X).pipe((0,Me.Q)(this._stopScrollTimers)).subscribe(()=>{const n=this._scrollNode,o=this.autoScrollStep;this._verticalScrollDirection===be.UP?n.scrollBy(0,-o):this._verticalScrollDirection===be.DOWN&&n.scrollBy(0,o),this._horizontalScrollDirection===oe.LEFT?n.scrollBy(-o,0):this._horizontalScrollDirection===oe.RIGHT&&n.scrollBy(o,0)})};_isOverContainer(n,o){return null!=this._domRect&&Li(this._domRect,n,o)}_getSiblingContainerFromPosition(n,o,t){return this._siblings.find(i=>i._canReceive(n,o,t))}_canReceive(n,o,t){if(!this._domRect||!Li(this._domRect,o,t)||!this.enterPredicate(n,this))return!1;const i=this._getShadowRoot().elementFromPoint(o,t);return!!i&&(i===this._container||this._container.contains(i))}_startReceiving(n,o){const t=this._activeSiblings;!t.has(n)&&o.every(i=>this.enterPredicate(i,this)||this._draggables.indexOf(i)>-1)&&(t.add(n),this._cacheParentPositions(),this._listenToScrollEvents(),this.receivingStarted.next({initiator:n,receiver:this,items:o}))}_stopReceiving(n){this._activeSiblings.delete(n),this._viewportScrollSubscription.unsubscribe(),this.receivingStopped.next({initiator:n,receiver:this})}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(n=>{if(this.isDragging()){const o=this._parentPositions.handleScroll(n);o&&this._sortStrategy.updateOnScroll(o.top,o.left)}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){const n=(0,et.KT)(this._container);this._cachedShadowRoot=n||this._document}return this._cachedShadowRoot}_notifyReceivingSiblings(){const n=this._sortStrategy.getActiveItemsSnapshot().filter(o=>o.isDragging());this._siblings.forEach(o=>o._startReceiving(this,n))}}function Pn(s,n){const{top:o,bottom:t,height:i}=s,r=.05*i;return n>=o-r&&n<=o+r?be.UP:n>=t-r&&n<=t+r?be.DOWN:be.NONE}function Rn(s,n){const{left:o,right:t,width:i}=s,r=.05*i;return n>=o-r&&n<=o+r?oe.LEFT:n>=t-r&&n<=t+r?oe.RIGHT:oe.NONE}const At={capture:!0},Ai={passive:!1,capture:!0};let yr=(()=>{class s{static \u0275fac=function(t){return new(t||s)};static \u0275cmp=e.VBU({type:s,selectors:[["ng-component"]],hostAttrs:["cdk-drag-resets-container",""],decls:0,vars:0,template:function(t,i){},styles:["@layer cdk-resets{.cdk-drag-preview{background:none;border:none;padding:0;color:inherit;inset:auto}}.cdk-drag-placeholder *,.cdk-drag-preview *{pointer-events:none !important}\n"],encapsulation:2,changeDetection:0})}return s})(),zi=(()=>{class s{_ngZone=(0,l.WQX)(e.SKi);_document=(0,l.WQX)(l.qQL);_styleLoader=(0,l.WQX)(ar.l);_renderer=(0,l.WQX)(e._9s).createRenderer(null,null);_cleanupDocumentTouchmove;_scroll=new k.B;_dropInstances=new Set;_dragInstances=new Set;_activeDragInstances=(0,l.vPA)([]);_globalListeners;_draggingPredicate=o=>o.isDragging();_domNodesToDirectives=null;pointerMove=new k.B;pointerUp=new k.B;constructor(){}registerDropContainer(o){this._dropInstances.has(o)||this._dropInstances.add(o)}registerDragItem(o){this._dragInstances.add(o),1===this._dragInstances.size&&this._ngZone.runOutsideAngular(()=>{this._cleanupDocumentTouchmove?.(),this._cleanupDocumentTouchmove=this._renderer.listen(this._document,"touchmove",this._persistentTouchmoveListener,Ai)})}removeDropContainer(o){this._dropInstances.delete(o)}removeDragItem(o){this._dragInstances.delete(o),this.stopDragging(o),0===this._dragInstances.size&&this._cleanupDocumentTouchmove?.()}startDragging(o,t){if(!(this._activeDragInstances().indexOf(o)>-1)&&(this._styleLoader.load(yr),this._activeDragInstances.update(i=>[...i,o]),1===this._activeDragInstances().length)){const i=t.type.startsWith("touch"),r=p=>this.pointerUp.next(p),a=[["scroll",p=>this._scroll.next(p),At],["selectstart",this._preventDefaultWhileDragging,Ai]];i?a.push(["touchend",r,At],["touchcancel",r,At]):a.push(["mouseup",r,At]),i||a.push(["mousemove",p=>this.pointerMove.next(p),Ai]),this._ngZone.runOutsideAngular(()=>{this._globalListeners=a.map(([p,m,f])=>this._renderer.listen(this._document,p,m,f))})}}stopDragging(o){this._activeDragInstances.update(t=>{const i=t.indexOf(o);return i>-1?(t.splice(i,1),[...t]):t}),0===this._activeDragInstances().length&&this._clearGlobalListeners()}isDragging(o){return this._activeDragInstances().indexOf(o)>-1}scrolled(o){const t=[this._scroll];return o&&o!==this._document&&t.push(new an.c(i=>this._ngZone.runOutsideAngular(()=>{const r=this._renderer.listen(o,"scroll",a=>{this._activeDragInstances().length&&i.next(a)},At);return()=>{r()}}))),(0,Qe.h)(...t)}registerDirectiveNode(o,t){this._domNodesToDirectives??=new WeakMap,this._domNodesToDirectives.set(o,t)}removeDirectiveNode(o){this._domNodesToDirectives?.delete(o)}getDragDirectiveForNode(o){return this._domNodesToDirectives?.get(o)||null}ngOnDestroy(){this._dragInstances.forEach(o=>this.removeDragItem(o)),this._dropInstances.forEach(o=>this.removeDropContainer(o)),this._domNodesToDirectives=null,this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_preventDefaultWhileDragging=o=>{this._activeDragInstances().length>0&&o.preventDefault()};_persistentTouchmoveListener=o=>{this._activeDragInstances().length>0&&(this._activeDragInstances().some(this._draggingPredicate)&&o.preventDefault(),this.pointerMove.next(o))};_clearGlobalListeners(){this._globalListeners?.forEach(o=>o()),this._globalListeners=void 0}static \u0275fac=function(t){return new(t||s)};static \u0275prov=l.jDH({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();const xr={dragStartThreshold:5,pointerDirectionChangeThreshold:5};let Gi=(()=>{class s{_document=(0,l.WQX)(l.qQL);_ngZone=(0,l.WQX)(e.SKi);_viewportRuler=(0,l.WQX)(Ce.Xj);_dragDropRegistry=(0,l.WQX)(zi);_renderer=(0,l.WQX)(e._9s).createRenderer(null,null);constructor(){}createDrag(o,t=xr){return new vr(o,t,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry,this._renderer)}createDropList(o){return new Er(o,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}static \u0275fac=function(t){return new(t||s)};static \u0275prov=l.jDH({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();const zt=new l.nKC("CDK_DRAG_PARENT"),wn=new l.nKC("CdkDragHandle"),On=new l.nKC("CDK_DRAG_CONFIG"),In=new l.nKC("CdkDropList");let Vi=(()=>{class s{element=(0,l.WQX)(e.aKT);dropContainer=(0,l.WQX)(In,{optional:!0,skipSelf:!0});_ngZone=(0,l.WQX)(e.SKi);_viewContainerRef=(0,l.WQX)(e.c1b);_dir=(0,l.WQX)(dn.dS,{optional:!0});_changeDetectorRef=(0,l.WQX)(T.gRc);_selfHandle=(0,l.WQX)(wn,{optional:!0,self:!0});_parentDrag=(0,l.WQX)(zt,{optional:!0,skipSelf:!0});_dragDropRegistry=(0,l.WQX)(zi);_destroyed=new k.B;_handles=new or.t([]);_previewTemplate;_placeholderTemplate;_dragRef;data;lockAxis=null;rootElementSelector;boundaryElement;dragStartDelay;freeDragPosition;get disabled(){return this._disabled||!(!this.dropContainer||!this.dropContainer.disabled)}set disabled(o){this._disabled=o,this._dragRef.disabled=this._disabled}_disabled;constrainPosition;previewClass;previewContainer;scale=1;started=new e.bkB;released=new e.bkB;ended=new e.bkB;entered=new e.bkB;exited=new e.bkB;dropped=new e.bkB;moved=new an.c(o=>{const t=this._dragRef.moved.pipe((0,sr.T)(i=>({source:this,pointerPosition:i.pointerPosition,event:i.event,delta:i.delta,distance:i.distance}))).subscribe(o);return()=>{t.unsubscribe()}});_injector=(0,l.WQX)(l.zZn);constructor(){const o=this.dropContainer,t=(0,l.WQX)(On,{optional:!0}),i=(0,l.WQX)(Gi);this._dragRef=i.createDrag(this.element,{dragStartThreshold:t&&null!=t.dragStartThreshold?t.dragStartThreshold:5,pointerDirectionChangeThreshold:t&&null!=t.pointerDirectionChangeThreshold?t.pointerDirectionChangeThreshold:5,zIndex:t?.zIndex}),this._dragRef.data=this,this._dragDropRegistry.registerDirectiveNode(this.element.nativeElement,this),t&&this._assignDefaults(t),o&&(o.addItem(this),o._dropListRef.beforeStarted.pipe((0,Me.Q)(this._destroyed)).subscribe(()=>{this._dragRef.scale=this.scale})),this._syncInputs(this._dragRef),this._handleEvents(this._dragRef)}getPlaceholderElement(){return this._dragRef.getPlaceholderElement()}getRootElement(){return this._dragRef.getRootElement()}reset(){this._dragRef.reset()}resetToBoundary(){this._dragRef.resetToBoundary()}getFreeDragPosition(){return this._dragRef.getFreeDragPosition()}setFreeDragPosition(o){this._dragRef.setFreeDragPosition(o)}ngAfterViewInit(){(0,e.mal)(()=>{this._updateRootElement(),this._setupHandlesListener(),this._dragRef.scale=this.scale,this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)},{injector:this._injector})}ngOnChanges(o){const t=o.rootElementSelector,i=o.freeDragPosition;t&&!t.firstChange&&this._updateRootElement(),this._dragRef.scale=this.scale,i&&!i.firstChange&&this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)}ngOnDestroy(){this.dropContainer&&this.dropContainer.removeItem(this),this._dragDropRegistry.removeDirectiveNode(this.element.nativeElement),this._ngZone.runOutsideAngular(()=>{this._handles.complete(),this._destroyed.next(),this._destroyed.complete(),this._dragRef.dispose()})}_addHandle(o){const t=this._handles.getValue();t.push(o),this._handles.next(t)}_removeHandle(o){const t=this._handles.getValue(),i=t.indexOf(o);i>-1&&(t.splice(i,1),this._handles.next(t))}_setPreviewTemplate(o){this._previewTemplate=o}_resetPreviewTemplate(o){o===this._previewTemplate&&(this._previewTemplate=null)}_setPlaceholderTemplate(o){this._placeholderTemplate=o}_resetPlaceholderTemplate(o){o===this._placeholderTemplate&&(this._placeholderTemplate=null)}_updateRootElement(){const o=this.element.nativeElement;let t=o;this.rootElementSelector&&(t=void 0!==o.closest?o.closest(this.rootElementSelector):o.parentElement?.closest(this.rootElementSelector)),this._dragRef.withRootElement(t||o)}_getBoundaryElement(){const o=this.boundaryElement;return o?"string"==typeof o?this.element.nativeElement.closest(o):(0,Re.i8)(o):null}_syncInputs(o){o.beforeStarted.subscribe(()=>{if(!o.isDragging()){const t=this._dir,i=this.dragStartDelay,r=this._placeholderTemplate?{template:this._placeholderTemplate.templateRef,context:this._placeholderTemplate.data,viewContainer:this._viewContainerRef}:null,a=this._previewTemplate?{template:this._previewTemplate.templateRef,context:this._previewTemplate.data,matchSize:this._previewTemplate.matchSize,viewContainer:this._viewContainerRef}:null;o.disabled=this.disabled,o.lockAxis=this.lockAxis,o.scale=this.scale,o.dragStartDelay="object"==typeof i&&i?i:(0,Re.OE)(i),o.constrainPosition=this.constrainPosition,o.previewClass=this.previewClass,o.withBoundaryElement(this._getBoundaryElement()).withPlaceholderTemplate(r).withPreviewTemplate(a).withPreviewContainer(this.previewContainer||"global"),t&&o.withDirection(t.value)}}),o.beforeStarted.pipe((0,rr.s)(1)).subscribe(()=>{if(this._parentDrag)return void o.withParent(this._parentDrag._dragRef);let t=this.element.nativeElement.parentElement;for(;t;){const i=this._dragDropRegistry.getDragDirectiveForNode(t);if(i){o.withParent(i._dragRef);break}t=t.parentElement}})}_handleEvents(o){o.started.subscribe(t=>{this.started.emit({source:this,event:t.event}),this._changeDetectorRef.markForCheck()}),o.released.subscribe(t=>{this.released.emit({source:this,event:t.event})}),o.ended.subscribe(t=>{this.ended.emit({source:this,distance:t.distance,dropPoint:t.dropPoint,event:t.event}),this._changeDetectorRef.markForCheck()}),o.entered.subscribe(t=>{this.entered.emit({container:t.container.data,item:this,currentIndex:t.currentIndex})}),o.exited.subscribe(t=>{this.exited.emit({container:t.container.data,item:this})}),o.dropped.subscribe(t=>{this.dropped.emit({previousIndex:t.previousIndex,currentIndex:t.currentIndex,previousContainer:t.previousContainer.data,container:t.container.data,isPointerOverContainer:t.isPointerOverContainer,item:this,distance:t.distance,dropPoint:t.dropPoint,event:t.event})})}_assignDefaults(o){const{lockAxis:t,dragStartDelay:i,constrainPosition:r,previewClass:a,boundaryElement:p,draggingDisabled:m,rootElementSelector:f,previewContainer:F}=o;this.disabled=m??!1,this.dragStartDelay=i||0,this.lockAxis=t||null,r&&(this.constrainPosition=r),a&&(this.previewClass=a),p&&(this.boundaryElement=p),f&&(this.rootElementSelector=f),F&&(this.previewContainer=F)}_setupHandlesListener(){this._handles.pipe((0,Ii.M)(o=>{const t=o.map(i=>i.element);this._selfHandle&&this.rootElementSelector&&t.push(this.element),this._dragRef.withHandles(t)}),(0,tn.n)(o=>(0,Qe.h)(...o.map(t=>t._stateChanges.pipe((0,cn.Z)(t))))),(0,Me.Q)(this._destroyed)).subscribe(o=>{const t=this._dragRef,i=o.element.nativeElement;o.disabled?t.disableHandle(i):t.enableHandle(i)})}static \u0275fac=function(t){return new(t||s)};static \u0275dir=e.FsC({type:s,selectors:[["","cdkDrag",""]],hostAttrs:[1,"cdk-drag"],hostVars:4,hostBindings:function(t,i){2&t&&e.AVh("cdk-drag-disabled",i.disabled)("cdk-drag-dragging",i._dragRef.isDragging())},inputs:{data:[0,"cdkDragData","data"],lockAxis:[0,"cdkDragLockAxis","lockAxis"],rootElementSelector:[0,"cdkDragRootElement","rootElementSelector"],boundaryElement:[0,"cdkDragBoundary","boundaryElement"],dragStartDelay:[0,"cdkDragStartDelay","dragStartDelay"],freeDragPosition:[0,"cdkDragFreeDragPosition","freeDragPosition"],disabled:[2,"cdkDragDisabled","disabled",T.L39],constrainPosition:[0,"cdkDragConstrainPosition","constrainPosition"],previewClass:[0,"cdkDragPreviewClass","previewClass"],previewContainer:[0,"cdkDragPreviewContainer","previewContainer"],scale:[2,"cdkDragScale","scale",T.Udg]},outputs:{started:"cdkDragStarted",released:"cdkDragReleased",ended:"cdkDragEnded",entered:"cdkDragEntered",exited:"cdkDragExited",dropped:"cdkDragDropped",moved:"cdkDragMoved"},exportAs:["cdkDrag"],features:[e.Jv_([{provide:zt,useExisting:s}]),e.OA$]})}return s})();const Bi=new l.nKC("CdkDropListGroup");let Xi=(()=>{class s{element=(0,l.WQX)(e.aKT);_changeDetectorRef=(0,l.WQX)(T.gRc);_scrollDispatcher=(0,l.WQX)(Ce.R);_dir=(0,l.WQX)(dn.dS,{optional:!0});_group=(0,l.WQX)(Bi,{optional:!0,skipSelf:!0});_latestSortedRefs;_destroyed=new k.B;_scrollableParentsResolved;static _dropLists=[];_dropListRef;connectedTo=[];data;orientation;id=(0,l.WQX)(lr.g).getId("cdk-drop-list-");lockAxis=null;get disabled(){return this._disabled||!!this._group&&this._group.disabled}set disabled(o){this._dropListRef.disabled=this._disabled=o}_disabled;sortingDisabled;enterPredicate=()=>!0;sortPredicate=()=>!0;autoScrollDisabled;autoScrollStep;elementContainerSelector;hasAnchor;dropped=new e.bkB;entered=new e.bkB;exited=new e.bkB;sorted=new e.bkB;_unsortedItems=new Set;constructor(){const o=(0,l.WQX)(Gi),t=(0,l.WQX)(On,{optional:!0});this._dropListRef=o.createDropList(this.element),this._dropListRef.data=this,t&&this._assignDefaults(t),this._dropListRef.enterPredicate=(i,r)=>this.enterPredicate(i.data,r.data),this._dropListRef.sortPredicate=(i,r,a)=>this.sortPredicate(i,r.data,a.data),this._setupInputSyncSubscription(this._dropListRef),this._handleEvents(this._dropListRef),s._dropLists.push(this),this._group&&this._group._items.add(this)}addItem(o){this._unsortedItems.add(o),o._dragRef._withDropContainer(this._dropListRef),this._dropListRef.isDragging()&&this._syncItemsWithRef(this.getSortedItems().map(t=>t._dragRef))}removeItem(o){if(this._unsortedItems.delete(o),this._latestSortedRefs){const t=this._latestSortedRefs.indexOf(o._dragRef);t>-1&&(this._latestSortedRefs.splice(t,1),this._syncItemsWithRef(this._latestSortedRefs))}}getSortedItems(){return Array.from(this._unsortedItems).sort((o,t)=>o._dragRef.getVisibleElement().compareDocumentPosition(t._dragRef.getVisibleElement())&Node.DOCUMENT_POSITION_FOLLOWING?-1:1)}ngOnDestroy(){const o=s._dropLists.indexOf(this);o>-1&&s._dropLists.splice(o,1),this._group&&this._group._items.delete(this),this._latestSortedRefs=void 0,this._unsortedItems.clear(),this._dropListRef.dispose(),this._destroyed.next(),this._destroyed.complete()}_setupInputSyncSubscription(o){this._dir&&this._dir.change.pipe((0,cn.Z)(this._dir.value),(0,Me.Q)(this._destroyed)).subscribe(t=>o.withDirection(t)),o.beforeStarted.subscribe(()=>{const t=(0,cr.F)(this.connectedTo).map(i=>"string"==typeof i?s._dropLists.find(a=>a.id===i):i);if(this._group&&this._group._items.forEach(i=>{-1===t.indexOf(i)&&t.push(i)}),!this._scrollableParentsResolved){const i=this._scrollDispatcher.getAncestorScrollContainers(this.element).map(r=>r.getElementRef().nativeElement);this._dropListRef.withScrollableParents(i),this._scrollableParentsResolved=!0}if(this.elementContainerSelector){const i=this.element.nativeElement.querySelector(this.elementContainerSelector);o.withElementContainer(i)}o.disabled=this.disabled,o.lockAxis=this.lockAxis,o.sortingDisabled=this.sortingDisabled,o.autoScrollDisabled=this.autoScrollDisabled,o.autoScrollStep=(0,Re.OE)(this.autoScrollStep,2),o.hasAnchor=this.hasAnchor,o.connectedTo(t.filter(i=>i&&i!==this).map(i=>i._dropListRef)).withOrientation(this.orientation)})}_handleEvents(o){o.beforeStarted.subscribe(()=>{this._syncItemsWithRef(this.getSortedItems().map(t=>t._dragRef)),this._changeDetectorRef.markForCheck()}),o.entered.subscribe(t=>{this.entered.emit({container:this,item:t.item.data,currentIndex:t.currentIndex})}),o.exited.subscribe(t=>{this.exited.emit({container:this,item:t.item.data}),this._changeDetectorRef.markForCheck()}),o.sorted.subscribe(t=>{this.sorted.emit({previousIndex:t.previousIndex,currentIndex:t.currentIndex,container:this,item:t.item.data})}),o.dropped.subscribe(t=>{this.dropped.emit({previousIndex:t.previousIndex,currentIndex:t.currentIndex,previousContainer:t.previousContainer.data,container:t.container.data,item:t.item.data,isPointerOverContainer:t.isPointerOverContainer,distance:t.distance,dropPoint:t.dropPoint,event:t.event}),this._changeDetectorRef.markForCheck()}),(0,Qe.h)(o.receivingStarted,o.receivingStopped).subscribe(()=>this._changeDetectorRef.markForCheck())}_assignDefaults(o){const{lockAxis:t,draggingDisabled:i,sortingDisabled:r,listAutoScrollDisabled:a,listOrientation:p}=o;this.disabled=i??!1,this.sortingDisabled=r??!1,this.autoScrollDisabled=a??!1,this.orientation=p||"vertical",this.lockAxis=t||null}_syncItemsWithRef(o){this._latestSortedRefs=o,this._dropListRef.withItems(o)}static \u0275fac=function(t){return new(t||s)};static \u0275dir=e.FsC({type:s,selectors:[["","cdkDropList",""],["cdk-drop-list"]],hostAttrs:[1,"cdk-drop-list"],hostVars:7,hostBindings:function(t,i){2&t&&(e.BMQ("id",i.id),e.AVh("cdk-drop-list-disabled",i.disabled)("cdk-drop-list-dragging",i._dropListRef.isDragging())("cdk-drop-list-receiving",i._dropListRef.isReceiving()))},inputs:{connectedTo:[0,"cdkDropListConnectedTo","connectedTo"],data:[0,"cdkDropListData","data"],orientation:[0,"cdkDropListOrientation","orientation"],id:"id",lockAxis:[0,"cdkDropListLockAxis","lockAxis"],disabled:[2,"cdkDropListDisabled","disabled",T.L39],sortingDisabled:[2,"cdkDropListSortingDisabled","sortingDisabled",T.L39],enterPredicate:[0,"cdkDropListEnterPredicate","enterPredicate"],sortPredicate:[0,"cdkDropListSortPredicate","sortPredicate"],autoScrollDisabled:[2,"cdkDropListAutoScrollDisabled","autoScrollDisabled",T.L39],autoScrollStep:[0,"cdkDropListAutoScrollStep","autoScrollStep"],elementContainerSelector:[0,"cdkDropListElementContainer","elementContainerSelector"],hasAnchor:[2,"cdkDropListHasAnchor","hasAnchor",T.L39]},outputs:{dropped:"cdkDropListDropped",entered:"cdkDropListEntered",exited:"cdkDropListExited",sorted:"cdkDropListSorted"},exportAs:["cdkDropList"],features:[e.Jv_([{provide:Bi,useValue:void 0},{provide:In,useExisting:s}])]})}return s})();const kr=new l.nKC("CdkDragPreview");let $i=(()=>{class s{templateRef=(0,l.WQX)(e.C4Q);_drag=(0,l.WQX)(zt,{optional:!0});data;matchSize=!1;constructor(){this._drag?._setPreviewTemplate(this)}ngOnDestroy(){this._drag?._resetPreviewTemplate(this)}static \u0275fac=function(t){return new(t||s)};static \u0275dir=e.FsC({type:s,selectors:[["ng-template","cdkDragPreview",""]],inputs:{data:"data",matchSize:[2,"matchSize","matchSize",T.L39]},features:[e.Jv_([{provide:kr,useExisting:s}])]})}return s})(),Pr=(()=>{class s{static \u0275fac=function(t){return new(t||s)};static \u0275mod=e.$C({type:s});static \u0275inj=l.G2t({providers:[Gi],imports:[Ce.Gj]})}return s})();var Dn=_(5133),jn=_(4086),Rr=_(45),Ln=_(5175);const wr=s=>({"touch-device":s}),Or=(s,n)=>({pending:s,selected:n}),Ir=s=>({$implicit:s,addAfterContent:!0}),Nn=s=>({$implicit:s}),Dr=s=>({$implicit:s,firstPlacement:"left"});function jr(s,n){1&s&&e.eu8(0)}function Lr(s,n){if(1&s&&(e.qex(0),e.DNE(1,jr,1,0,"ng-container",17),e.bVm()),2&s){const o=e.XpG().$implicit,t=e.XpG(2);e.R7$(),e.Y8G("ngTemplateOutlet",t.templates.cdkPreview)("ngTemplateOutletContext",e.eq3(2,Nn,o.name))}}function Nr(s,n){if(1&s&&e.nrm(0,"img",8),2&s){const o=e.XpG().$implicit;e.Y8G("lazyLoad",o.embedUrl)("offset",100)("alt",o.name)}}function Ur(s,n){1&s&&e.eu8(0)}function Ar(s,n){1&s&&e.eu8(0)}function zr(s,n){1&s&&e.eu8(0)}function Gr(s,n){if(1&s){const o=e.RV6();e.j41(0,"li",4),e.bIt("contextmenu",function(i){const r=l.eBV(o).$implicit,a=e.XpG(2);return l.Njj(a.emitRightClick(i,r,!1))})("press",function(i){const r=l.eBV(o).$implicit,a=e.XpG(2);return l.Njj(a.emitRightClick(i,r,!0,!1))})("tap",function(i){const r=l.eBV(o).$implicit,a=e.XpG(2);return l.Njj(a.emitRightClick(i,r,!0,!0))})("cdkDragStarted",function(){const i=l.eBV(o).$implicit,r=e.XpG(2);return l.Njj(r.draggedFileEvent.emit(i))})("cdkDragReleased",function(){l.eBV(o);const i=e.XpG(2);return l.Njj(i.draggedFileEvent.emit(void 0))}),e.DNE(1,Lr,2,4,"ng-container",5),e.j41(2,"div",6)(3,"div",7),e.nVh(4,Nr,1,3,"img",8),e.j41(5,"div",9),e.nrm(6,"app-svg-icon",10),e.k0s()(),e.j41(7,"div",11)(8,"div",12)(9,"a",13),e.nrm(10,"div",14)(11,"div",15),e.k0s(),e.j41(12,"div",16),e.DNE(13,Ur,1,0,"ng-container",17)(14,Ar,1,0,"ng-container",17),e.k0s()(),e.j41(15,"div",18),e.DNE(16,zr,1,0,"ng-container",17),e.k0s()()()()}if(2&s){const o=n.$implicit,t=e.XpG(2);e.Y8G("ngClass",e.l_i(15,Or,o.pending,o.selected))("cdkDragDisabled",t.touchDevice||o.pending),e.R7$(4),e.vxM(o.isImage?4:-1),e.R7$(2),e.Y8G("setKey",t.iconSetKeys.FILE_ICONS)("iconType",o.ext)("width",64),e.R7$(3),e.Y8G("href",o.url,e.B4B),e.R7$(),e.Y8G("innerText",o.filename),e.R7$(),e.Y8G("innerText","."+o.ext),e.R7$(2),e.Y8G("ngTemplateOutlet",t.templates.size)("ngTemplateOutletContext",e.eq3(18,Ir,o.size)),e.R7$(),e.Y8G("ngTemplateOutlet",t.templates.time)("ngTemplateOutletContext",e.eq3(20,Nn,o.time)),e.R7$(2),e.Y8G("ngTemplateOutlet",t.templates.dropdown)("ngTemplateOutletContext",e.eq3(22,Dr,o))}}function Vr(s,n){if(1&s&&(e.qex(0),e.Z7z(1,Gr,17,24,"li",3,e.fX1),e.bVm()),2&s){const o=n.$implicit;e.R7$(),e.Dyx(o)}}let Br=(()=>{var s;class n{constructor(t){this.breakpointObserver=t,this.sortedList=[],this.rightClickEvent=new e.bkB,this.draggedFileEvent=new e.bkB,this.touchDevice=I.CN,this.filterCallback=i=>!i.isFiltered,this.filesPerRow=1,this.fileListGap=16,this.iconSetKeys=rn.o,this.filesPerRowMap=new Map([[C.kO.W_768_I_1,1],[C.kO.W_933_I_2,2],[C.kO.W_960_I_3,3],[C.kO.W_1226_I_2,2],[C.kO.W_1540_I_3,3],[C.kO.W_1854_I_4,4],[C.kO.W_2168_I_5,5],[C.kO.W_2482_I_6,6],[C.kO.W_2796_I_7,7],[C.kO.W_3110_I_8,8],[C.kO.W_3424_I_9,9],[C.kO.W_3738_I_10,10]])}ngOnInit(){this.breakpointObserverSubscription=this.breakpointObserver.observe(Object.values(C.kO)).subscribe(t=>{for(const i of Object.keys(t.breakpoints))t.breakpoints[i]&&(this.filesPerRow=this.filesPerRowMap.get(i)??1);this.fileListGap=t.breakpoints[C.kO.W_768_I_1]||t.breakpoints[C.kO.W_933_I_2]||t.breakpoints[C.kO.W_960_I_3]?16:24})}emitRightClick(t,i,r,a){t.preventDefault(),!(!I.CN&&r||I.CN&&(!r||"A"===t.target.nodeName||t.target.classList.contains("dropdown-toggle")))&&this.rightClickEvent.emit({file:i,isTap:a||!1})}ngOnDestroy(){this.breakpointObserverSubscription?.unsubscribe()}static#e=s=()=>(this.\u0275fac=function(i){return new(i||n)(e.rXU(tr.Q))},this.\u0275cmp=e.VBU({type:n,selectors:[["app-upload-file-grid-list"]],inputs:{templates:"templates",sortedList:"sortedList"},outputs:{rightClickEvent:"rightClickEvent",draggedFileEvent:"draggedFileEvent"},standalone:!1,decls:5,vars:12,consts:[["scrollWindow","",1,"file-grid-scroll",3,"itemSize","ngClass"],["cdkDropList","","cdkDropListSortingDisabled","",1,"list-unstyled","mb-0","d-grid","file-list","file-grid-list",3,"cdkDropListData"],[4,"cdkVirtualFor","cdkVirtualForOf"],["cdkDrag","",1,"min-w-0","file-item",3,"ngClass","cdkDragDisabled"],["cdkDrag","",1,"min-w-0","file-item",3,"contextmenu","press","tap","cdkDragStarted","cdkDragReleased","ngClass","cdkDragDisabled"],[4,"cdkDragPreview"],[1,"flat-container","overflow-hidden","h-100","d-flex","flex-column"],[1,"file-preview","border-bottom","overflow-hidden","text-center","position-relative"],["src","data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs%3D",1,"mw-100",3,"lazyLoad","offset","alt"],[1,"position-absolute","svg-container"],[1,"d-block",3,"setKey","iconType","width"],[1,"file-info","py-3","ps-3","pe-2","d-flex","align-items-center","flex-grow-1"],[1,"d-flex","flex-column","min-w-0","flex-grow-1","pe-2"],["target","_blank","rel","noreferrer",1,"file-link","d-flex","fw-bold","me-auto","mw-100",3,"href"],[1,"text-truncate",3,"innerText"],[3,"innerText"],[1,"text-muted","fs-xs","d-flex","align-items-center"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"dropdown-tpl"]],template:function(i,r){1&i&&(e.j41(0,"cdk-virtual-scroll-viewport",0)(1,"ul",1),e.DNE(2,Vr,3,0,"ng-container",2),e.nI1(3,"arrayFilter"),e.nI1(4,"arrayChunk"),e.k0s()()),2&i&&(e.Y8G("itemSize",228+r.fileListGap)("ngClass",e.eq3(10,wr,r.touchDevice)),e.R7$(),e.Y8G("cdkDropListData",r.sortedList),e.R7$(),e.Y8G("cdkVirtualForOf",e.i5U(4,7,e.i5U(3,4,r.sortedList,r.filterCallback),r.filesPerRow)))},dependencies:[v.YU,v.T3,Xi,Vi,$i,Dn.Je,Ce.yg,Ce.E$,Ce.d6,Ce.Zr,jn.D,Rr.X,Ln.c],styles:[".file-item.pending[_ngcontent-%COMP%]{opacity:.5}.file-item.pending[_ngcontent-%COMP%]   .dropdown-tpl[_ngcontent-%COMP%]{display:none!important}.file-item.pending[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{pointer-events:none}.cdk-drag-placeholder[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{opacity:.4}.drag-multiple-files[_nghost-%COMP%]   .file-item.selected[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{opacity:.4;pointer-events:none}.cdk-drag-preview[_ngcontent-%COMP%]{min-width:150px}.cdk-drag-dragging[_ngcontent-%COMP%]{display:none}",".file-grid-scroll[_ngcontent-%COMP%]{margin-bottom:-16px!important}[_nghost-%COMP%]:not(.drag-multiple-files)   .file-grid-scroll[_ngcontent-%COMP%]:not(.touch-device)   .file-item[_ngcontent-%COMP%]:not(.pending):hover, .drag-multiple-files[_nghost-%COMP%]   .file-grid-scroll[_ngcontent-%COMP%]:not(.touch-device)   .file-item[_ngcontent-%COMP%]:not(.pending):not(.selected):hover{box-shadow:0 .375rem .25rem #00000013}.file-grid-list[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:16px;padding-bottom:16px!important}.file-item[_ngcontent-%COMP%]{transition:opacity .2s,box-shadow .2s;height:228px}.file-item.selected[_ngcontent-%COMP%]   .flat-container[_ngcontent-%COMP%]{border-color:#c6cfff}.file-item.selected[_ngcontent-%COMP%]   .file-info[_ngcontent-%COMP%]{background-color:#dae0ff}.file-item.selected[_ngcontent-%COMP%]   .file-link[_ngcontent-%COMP%]{text-shadow:0 1px #fff}.touch-device[_ngcontent-%COMP%]   .file-link[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{pointer-events:none}.flat-container[_ngcontent-%COMP%]{transition:border-color .2s}.file-info[_ngcontent-%COMP%]{transition:background-color .2s}.file-preview[_ngcontent-%COMP%]{height:150px;background-color:rgb(var(--bs-light-rgb))}.file-preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{opacity:0;transition:opacity .3s}.file-preview[_ngcontent-%COMP%]   img.ng-lazyloaded[_ngcontent-%COMP%]:not(.ng-failed-lazyloaded){opacity:1}.file-preview[_ngcontent-%COMP%]   img.ng-failed-lazyloaded[_ngcontent-%COMP%]{display:none}.ng-lazyloaded[_ngcontent-%COMP%]:not(.ng-failed-lazyloaded) + .svg-container[_ngcontent-%COMP%], .ng-lazyloading[_ngcontent-%COMP%] + .svg-container[_ngcontent-%COMP%]{display:none}.svg-container[_ngcontent-%COMP%]{left:50%;top:50%;transform:translate(-50%,-50%);background-color:inherit}.file-item[_ngcontent-%COMP%]:not(.cdk-drag-placeholder)   .svg-container[_ngcontent-%COMP%]{opacity:0;animation:_ngcontent-%COMP%_fadeIn07 .3s linear forwards}.cdk-drag-placeholder[_ngcontent-%COMP%]   .svg-container[_ngcontent-%COMP%]{opacity:.7}@keyframes _ngcontent-%COMP%_fadeIn07{0%{opacity:0}to{opacity:.7}}@media (min-width: 768px){.file-grid-list[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(290px,1fr))}}@media (min-width: 960px){.file-grid-list[_ngcontent-%COMP%]{gap:24px;padding-bottom:24px!important}.file-grid-scroll[_ngcontent-%COMP%]{margin-bottom:-24px!important}.file-grid-scroll[_ngcontent-%COMP%]:not(.touch-device){margin-left:-.5rem!important;margin-right:-.5rem!important}.file-grid-scroll[_ngcontent-%COMP%]:not(.touch-device)   .file-list[_ngcontent-%COMP%]{padding-left:.5rem!important;padding-right:.5rem!important}}@media (min-width: 3738px){.file-grid-list[_ngcontent-%COMP%]{grid-template-columns:repeat(10,1fr)}}"]}))}return s(),n})();const Xr=s=>({"touch-device":s}),$r=(s,n)=>({pending:s,selected:n}),Hr=s=>({"file-unused":s}),Hi=s=>({$implicit:s}),Yr=s=>({$implicit:s,firstPlacement:"left-top"});function Wr(s,n){1&s&&e.eu8(0)}function Qr(s,n){if(1&s&&(e.qex(0),e.DNE(1,Wr,1,0,"ng-container",12),e.bVm()),2&s){const o=e.XpG().$implicit,t=e.XpG();e.R7$(),e.Y8G("ngTemplateOutlet",t.templates.cdkPreview)("ngTemplateOutletContext",e.eq3(2,Hi,o.name))}}function qr(s,n){1&s&&e.eu8(0)}function Kr(s,n){1&s&&e.eu8(0)}function Zr(s,n){1&s&&e.eu8(0)}function Jr(s,n){if(1&s){const o=e.RV6();e.j41(0,"li",4),e.bIt("contextmenu",function(i){const r=l.eBV(o).$implicit,a=e.XpG();return l.Njj(a.emitRightClick(i,r,!1))})("press",function(i){const r=l.eBV(o).$implicit,a=e.XpG();return l.Njj(a.emitRightClick(i,r,!0,!1))})("tap",function(i){const r=l.eBV(o).$implicit,a=e.XpG();return l.Njj(a.emitRightClick(i,r,!0,!0))})("cdkDragStarted",function(){const i=l.eBV(o).$implicit,r=e.XpG();return l.Njj(r.draggedFileEvent.emit(i))})("cdkDragReleased",function(){l.eBV(o);const i=e.XpG();return l.Njj(i.draggedFileEvent.emit(void 0))}),e.DNE(1,Qr,2,4,"ng-container",5),e.nrm(2,"app-svg-icon",6),e.j41(3,"a",7),e.nrm(4,"div",8)(5,"div",9),e.k0s(),e.nrm(6,"div",10),e.j41(7,"div",11),e.DNE(8,qr,1,0,"ng-container",12),e.k0s(),e.j41(9,"div",13),e.DNE(10,Kr,1,0,"ng-container",12),e.k0s(),e.j41(11,"div",14),e.DNE(12,Zr,1,0,"ng-container",12),e.k0s()()}if(2&s){const o=n.$implicit,t=e.XpG();e.Y8G("ngClass",e.l_i(16,$r,o.pending,o.selected))("cdkDragDisabled",t.touchDevice||o.pending),e.R7$(2),e.Y8G("setKey",t.iconSetKeys.FILE_ICONS)("iconType",o.ext)("width",24),e.R7$(),e.Y8G("href",o.url,e.B4B)("ngClass",e.eq3(19,Hr,!1===o.accessedInThreshold)),e.R7$(),e.Y8G("innerText",o.filename),e.R7$(),e.Y8G("innerText","."+o.ext),e.R7$(),e.Y8G("innerText",o.ext),e.R7$(2),e.Y8G("ngTemplateOutlet",t.templates.size)("ngTemplateOutletContext",e.eq3(21,Hi,o.size)),e.R7$(2),e.Y8G("ngTemplateOutlet",t.templates.time)("ngTemplateOutletContext",e.eq3(23,Hi,o.time)),e.R7$(2),e.Y8G("ngTemplateOutlet",t.templates.dropdown)("ngTemplateOutletContext",e.eq3(25,Yr,o))}}let ea=(()=>{var s;class n{constructor(){this.sortedList=[],this.rightClickEvent=new e.bkB,this.draggedFileEvent=new e.bkB,this.touchDevice=I.CN,this.filterCallback=t=>!t.isFiltered,this.iconSetKeys=rn.o}emitRightClick(t,i,r,a){t.preventDefault(),!(!I.CN&&r||I.CN&&(!r||"A"===t.target.nodeName||t.target.classList.contains("dropdown-toggle")))&&this.rightClickEvent.emit({file:i,isTap:a||!1})}static#e=s=()=>(this.\u0275fac=function(i){return new(i||n)},this.\u0275cmp=e.VBU({type:n,selectors:[["app-upload-file-simple-list"]],inputs:{templates:"templates",sortedList:"sortedList"},outputs:{rightClickEvent:"rightClickEvent",draggedFileEvent:"draggedFileEvent"},standalone:!1,decls:5,vars:9,consts:[[1,"flat-container","overflow-hidden"],["scrollWindow","",1,"file-simple-scroll",3,"itemSize","ngClass"],["cdkDropList","","cdkDropListSortingDisabled","",1,"list-unstyled","mb-0","file-list","file-simple-list",3,"cdkDropListData"],["class","file-item d-grid ps-3 ps-md-4 pe-2 pe-md-3","cdkDrag","",3,"ngClass","cdkDragDisabled","contextmenu","press","tap","cdkDragStarted","cdkDragReleased",4,"cdkVirtualFor","cdkVirtualForOf"],["cdkDrag","",1,"file-item","d-grid","ps-3","ps-md-4","pe-2","pe-md-3",3,"contextmenu","press","tap","cdkDragStarted","cdkDragReleased","ngClass","cdkDragDisabled"],[4,"cdkDragPreview"],[1,"me-3","me-md-4","text-center","mx-auto","d-block",3,"setKey","iconType","width"],["target","_blank","rel","noreferrer",1,"filename","fw-bold","d-flex","me-auto","min-w-0","mw-100",3,"href","ngClass"],[1,"mw-100","text-truncate",3,"innerText"],[1,"flex-shrink-0","pe-2",3,"innerText"],[1,"text-uppercase","file-extension","text-center","mx-auto",3,"innerText"],[1,"size-tpl","text-center","mx-auto"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"time-tpl","text-center","mx-auto"],[1,"dropdown-tpl","d-flex","flex-end"]],template:function(i,r){1&i&&(e.j41(0,"div",0)(1,"cdk-virtual-scroll-viewport",1)(2,"ul",2),e.DNE(3,Jr,13,27,"li",3),e.nI1(4,"arrayFilter"),e.k0s()()()),2&i&&(e.R7$(),e.Y8G("itemSize",57)("ngClass",e.eq3(7,Xr,r.touchDevice)),e.R7$(),e.Y8G("cdkDropListData",r.sortedList),e.R7$(),e.Y8G("cdkVirtualForOf",e.i5U(4,4,r.sortedList,r.filterCallback)))},dependencies:[v.YU,v.T3,Xi,Vi,$i,Ce.yg,Ce.E$,Ce.d6,Ce.Zr,jn.D,Ln.c],styles:[".file-item.pending[_ngcontent-%COMP%]{opacity:.5}.file-item.pending[_ngcontent-%COMP%]   .dropdown-tpl[_ngcontent-%COMP%]{display:none!important}.file-item.pending[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{pointer-events:none}.cdk-drag-placeholder[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{opacity:.4}.drag-multiple-files[_nghost-%COMP%]   .file-item.selected[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{opacity:.4;pointer-events:none}.cdk-drag-preview[_ngcontent-%COMP%]{min-width:150px}.cdk-drag-dragging[_ngcontent-%COMP%]{display:none}",".file-simple-scroll[_ngcontent-%COMP%]:not(.touch-device)   .file-item[_ngcontent-%COMP%]:not(.selected):hover{background-color:rgb(var(--bs-light-rgb))}.file-item[_ngcontent-%COMP%]{grid-template-columns:calc(24px + 1rem) calc(100% - 48px - 1rem) 24px;align-items:center;transition:opacity .2s,background-color .2s;background-color:#fff;height:57px}.file-item[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:not(.dropdown-tpl){font-size:.875rem}.file-item[_ngcontent-%COMP%]:not(:first-of-type){border-top:1px solid transparent}.file-item[_ngcontent-%COMP%]:not(:first-of-type):not(.selected){border-color:#dee2e6}.file-item[_ngcontent-%COMP%]:not(:first-of-type).selected, .file-item[_ngcontent-%COMP%]:not(:first-of-type).selected + .file-item[_ngcontent-%COMP%]{border-color:#c6cfff}.file-item.selected[_ngcontent-%COMP%]{background-color:#dae0ff}.file-extension[_ngcontent-%COMP%], .size-tpl[_ngcontent-%COMP%], .time-tpl[_ngcontent-%COMP%]{display:none}app-svg-icon[_ngcontent-%COMP%]{color:#495057}.filename.file-unused[_ngcontent-%COMP%]{color:rgba(var(--bs-link-color-rgb),var(--bs-link-opacity, .8))}.touch-device[_ngcontent-%COMP%]   .filename[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{pointer-events:none}@media (min-width: 768px){.file-simple-list[_ngcontent-%COMP%]   .file-item[_ngcontent-%COMP%]{grid-template-columns:calc(24px + 1.5rem) calc(58% - 24px - 1.5rem) repeat(2,18%) 6%}.file-simple-list[_ngcontent-%COMP%]   .file-item[_ngcontent-%COMP%]   .size-tpl[_ngcontent-%COMP%], .file-simple-list[_ngcontent-%COMP%]   .file-item[_ngcontent-%COMP%]   .time-tpl[_ngcontent-%COMP%]{display:initial}}@media (min-width: 1200px){.file-simple-list[_ngcontent-%COMP%]   .file-item[_ngcontent-%COMP%]{grid-template-columns:calc(24px + 1.5rem) calc(52% - 24px - 1.5rem) repeat(3,14%) 6%}.file-simple-list[_ngcontent-%COMP%]   .file-item[_ngcontent-%COMP%]   .file-extension[_ngcontent-%COMP%]{display:initial}}"]}))}return s(),n})();var pi=_(8289);const Un=s=>({"drag-multiple-files":s}),An=(s,n,o,t)=>({size:s,time:n,dropdown:o,cdkPreview:t}),ta=s=>({"me-1 after-content":s}),ia=()=>[0,5],na=s=>({offset:s}),oa=s=>({"touch-device":s}),sa=s=>[s,"left-bottom","auto"];function ra(s,n){if(1&s){const o=e.RV6();e.j41(0,"app-upload-file-grid-list",8),e.bIt("rightClickEvent",function(i){l.eBV(o);const r=e.XpG(4);return l.Njj(r.onRightClick(i))})("draggedFileEvent",function(i){l.eBV(o);const r=e.XpG(4);return l.Njj(r.pushDraggedFile(i))}),e.k0s()}if(2&s){const o=e.XpG(4),t=e.sdS(2),i=e.sdS(4),r=e.sdS(6),a=e.sdS(8);e.Y8G("ngClass",e.eq3(3,Un,o.isDraggingSelectedFiles))("sortedList",o.sortedList)("templates",e.ziG(5,An,t,i,r,a))}}function aa(s,n){if(1&s){const o=e.RV6();e.j41(0,"app-upload-file-simple-list",9),e.bIt("rightClickEvent",function(i){l.eBV(o);const r=e.XpG(4);return l.Njj(r.onRightClick(i))})("draggedFileEvent",function(i){l.eBV(o);const r=e.XpG(4);return l.Njj(r.pushDraggedFile(i))}),e.k0s()}if(2&s){const o=e.XpG(4),t=e.sdS(2),i=e.sdS(4),r=e.sdS(6),a=e.sdS(8);e.Y8G("sortedList",o.sortedList)("ngClass",e.eq3(3,Un,o.isDraggingSelectedFiles))("templates",e.ziG(5,An,t,i,r,a))}}function la(s,n){if(1&s&&e.nVh(0,ra,1,10,"app-upload-file-grid-list",6)(1,aa,1,10,"app-upload-file-simple-list",7),2&s){const o=e.XpG(3);e.vxM(o.layoutOptions.type===o.layoutTypes.GRID?0:1)}}function ca(s,n){1&s&&e.nrm(0,"app-upload-all-file-filtered")}function da(s,n){if(1&s&&e.nVh(0,la,2,1)(1,ca,1,0,"app-upload-all-file-filtered"),2&s){const o=e.XpG(2);e.vxM(o.filteredElementsCount<o.sortedList.length?0:1)}}function pa(s,n){1&s&&e.nrm(0,"app-upload-empty-file-list")}function ha(s,n){if(1&s&&(e.j41(0,"div",5),e.EFF(1," File e Immagini "),e.k0s(),e.nVh(2,da,2,1)(3,pa,1,0,"app-upload-empty-file-list")),2&s){const o=e.XpG();e.R7$(2),e.vxM(o.sortedList.length>0?2:3)}}function ma(s,n){if(1&s&&(e.nrm(0,"div",10),e.nI1(1,"formatBytes")),2&s){const t=n.addAfterContent;e.Y8G("innerText",e.bMT(1,2,n.$implicit))("ngClass",e.eq3(4,ta,t))}}function ua(s,n){if(1&s&&(e.j41(0,"div",11),e.nI1(1,"date"),e.nrm(2,"span",12),e.k0s()),2&s){const o=n.$implicit;e.Y8G("appTippy",e.i5U(1,3,o,"dd-MM-YY HH:mm")||"")("tippyProps",e.eq3(7,na,e.lJ4(6,ia))),e.R7$(2),e.Y8G("date",o)}}function _a(s,n){if(1&s&&e.nrm(0,"app-upload-file-menu",16),2&s){const o=e.XpG().$implicit,t=e.sdS(1);e.Y8G("file",o)("isSelected",o.selected)("dropdownRef",t)}}function ga(s,n){if(1&s){const o=e.RV6();e.j41(0,"div",13,4),e.bIt("openChange",function(i){const r=l.eBV(o).$implicit,a=e.XpG();return l.Njj(a.onDropdownOpenChange(i,r))}),e.j41(2,"div",14),e.EFF(3," more_vert "),e.k0s(),e.j41(4,"div",15),e.nVh(5,_a,1,3,"app-upload-file-menu",16),e.k0s()()}if(2&s){const o=n.$implicit,t=n.firstPlacement,i=e.XpG();e.Y8G("ngClass",e.eq3(3,oa,i.touchDevice))("placement",e.eq3(5,sa,t)),e.R7$(5),e.vxM(o.hasDropdown?5:-1)}}function fa(s,n){if(1&s&&e.nrm(0,"div",17),2&s){const o=n.$implicit,t=e.XpG();e.Y8G("innerHTML",t.isDraggingSelectedFiles&&t.selectedFileCounter>1?t.selectedFileCounter+" file selezionati":o,e.npT)}}let va=(()=>{var s;class n{constructor(t,i){this.uploadObservablesService=t,this.uploadPreferencesService=i,this.fileList=[],this.filter="",this.loading=!0,this.sortedList=[],this.layoutTypes=C.om,this.filteredElementsCount=0,this.isDraggingSelectedFiles=!1,this.selectedFileCounter=0,this.touchDevice=I.CN,this.currentFilter="",this.sortedBy=C.Kk.FILENAME,this.sortOrder=1,this.subscriptions=[],this.layoutOptions=this.uploadPreferencesService.layoutOptions}ngOnInit(){this.setSortOption(this.layoutOptions.orderBy,this.layoutOptions.asc),this.copyList(),this.sort(),this.setSubscriptions()}updateListAfterChange(){this.sortedList=[...this.sortedList]}setSubscriptions(){this.subscriptions.push(this.uploadObservablesService.layoutOptionsObservable.subscribe(t=>{this.layoutOptions=t,this.setSortOption(t.orderBy,t.asc),this.sort(),this.updateListAfterChange()}),this.uploadObservablesService.renameEntityObservable.subscribe(t=>{if(t.newEntity.type!==C.OE.FILE)return;const i=this.sortedList.findIndex(r=>r.name===t.oldName);i>-1&&(this.sortedList[i]={...t.newEntity,isFiltered:!1,pending:!1,selected:this.sortedList[i].selected,hasDropdown:this.sortedList[i].hasDropdown}),this.updateListAfterChange()}),this.uploadObservablesService.deleteFileObservable.subscribe(t=>{for(const i of t){const r=this.sortedList.findIndex(a=>a.name===i);r>-1&&this.sortedList.splice(r,1)}this.updateListAfterChange()}),this.uploadObservablesService.uploadedFileObservable.subscribe(t=>{this.sortedList.unshift(...t.map(i=>({...i,isFiltered:!1,pending:!1,selected:!1,hasDropdown:!1}))),this.sort(),this.filterList(),this.updateListAfterChange()}),this.uploadObservablesService.entityPendingObservable.subscribe(t=>{t.forEach(i=>{if(i.type!==C.OE.FILE)return;const r=this.sortedList.findIndex(a=>a.name===i.name);r>-1&&(this.sortedList[r].pending=i.start)})}),this.uploadObservablesService.selectedFileListObservable.subscribe(t=>{const i=t.map(r=>r.name);this.sortedList.filter(r=>r.selected||i.includes(r.name)).forEach(r=>{r.selected=i.includes(r.name)}),this.selectedFileCounter=t.length}))}ngOnChanges(t){t.fileList&&!t.fileList.firstChange&&(this.copyList(),this.sortedList.length&&(this.sort(),this.currentFilter="",this.filterList())),t.filter&&!t.filter.firstChange&&(this.filterList(),this.updateListAfterChange())}setSortOption(t,i){this.sortedBy=t,this.sortOrder=i?1:-1}sort(){this.sortedBy!==C.Kk.FILENAME?(this.sortedList.sort((t,i)=>this.sortOrder*(t[this.sortedBy]>i[this.sortedBy]?1:-1)),this.sortedBy===C.Kk.TIME&&this.sortedList.reverse()):(0,Oi.Tb)(this.sortedList,"filename",this.sortOrder>0)}copyList(){this.sortedList=this.fileList.map(t=>({...t,isFiltered:!1,pending:!1,selected:!1,hasDropdown:!1}))}filterList(){if(this.currentFilter===this.filter)return;if(this.currentFilter=this.filter,this.filteredElementsCount=0,0===this.filter.length)return void this.sortedList.filter(i=>i.isFiltered).forEach(i=>i.isFiltered=!1);const t=this.filter.toLowerCase();for(const i of this.sortedList)i.isFiltered=!i.name.toLowerCase().includes(t),this.filteredElementsCount+=+i.isFiltered}pushDraggedFile(t){if(this.isDraggingSelectedFiles=!1,t)return t.selected?(this.uploadObservablesService.pushDraggedFileList(this.sortedList.filter(i=>i.selected)),void(this.isDraggingSelectedFiles=!0)):void this.uploadObservablesService.pushDraggedFileList([t]);this.uploadObservablesService.pushDraggedFileList([])}onRightClick(t){if(!t.isTap||0!==this.selectedFileCounter)return this.uploadObservablesService.pushSelectedFile({name:t.file.name,selected:!t.file.selected}),!1}onDropdownOpenChange(t,i){t&&!i.hasDropdown&&(i.hasDropdown=!0)}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}static#e=s=()=>(this.\u0275fac=function(i){return new(i||n)(e.rXU(ie.f),e.rXU(on.d))},this.\u0275cmp=e.VBU({type:n,selectors:[["app-upload-file-list"]],inputs:{fileList:"fileList",filter:"filter",loading:"loading"},standalone:!1,features:[e.OA$],decls:9,vars:1,consts:[["fileSizeTemplate",""],["fileTimeTemplate",""],["fileDropdownTemplate",""],["fileCdkPreview",""],["fileDropdown","ngbDropdown"],[1,"px-md-1","mb-2","fv-small-caps","container-fluid"],[3,"ngClass","sortedList","templates"],[3,"sortedList","ngClass","templates"],[3,"rightClickEvent","draggedFileEvent","ngClass","sortedList","templates"],[3,"rightClickEvent","draggedFileEvent","sortedList","ngClass","templates"],[1,"file-size",3,"innerText","ngClass"],[1,"file-time",3,"appTippy","tippyProps"],["timeago","",3,"date"],["ngbDropdown","","display","dynamic","container","body",1,"dropdown-no-caret","ms-auto","flex-shrink-0",3,"openChange","ngClass","placement"],["ngbDropdownToggle","",1,"material-icons-outlined","d-block","cursor-pointer","dropdown-icon"],["ngbDropdownMenu",""],[3,"file","isSelected","dropdownRef"],[1,"flat-container","p-3",3,"innerHTML"]],template:function(i,r){1&i&&(e.nVh(0,ha,4,1),e.DNE(1,ma,2,6,"ng-template",null,0,e.C5r)(3,ua,3,9,"ng-template",null,1,e.C5r)(5,ga,6,7,"ng-template",null,2,e.C5r)(7,fa,1,1,"ng-template",null,3,e.C5r)),2&i&&e.vxM(r.loading?-1:0)},dependencies:[v.YU,y.tg,y.do,y.U0,B,Oe.e,sn,Js,er,Br,ea,v.vh,pi.L],styles:['.file-size.after-content[_ngcontent-%COMP%]:after{content:" - "}.dropdown-no-caret[_ngcontent-%COMP%]:not(.touch-device)   .dropdown-icon[_ngcontent-%COMP%]{opacity:.7;transition:opacity .2s}.dropdown-no-caret[_ngcontent-%COMP%]:not(.touch-device)   .dropdown-icon[_ngcontent-%COMP%]:hover{opacity:1}']}))}return s(),n})();const Ca=(s,n)=>({$implicit:s,index:0,last:n}),ba=(s,n,o)=>({$implicit:s,index:n,last:o}),Ea=s=>({active:s});function Fa(s,n){1&s&&e.eu8(0)}function ya(s,n){1&s&&e.eu8(0)}function xa(s,n){if(1&s&&e.DNE(0,ya,1,0,"ng-container",2),2&s){const o=n.$implicit,t=n.$index,i=n.$count;e.XpG();const r=e.sdS(5);e.Y8G("ngTemplateOutlet",r)("ngTemplateOutletContext",e.sMw(2,ba,o,t+1,t===i-1))}}function Ma(s,n){if(1&s){const o=e.RV6();e.j41(0,"a",6),e.bIt("click",function(){l.eBV(o);const i=e.XpG().index,r=e.XpG();return l.Njj(r.navigateEvent.emit(i))}),e.k0s()}if(2&s){const o=e.XpG().$implicit;e.Y8G("innerText",o)}}function Ta(s,n){if(1&s&&e.nrm(0,"span",5),2&s){const o=e.XpG().$implicit;e.Y8G("innerText",o)}}function ka(s,n){if(1&s&&(e.j41(0,"li",3),e.nVh(1,Ma,1,1,"a",4)(2,Ta,1,1,"span",5),e.k0s()),2&s){const o=n.last;e.Y8G("ngClass",e.eq3(2,Ea,o)),e.R7$(),e.vxM(o?2:1)}}let Sa=(()=>{var s;class n{constructor(){this.currentFolderPath=[],this.navigateEvent=new e.bkB,this.rootName="Il mio spazio"}static#e=s=()=>(this.\u0275fac=function(i){return new(i||n)},this.\u0275cmp=e.VBU({type:n,selectors:[["app-upload-breadcrumb"]],inputs:{currentFolderPath:"currentFolderPath"},outputs:{navigateEvent:"navigateEvent"},standalone:!1,decls:6,vars:5,consts:[["breadcrumbItem",""],[1,"breadcrumb","folders-breadcrumb","mb-0"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"breadcrumb-item","small","text-break",3,"ngClass"],["role","button",3,"innerText"],[3,"innerText"],["role","button",3,"click","innerText"]],template:function(i,r){if(1&i&&(e.j41(0,"ol",1),e.DNE(1,Fa,1,0,"ng-container",2),e.Z7z(2,xa,1,6,"ng-container",null,e.fX1),e.DNE(4,ka,3,4,"ng-template",null,0,e.C5r),e.k0s()),2&i){const a=e.sdS(5);e.R7$(),e.Y8G("ngTemplateOutlet",a)("ngTemplateOutletContext",e.l_i(2,Ca,r.rootName,0===r.currentFolderPath.length)),e.R7$(),e.Dyx(r.currentFolderPath)}},dependencies:[v.YU,v.T3],styles:[".folders-breadcrumb[_ngcontent-%COMP%]{--bs-breadcrumb-divider: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='8' height='8'%3E%3Cpath d='M2.5 0L1 1.5 3.5 4 1 6.5 2.5 8l4-4-4-4z' fill='%236c757d'/%3E%3C/svg%3E\")}"]}))}return s(),n})(),Pa=(()=>{var s;class n{constructor(t){this.uploadObservablesService=t,this.createNewFolderEvent=new e.bkB,this.actionNames=C.SP}pushAction(t){this.uploadObservablesService.pushAction({name:t,payload:{entities:[{name:this.folder.name,type:C.OE.FOLDER,ext:"",url:this.folder.url,embedUrl:this.folder.url,isImage:!1}]}})}static#e=s=()=>(this.\u0275fac=function(i){return new(i||n)(e.rXU(ie.f))},this.\u0275cmp=e.VBU({type:n,selectors:[["app-upload-folder-menu"]],inputs:{folder:"folder"},outputs:{createNewFolderEvent:"createNewFolderEvent"},standalone:!1,decls:27,vars:0,consts:[[1,"list-unstyled","mb-0","dropdown-material-icons"],["role","button",1,"dropdown-item","d-flex","align-items-center",3,"click"],[1,"material-icons-outlined","d-block"],[1,"dropdown-divider"]],template:function(i,r){1&i&&(e.j41(0,"ul",0)(1,"li")(2,"a",1),e.bIt("click",function(){return r.createNewFolderEvent.emit()}),e.j41(3,"div",2),e.EFF(4," add_circle_outline "),e.k0s(),e.j41(5,"div"),e.EFF(6,"Nuova cartella"),e.k0s()()(),e.j41(7,"li")(8,"a",1),e.bIt("click",function(){return r.pushAction(r.actionNames.MOVE)}),e.j41(9,"div",2),e.EFF(10,"drive_file_move"),e.k0s(),e.j41(11,"div"),e.EFF(12,"Sposta"),e.k0s()()(),e.j41(13,"li")(14,"a",1),e.bIt("click",function(){return r.pushAction(r.actionNames.RENAME)}),e.j41(15,"div",2),e.EFF(16," drive_file_rename_outline "),e.k0s(),e.j41(17,"div"),e.EFF(18,"Rinomina"),e.k0s()()(),e.j41(19,"li"),e.nrm(20,"hr",3),e.k0s(),e.j41(21,"li")(22,"a",1),e.bIt("click",function(){return r.pushAction(r.actionNames.DELETE)}),e.j41(23,"div",2),e.EFF(24,"delete"),e.k0s(),e.j41(25,"div"),e.EFF(26,"Elimina"),e.k0s()()()())},encapsulation:2}))}return s(),n})();const Ra=["modal"],wa=(s,n)=>({"is-valid":s,"is-invalid":n});function Oa(s,n){1&s&&e.EFF(0," Il nome non pu\xf2 essere vuoto! ")}function Ia(s,n){if(1&s&&e.nrm(0,"span",12),2&s){const o=e.XpG(4);e.Y8G("innerHTML",o.errorMessage,e.npT)}}function Da(s,n){1&s&&e.EFF(0," Questo nome \xe8 gi\xe0 usato da un'altra cartella! ")}function ja(s,n){if(1&s&&e.nVh(0,Ia,1,1,"span",12)(1,Da,1,0),2&s){const o=e.XpG(3);e.vxM(o.nameValidationErrors.alreadyUsed?1:0)}}function La(s,n){if(1&s&&(e.j41(0,"div",8),e.nVh(1,Oa,1,0)(2,ja,2,1),e.k0s()),2&s){const o=e.XpG(2);e.R7$(),e.vxM(o.nameValidationErrors.invalidLength?1:2)}}function Na(s,n){if(1&s){const o=e.RV6();e.j41(0,"p"),e.EFF(1," Tramite questo modal \xe8 possibile "),e.j41(2,"strong"),e.EFF(3,"creare una nuova cartella"),e.k0s(),e.EFF(4," nella posizione corrente. Il nome della nuova cartella far\xe0 "),e.j41(5,"strong"),e.EFF(6,"parte dell'url"),e.k0s(),e.EFF(7," di tutti i file che la cartella stessa conterr\xe0. Per questo motivo, \xe8 bene che includa esclusivamente dei caratteri facilmente inseribili nei link di un file: in particolare, sono accettati i caratteri "),e.j41(8,"em"),e.EFF(9,"a-z"),e.k0s(),e.EFF(10,", sia maiuscoli che minuscoli, i trattini alti e bassi "),e.j41(11,"em"),e.EFF(12,"-_"),e.k0s(),e.EFF(13," e i numeri. "),e.k0s(),e.j41(14,"div",5)(15,"label",6),e.EFF(16,"Nome della nuova cartella:"),e.k0s(),e.j41(17,"input",7,1),e.mxI("ngModelChange",function(i){l.eBV(o);const r=e.XpG();return e.DH7(r.name,i)||(r.name=i),l.Njj(i)}),e.bIt("ngModelChange",function(){l.eBV(o);const i=e.XpG();return l.Njj(i.checkNameValidity())}),e.k0s(),e.nVh(19,La,3,1,"div",8),e.k0s(),e.j41(20,"div",9)(21,"input",10),e.mxI("ngModelChange",function(i){l.eBV(o);const r=e.XpG();return e.DH7(r.openFolderOnCreation,i)||(r.openFolderOnCreation=i),l.Njj(i)}),e.k0s(),e.j41(22,"label",11),e.EFF(23,"Apri la cartella dopo la creazione"),e.k0s()()}if(2&s){const o=e.sdS(18),t=e.XpG();e.R7$(17),e.Y8G("ngClass",e.l_i(5,wa,o.dirty&&t.isNameValid,o.dirty&&!t.isNameValid))("pattern",t.nameRegex),e.R50("ngModel",t.name),e.R7$(2),e.vxM(t.isNameValid?-1:19),e.R7$(2),e.R50("ngModel",t.openFolderOnCreation)}}function Ua(s,n){if(1&s){const o=e.RV6();e.j41(0,"button",13),e.bIt("click",function(){l.eBV(o),e.XpG();const i=e.sdS(1);return l.Njj(i.close("Close click"))}),e.EFF(1," Annulla "),e.k0s(),e.j41(2,"button",14),e.bIt("click",function(){l.eBV(o);const i=e.XpG();return l.Njj(i.create())}),e.EFF(3," Crea "),e.k0s()}if(2&s){const o=e.XpG();e.R7$(2),e.Y8G("disabled",!o.isNameValid)}}let Aa=(()=>{var s;class n{constructor(){this.reservedNames=[],this.createFolderEvent=new e.bkB,this.nameRegex=He.gF,this.name="",this.openFolderOnCreation=!1,this.isNameValid=!1,this.nameValidationErrors=He.tv,this.errorMessage="",this.opened=!1}open(){this.opened=!0,this.modalComponent.open()}onHidden(){this.opened=!1,this.name="",this.openFolderOnCreation=!1,this.isNameValid=!1,this.errorMessage="",this.nameValidationErrors=He.tv}checkNameValidity(){this.nameValidationErrors=(0,j.Jq)(this.name,"",C.OE.FOLDER,this.reservedNames),this.isNameValid=!Object.values(this.nameValidationErrors).some(t=>t),this.nameValidationErrors.invalidStartOrEnd?this.errorMessage="Il nome non pu\xf2 iniziare o finire con un punto o uno spazio!":this.isNameValid||(this.errorMessage="Il nome pu\xf2 contenere solo i caratteri <em>a-z</em>, i trattini alti e bassi <em>-_</em>, gli spazi e i numeri!")}create(){!this.opened||!this.isNameValid||(this.createFolderEvent.emit({name:this.name,open:this.openFolderOnCreation}),this.modalComponent.close())}static#e=s=()=>(this.\u0275fac=function(i){return new(i||n)},this.\u0275cmp=e.VBU({type:n,selectors:[["app-upload-newfolder-modal"]],viewQuery:function(i,r){if(1&i&&e.GBs(Ra,5),2&i){let a;e.mGM(a=e.lsd())&&(r.modalComponent=a.first)}},inputs:{reservedNames:"reservedNames"},outputs:{createFolderEvent:"createFolderEvent"},standalone:!1,decls:4,vars:1,consts:[["modal",""],["newNameInput","ngModel"],["title","Crea nuova cartella",3,"hidden","disableCloseButton"],["appModalBody",""],["appModalFooter",""],[1,"mt-2"],["for","folder-name",1,"fs-sm"],["type","text","id","folder-name","required","",1,"form-control",3,"ngModelChange","ngClass","pattern","ngModel"],[1,"invalid-feedback"],[1,"form-check","mt-2","mb-0","fs-sm"],["type","checkbox","id","open-folder",1,"form-check-input",3,"ngModelChange","ngModel"],["for","open-folder",1,"form-check-label"],[3,"innerHTML"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"click","disabled"]],template:function(i,r){if(1&i){const a=e.RV6();e.j41(0,"app-modal",2,0),e.bIt("hidden",function(){return l.eBV(a),l.Njj(r.onHidden())}),e.DNE(2,Na,24,8,"ng-template",3)(3,Ua,4,1,"ng-template",4),e.k0s()}2&i&&e.Y8G("disableCloseButton",!0)},dependencies:[v.YU,x.me,x.Zm,x.BC,x.YS,x.R_,x.vS,Z.z,fe.d,Xe.I],encapsulation:2}))}return s(),n})();var zn=_(4354);const za=(s,n,o)=>({"touch-device":s,"d-grid grid-list":n,"simple-list flat-container d-flex flex-column":o}),Ga=(s,n)=>({"is-entered":s,"flat-container px-3":n}),Va=(s,n,o)=>({pending:s,"is-entered":n,"flat-container":o}),Ba=()=>["left-top","auto"];function Xa(s,n){1&s&&(e.j41(0,"div",2),e.nrm(1,"app-loader",4),e.k0s())}function $a(s,n){1&s&&(l.qSk(),e.qex(0),e.nrm(1,"path",19)(2,"path",20),e.bVm())}function Ha(s,n){}function Ya(s,n){if(1&s&&e.DNE(0,Ha,0,0,"ng-template",17),2&s){e.XpG();const o=e.sdS(5);e.Y8G("ngTemplateOutlet",o)}}function Wa(s,n){1&s&&(l.qSk(),e.nrm(0,"path",21))}function Qa(s,n){if(1&s){const o=e.RV6();e.j41(0,"li",16),e.bIt("click",function(){l.eBV(o);const i=e.XpG(2);return l.Njj(i.navigateUp(-1))})("mouseenter",function(){l.eBV(o);const i=e.XpG(2);return l.Njj(i.setFolderEntered(null,!0))})("mouseleave",function(){l.eBV(o);const i=e.XpG(2);return l.Njj(i.setFolderEntered(void 0))}),l.qSk(),e.j41(1,"svg",12),e.nVh(2,$a,3,0,":svg:ng-container")(3,Ya,1,1,":svg:ng-template",17),e.DNE(4,Wa,1,0,"ng-template",null,1,e.C5r),e.k0s(),l.joV(),e.j41(6,"div",18),e.EFF(7,"cartella superiore"),e.k0s()()}if(2&s){const o=e.XpG(2);e.Y8G("ngClass",e.l_i(2,Ga,null===o.currentFolderEnteredName,o.currentLayout===o.layouts.GRID)),e.R7$(2),e.vxM(o.currentLayout===o.layouts.GRID?2:3)}}function qa(s,n){1&s&&(l.qSk(),e.nrm(0,"path",25))}function Ka(s,n){}function Za(s,n){if(1&s&&e.DNE(0,Ka,0,0,"ng-template",17),2&s){e.XpG();const o=e.sdS(7);e.Y8G("ngTemplateOutlet",o)}}function Ja(s,n){1&s&&(l.qSk(),e.nrm(0,"path",30))}function el(s,n){if(1&s){const o=e.RV6();e.j41(0,"li",22),e.nI1(1,"arrayIncludes"),e.bIt("mouseenter",function(){const i=l.eBV(o).$implicit,r=e.XpG(2);return l.Njj(r.setFolderEntered(i.name))})("mouseleave",function(){l.eBV(o);const i=e.XpG(2);return l.Njj(i.setFolderEntered(void 0))}),e.j41(2,"div",23),e.bIt("click",function(){const i=l.eBV(o).$implicit,r=e.XpG(2);return l.Njj(r.navigateDown(i.name))}),l.qSk(),e.j41(3,"svg",24),e.nVh(4,qa,1,0,":svg:path",25)(5,Za,1,1,":svg:ng-template",17),e.DNE(6,Ja,1,0,"ng-template",null,1,e.C5r),e.k0s(),l.joV(),e.nrm(8,"div",26),e.k0s(),e.j41(9,"div",27)(10,"div",28),e.EFF(11," more_vert "),e.k0s(),e.j41(12,"app-upload-folder-menu",29),e.bIt("createNewFolderEvent",function(){l.eBV(o),e.XpG(2);const i=e.sdS(3);return l.Njj(i.open())}),e.k0s()()()}if(2&s){const o=n.$implicit,t=e.XpG(2);e.Y8G("ngClass",e.sMw(8,Va,e.i5U(1,5,t.pendingFolders,o.name),t.currentFolderEnteredName===o.name,t.currentLayout===t.layouts.GRID)),e.R7$(4),e.vxM(t.currentLayout===t.layouts.GRID?4:5),e.R7$(4),e.Y8G("innerText",o.name),e.R7$(),e.Y8G("placement",e.lJ4(12,Ba)),e.R7$(3),e.Y8G("folder",o)}}function tl(s,n){1&s&&(e.j41(0,"div",15),e.EFF(1," nuova cartella "),e.k0s())}function il(s,n){if(1&s){const o=e.RV6();e.j41(0,"div",5)(1,"div",6),e.EFF(2,"Cartelle"),e.k0s(),e.j41(3,"app-upload-breadcrumb",7),e.bIt("navigateEvent",function(i){l.eBV(o);const r=e.XpG();return l.Njj(r.navigateUp(i))}),e.k0s()(),e.j41(4,"ul",8),e.nVh(5,Qa,8,5,"li",9),e.Z7z(6,el,13,13,"li",10,e.fX1),e.j41(8,"li",11),e.bIt("click",function(){l.eBV(o),e.XpG();const i=e.sdS(3);return l.Njj(i.open())}),l.qSk(),e.j41(9,"svg",12),e.nrm(10,"path",13)(11,"path",14),e.k0s(),e.nVh(12,tl,2,0,"div",15),e.k0s()()}if(2&s){const o=e.XpG();e.R7$(3),e.Y8G("currentFolderPath",o.currentFolderPath),e.R7$(),e.Y8G("ngClass",e.sMw(4,za,o.touchDevice,o.currentLayout===o.layouts.GRID,o.currentLayout===o.layouts.LIST)),e.R7$(),e.vxM(o.currentFolderPath.length>0?5:-1),e.R7$(),e.Dyx(o.filteredAndSortedList),e.R7$(6),e.vxM(o.currentLayout===o.layouts.LIST?12:-1)}}let nl=(()=>{var s;class n{constructor(t,i,r){this.uploadService=t,this.uploadObservablesService=i,this.toastService=r,this.folderList=[],this.currentFolderPath=[],this.loading=!0,this.filter="",this.newFolderEvent=new e.bkB,this.filteredAndSortedList=[],this.layouts=C.om,this.currentLayout=C.om.GRID,this.touchDevice=I.CN,this.actionNames=C.SP,this.pendingFolders=[],this.currentFolderEnteredName="",this.folderNamesList=[],this.orderAsc=!0,this.currentDraggedFileList=[]}ngOnInit(){this.folderNamesList=this.folderList.map(t=>t.name),this.filterList(),this.orderAsc=this.uploadService.preferences.layoutOptions.asc,this.currentLayout=this.uploadService.preferences.layoutOptions.type,this.orderList(),this.layoutOptionsSubscription=this.uploadObservablesService.layoutOptionsObservable.subscribe(t=>{this.currentLayout=t.type,this.orderAsc=t.asc,this.orderList()}),this.draggedFileSubscription=this.uploadObservablesService.draggedFileListObservable.subscribe(t=>{void 0!==this.currentFolderEnteredPath&&0===t.length&&this.currentDraggedFileList.length&&(this.uploadObservablesService.pushStartMove({entities:(0,j.L6)(this.currentDraggedFileList),destPath:[...this.currentFolderEnteredPath],originPath:[...this.currentFolderPath]}),this.currentFolderEnteredName=""),this.currentDraggedFileList=[...t]}),this.entityPendingSubscription=this.uploadObservablesService.entityPendingObservable.subscribe(t=>{t.forEach(i=>{i.type===C.OE.FOLDER&&(i.start?this.pendingFolders.includes(i.name)||(this.pendingFolders=[...this.pendingFolders,i.name]):this.pendingFolders.indexOf(i.name)>-1&&(this.pendingFolders=this.pendingFolders.filter(a=>i.name!==a)))})}),this.renameFolderSubscription=this.uploadObservablesService.renameEntityObservable.subscribe(t=>{t.newEntity.type===C.OE.FOLDER&&(this.folderNamesList=this.folderList.map(i=>i.name))})}ngOnChanges(t){t.folderList&&!t.folderList.firstChange&&(this.folderNamesList=this.folderList.map(i=>i.name),this.filterList(),this.orderList()),t.filter&&!t.filter.firstChange&&(this.filterList(),this.orderList())}filterList(){if(0===this.filter.length)return void(this.filteredAndSortedList=this.folderList);const t=this.filter.toLowerCase();this.filteredAndSortedList=this.folderList.filter(i=>i.name.toLowerCase().includes(t))}orderList(){(0,Oi.Tb)(this.filteredAndSortedList,"name",this.orderAsc)}navigateUp(t){this.uploadObservablesService.pushCurrentFolderPath(this.currentFolderPath.slice(0,t))}navigateDown(t){this.pendingFolders.includes(t)||this.uploadObservablesService.pushCurrentFolderPath([...this.currentFolderPath,t])}createFolder(t){var i=this;return(0,S.A)(function*(){const r=t.name,a=[...i.currentFolderPath],p=yield i.uploadService.createDirectory([...a,r]);if(p){const f={name:(0,j.YN)(p).name,url:p,type:C.OE.FOLDER};return i.newFolderEvent.emit({list:[f],destPath:a,opened:t.open}),i.toastService.show({content:`Cartella <strong>${r}</strong> creata con successo!`}),void(t.open&&i.navigateDown(r))}i.toastService.show({content:"La creazione della cartella ha <strong>riscontrato un errore!</strong><br>Prova a ricaricare la pagina ed a rieseguirla.",level:$.A.ERROR})})()}setFolderEntered(t,i=!1){if(void 0===t)return this.currentFolderEnteredPath=void 0,void(this.currentFolderEnteredName="");if(0!==this.currentDraggedFileList.length){if(this.currentFolderEnteredName=t,i)return void(this.currentFolderEnteredPath=this.currentFolderPath.length<2?[]:this.currentFolderPath.slice(0,-1));this.currentFolderEnteredPath=[...this.currentFolderPath,t]}}ngOnDestroy(){this.layoutOptionsSubscription?.unsubscribe(),this.draggedFileSubscription?.unsubscribe(),this.entityPendingSubscription?.unsubscribe(),this.renameFolderSubscription?.unsubscribe()}static#e=s=()=>(this.\u0275fac=function(i){return new(i||n)(e.rXU(H.B),e.rXU(ie.f),e.rXU(de.f))},this.\u0275cmp=e.VBU({type:n,selectors:[["app-upload-folder-list"]],inputs:{folderList:"folderList",currentFolderPath:"currentFolderPath",loading:"loading",filter:"filter"},outputs:{newFolderEvent:"newFolderEvent"},standalone:!1,features:[e.OA$],decls:4,vars:2,consts:[["modal",""],["folderFilled",""],[1,"d-flex","justify-content-center"],[3,"createFolderEvent","reservedNames"],["message","Recupero dei file in corso"],[1,"px-md-1","mb-2","d-flex","flex-wrap","flex-column","flex-md-row","align-items-md-center","container-fluid"],[1,"fv-small-caps"],[1,"d-block","ms-md-auto",3,"navigateEvent","currentFolderPath"],[1,"folders","list-unstyled",3,"ngClass"],[1,"d-flex","align-items-center","cursor-pointer","navigate-upper-level",3,"ngClass"],[1,"d-flex","align-items-center","min-w-0",3,"ngClass"],[1,"new-folder","d-flex","align-items-center","cursor-pointer",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","currentColor","viewBox","0 0 16 16",1,"d-block"],["d","m.5 3 .04.87a1.99 1.99 0 0 0-.342 1.311l.637 7A2 2 0 0 0 2.826 14H9v-1H2.826a1 1 0 0 1-.995-.91l-.637-7A1 1 0 0 1 2.19 4h11.62a1 1 0 0 1 .996 1.09L14.54 8h1.005l.256-2.819A2 2 0 0 0 13.81 3H9.828a2 2 0 0 1-1.414-.586l-.828-.828A2 2 0 0 0 6.172 1H2.5a2 2 0 0 0-2 2zm5.672-1a1 1 0 0 1 .707.293L7.586 3H2.19c-.24 0-.47.042-.683.12L1.5 2.98a1 1 0 0 1 1-.98h3.672z"],["d","M13.5 10a.5.5 0 0 1 .5.5V12h1.5a.5.5 0 1 1 0 1H14v1.5a.5.5 0 1 1-1 0V13h-1.5a.5.5 0 0 1 0-1H13v-1.5a.5.5 0 0 1 .5-.5z"],[1,"new-folder-description","fst-italic"],[1,"d-flex","align-items-center","cursor-pointer","navigate-upper-level",3,"click","mouseenter","mouseleave","ngClass"],[3,"ngTemplateOutlet"],[1,"folder-name","fst-italic"],["d","m11.798 8.271-3.182 1.97c-.27.166-.616-.036-.616-.372V9.1s-2.571-.3-4 2.4c.571-4.8 3.143-4.8 4-4.8v-.769c0-.336.346-.538.616-.371l3.182 1.969c.27.166.27.576 0 .742z"],["d","m.5 3 .04.87a1.99 1.99 0 0 0-.342 1.311l.637 7A2 2 0 0 0 2.826 14h10.348a2 2 0 0 0 1.991-1.819l.637-7A2 2 0 0 0 13.81 3H9.828a2 2 0 0 1-1.414-.586l-.828-.828A2 2 0 0 0 6.172 1H2.5a2 2 0 0 0-2 2zm.694 2.09A1 1 0 0 1 2.19 4h11.62a1 1 0 0 1 .996 1.09l-.636 7a1 1 0 0 1-.996.91H2.826a1 1 0 0 1-.995-.91l-.637-7zM6.172 2a1 1 0 0 1 .707.293L7.586 3H2.19c-.24 0-.47.042-.683.12L1.5 2.98a1 1 0 0 1 1-.98h3.672z"],["d","M13.81 3H9.828a2 2 0 0 1-1.414-.586l-.828-.828A2 2 0 0 0 6.172 1H2.5a2 2 0 0 0-2 2l.04.87a1.99 1.99 0 0 0-.342 1.311l.637 7A2 2 0 0 0 2.826 14h10.348a2 2 0 0 0 1.991-1.819l.637-7A2 2 0 0 0 13.81 3zM2.19 3c-.24 0-.47.042-.683.12L1.5 2.98a1 1 0 0 1 1-.98h3.672a1 1 0 0 1 .707.293L7.586 3H2.19zm9.608 5.271-3.182 1.97c-.27.166-.616-.036-.616-.372V9.1s-2.571-.3-4 2.4c.571-4.8 3.143-4.8 4-4.8v-.769c0-.336.346-.538.616-.371l3.182 1.969c.27.166.27.576 0 .742z"],[1,"d-flex","align-items-center","min-w-0",3,"mouseenter","mouseleave","ngClass"],[1,"d-flex","align-items-center","min-w-0","navigate-item","flex-grow-1","h-100","pe-1",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","currentColor","viewBox","0 0 16 16",1,"d-block","flex-shrink-0"],["d","M.54 3.87.5 3a2 2 0 0 1 2-2h3.672a2 2 0 0 1 1.414.586l.828.828A2 2 0 0 0 9.828 3h3.982a2 2 0 0 1 1.992 2.181l-.637 7A2 2 0 0 1 13.174 14H2.826a2 2 0 0 1-1.991-1.819l-.637-7a1.99 1.99 0 0 1 .342-1.31zM2.19 4a1 1 0 0 0-.996 1.09l.637 7a1 1 0 0 0 .995.91h10.348a1 1 0 0 0 .995-.91l.637-7A1 1 0 0 0 13.81 4H2.19zm4.69-1.707A1 1 0 0 0 6.172 2H2.5a1 1 0 0 0-1 .981l.006.139C1.72 3.042 1.95 3 2.19 3h5.396l-.707-.707z"],[1,"folder-name","text-truncate",3,"innerText"],["ngbDropdown","","display","dynamic","container","body",1,"dropdown-no-caret","ms-auto",3,"placement"],["ngbDropdownToggle","",1,"material-icons-outlined","d-block","cursor-pointer","dropdown-toggle"],["ngbDropdownMenu","",1,"dropdown-menu",3,"createNewFolderEvent","folder"],["d","M9.828 3h3.982a2 2 0 0 1 1.992 2.181l-.637 7A2 2 0 0 1 13.174 14H2.825a2 2 0 0 1-1.991-1.819l-.637-7a1.99 1.99 0 0 1 .342-1.31L.5 3a2 2 0 0 1 2-2h3.672a2 2 0 0 1 1.414.586l.828.828A2 2 0 0 0 9.828 3zm-8.322.12C1.72 3.042 1.95 3 2.19 3h5.396l-.707-.707A1 1 0 0 0 6.172 2H2.5a1 1 0 0 0-1 .981l.006.139z"]],template:function(i,r){if(1&i){const a=e.RV6();e.nVh(0,Xa,2,0,"div",2)(1,il,13,8),e.j41(2,"app-upload-newfolder-modal",3,0),e.bIt("createFolderEvent",function(m){return l.eBV(a),l.Njj(r.createFolder(m))}),e.k0s()}2&i&&(e.vxM(r.loading?0:1),e.R7$(2),e.Y8G("reservedNames",r.folderNamesList))},dependencies:[v.YU,pt.V,y.tg,y.do,y.U0,Sa,Pa,Aa,zn.Z],styles:[".folders[_ngcontent-%COMP%]{margin-bottom:1.5rem}.folders[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{transition:opacity .2s,background-color .2s}.folders[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .navigate-item[_ngcontent-%COMP%]{cursor:pointer}.folders[_ngcontent-%COMP%] > li.pending[_ngcontent-%COMP%]{opacity:.5}.folders[_ngcontent-%COMP%] > li.pending[_ngcontent-%COMP%]   .dropdown-toggle[_ngcontent-%COMP%]{display:none!important}.folders[_ngcontent-%COMP%] > li.pending[_ngcontent-%COMP%]   .navigate-item[_ngcontent-%COMP%]{cursor:default!important;pointer-events:none}.folders[_ngcontent-%COMP%] > li.is-entered[_ngcontent-%COMP%]{background-color:#dae0ff;border-color:#c6cfff}.folders[_ngcontent-%COMP%]:not(.touch-device)   .dropdown-toggle[_ngcontent-%COMP%]{opacity:.7;transition:opacity .2s}.folders[_ngcontent-%COMP%]:not(.touch-device)   .dropdown-toggle[_ngcontent-%COMP%]:hover{opacity:1}.folders[_ngcontent-%COMP%]:not(.touch-device).simple-list > li[_ngcontent-%COMP%]:not(.is-entered):hover{background-color:rgb(var(--bs-light-rgb))}.grid-list[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:1rem}.grid-list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{min-height:75px}.grid-list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:32px;height:32px}.grid-list[_ngcontent-%COMP%]   .navigate-item[_ngcontent-%COMP%]{padding-left:1rem}.grid-list[_ngcontent-%COMP%]   .dropdown-no-caret[_ngcontent-%COMP%]{margin-right:.5rem}.grid-list[_ngcontent-%COMP%]   .folder-name[_ngcontent-%COMP%]{margin-left:.75rem}.grid-list[_ngcontent-%COMP%]   .new-folder[_ngcontent-%COMP%]{color:var(--bs-gray-600);border-top:1px dashed;border-bottom:1px dashed;border-radius:.25rem;justify-content:center}.simple-list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{height:57px;padding-right:.5rem}.simple-list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]:not(:first-of-type){border-top:1px solid #dee2e6}.simple-list[_ngcontent-%COMP%] > li.is-entered[_ngcontent-%COMP%], .simple-list[_ngcontent-%COMP%] > li.is-entered[_ngcontent-%COMP%] + li[_ngcontent-%COMP%]{border-color:#c6cfff}.simple-list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:24px;height:24px;color:#4864fe}.simple-list[_ngcontent-%COMP%]   .navigate-item[_ngcontent-%COMP%], .simple-list[_ngcontent-%COMP%]   .folder-name[_ngcontent-%COMP%], .simple-list[_ngcontent-%COMP%]   .navigate-upper-level[_ngcontent-%COMP%], .simple-list[_ngcontent-%COMP%]   .new-folder[_ngcontent-%COMP%], .simple-list[_ngcontent-%COMP%]   .new-folder-description[_ngcontent-%COMP%]{padding-left:1rem}app-loader[_ngcontent-%COMP%]{margin-top:1rem}@media (min-width: 768px){.folders[_ngcontent-%COMP%]{margin-bottom:2rem}.grid-list[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(250px,1fr))}.grid-list[_ngcontent-%COMP%]   .new-folder[_ngcontent-%COMP%]{border:1px dashed}.simple-list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{padding-right:1rem}.simple-list[_ngcontent-%COMP%]   .navigate-item[_ngcontent-%COMP%], .simple-list[_ngcontent-%COMP%]   .folder-name[_ngcontent-%COMP%], .simple-list[_ngcontent-%COMP%]   .navigate-upper-level[_ngcontent-%COMP%], .simple-list[_ngcontent-%COMP%]   .new-folder[_ngcontent-%COMP%], .simple-list[_ngcontent-%COMP%]   .new-folder-description[_ngcontent-%COMP%]{padding-left:1.5rem}app-loader[_ngcontent-%COMP%]{margin-top:0}}@media (min-width: 960px){.grid-list[_ngcontent-%COMP%]{gap:1.5rem}}"]}))}return s(),n})();var ol=_(387),sl=_(3445);const Gn=()=>["bottom-end","top-end","auto"],hi=s=>({disabled:s}),rl=()=>({$implicit:!1}),al=()=>({$implicit:!0}),ll=s=>({"position-fixed fixed-dropdown rounded-circle":s}),cl=()=>["start-bottom","top-end","auto"],dl=(s,n)=>({"rounded-circle btn-success":s,"btn-outline-success":n});function pl(s,n){1&s&&(l.qSk(),e.qex(0),e.nrm(1,"path",21)(2,"path",22),e.bVm())}function hl(s,n){}function ml(s,n){if(1&s&&e.DNE(0,hl,0,0,"ng-template",11),2&s){e.XpG();const o=e.sdS(11);e.Y8G("ngTemplateOutlet",o)}}function ul(s,n){1&s&&(l.qSk(),e.nrm(0,"path",21)(1,"path",23))}function _l(s,n){1&s&&e.eu8(0)}function gl(s,n){1&s&&e.eu8(0)}function fl(s,n){if(1&s){const o=e.RV6();e.j41(0,"li")(1,"a",30),e.bIt("click",function(){l.eBV(o);const i=e.XpG(3);return l.Njj(i.pushMassiveAction(i.actionNames.FILE_SHOW_LINKS))}),e.j41(2,"div",19),e.EFF(3," construction "),e.k0s(),e.j41(4,"div"),e.EFF(5,"Visualizza codici"),e.k0s()()(),e.j41(6,"li")(7,"a",30),e.bIt("click",function(){l.eBV(o);const i=e.XpG(3);return l.Njj(i.pushMassiveAction(i.actionNames.MOVE))}),e.j41(8,"div",19),e.EFF(9," drive_file_move "),e.k0s(),e.j41(10,"div"),e.EFF(11,"Sposta selezionati"),e.k0s()()(),e.j41(12,"li"),e.nrm(13,"hr",33),e.k0s(),e.j41(14,"li")(15,"a",30),e.bIt("click",function(){l.eBV(o);const i=e.XpG(3);return l.Njj(i.pushMassiveAction(i.actionNames.DELETE))}),e.j41(16,"div",19),e.EFF(17," delete "),e.k0s(),e.j41(18,"div"),e.EFF(19,"Elimina selezionati"),e.k0s()()()}}function vl(s,n){if(1&s){const o=e.RV6();e.j41(0,"div",24,2)(2,"button",25),l.qSk(),e.j41(3,"svg",10),e.nrm(4,"path",26)(5,"path",27),e.k0s()(),l.joV(),e.j41(6,"div",28)(7,"ul",29)(8,"li")(9,"h6",17),e.EFF(10,"Azioni massive"),e.k0s()(),e.j41(11,"li")(12,"a",30),e.bIt("click",function(){l.eBV(o);const i=e.sdS(1),r=e.XpG(2);return l.Njj(r.selectOrDeselectAll(i))}),e.nrm(13,"div",31)(14,"div",32),e.k0s()(),e.nVh(15,fl,20,0),e.k0s()()()}if(2&s){const o=e.XpG().$implicit,t=e.XpG();e.Y8G("ngClass",e.eq3(7,ll,o))("placement",o?e.lJ4(9,cl):e.lJ4(10,Gn)),e.R7$(2),e.Y8G("ngClass",e.l_i(11,dl,o,!o))("disabled",t.loading),e.R7$(11),e.Y8G("innerText",t.selectedFiles.length?"unpublished":"check_circle_outline"),e.R7$(),e.Y8G("innerText",t.selectedFiles.length?"Deseleziona tutti":"Seleziona tutti"),e.R7$(),e.vxM(t.selectedFiles.length?15:-1)}}function Cl(s,n){if(1&s&&e.nVh(0,vl,16,14,"div",24),2&s){const o=n.$implicit,t=e.XpG();e.vxM(!o||t.touchDevice&&t.selectedFiles.length?0:-1)}}let bl=(()=>{var s;class n{constructor(t,i){this.uploadPreferencesService=t,this.uploadObservablesService=i,this.loading=!0,this.fileList=[],this.filterEvent=new e.bkB,this.selectAllFilesEvent=new e.bkB,this.touchDevice=I.CN,this.layoutParams=C.Kk,this.layoutTypes=C.om,this.selectedFiles=[],this.actionNames=C.SP,this.layoutOptions=this.uploadPreferencesService.layoutOptions}ngOnInit(){this.selectedFileListSubscription=this.uploadObservablesService.selectedFileListObservable.subscribe(t=>{this.selectedFiles=t.map(i=>i.name)})}pushLayoutOptions(){this.uploadObservablesService.pushLayoutOptions(this.layoutOptions)}toggleLayoutOrder(){this.layoutOptions.asc=!this.layoutOptions.asc,this.pushLayoutOptions()}setLayoutType(){this.layoutOptions.type=this.layoutOptions.type===C.om.GRID?C.om.LIST:C.om.GRID,this.pushLayoutOptions()}setLayoutOrder(t){this.layoutOptions.orderBy=t,this.pushLayoutOptions()}selectOrDeselectAll(t){t.close(),this.selectedFiles.length?this.uploadObservablesService.pushSelectedFile([]):this.selectAllFilesEvent.emit()}pushMassiveAction(t){const i=this.fileList.filter(r=>this.selectedFiles.includes(r.name));this.uploadObservablesService.pushAction({name:t,payload:{entities:(0,j.L6)(i)}})}ngOnDestroy(){this.selectedFileListSubscription?.unsubscribe()}static#e=s=()=>(this.\u0275fac=function(i){return new(i||n)(e.rXU(on.d),e.rXU(ie.f))},this.\u0275cmp=e.VBU({type:n,selectors:[["app-upload-filter"]],inputs:{loading:"loading",fileList:"fileList"},outputs:{filterEvent:"filterEvent",selectAllFilesEvent:"selectAllFilesEvent"},standalone:!1,decls:48,vars:27,consts:[["desc",""],["massiveActionsButton",""],["actionsDropdown","ngbDropdown"],[1,"d-flex","utilities"],[1,"d-block","flex-grow-1","input-filter",3,"textEvent","disabled","enterKeyOnly"],[1,"flex-shrink-0","ms-auto","btn-container","d-flex","align-items-stretch"],[1,"btn","btn-outline-indigo","shadow-none","d-flex","align-items-center",3,"click","disabled"],[1,"material-icons",3,"innerText"],[1,"btn-group","mx-3"],[1,"btn","btn-outline-primary","py-1","shadow-none",3,"click","disabled"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","fill","currentColor","viewBox","0 0 16 16"],[3,"ngTemplateOutlet"],["ngbDropdown","","display","dynamic",1,"dropdown-no-caret","btn-group",3,"placement"],["ngbDropdownToggle","",1,"btn","btn-outline-primary","px-1","shadow-none",3,"disabled"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16"],["d","M7.247 11.14 2.451 5.658C1.885 5.013 2.345 4 3.204 4h9.592a1 1 0 0 1 .753 1.659l-4.796 5.48a1 1 0 0 1-1.506 0z"],["ngbDropdownMenu","",1,"list-unstyled","mb-0","dropdown-menu","dropdown-material-icons"],[1,"dropdown-header","text-center"],["role","button",1,"dropdown-item","d-flex","align-items-center",3,"click","ngClass"],[1,"material-icons-outlined","d-block"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["fill-rule","evenodd","d","M10.082 5.629 9.664 7H8.598l1.789-5.332h1.234L13.402 7h-1.12l-.419-1.371h-1.781zm1.57-.785L11 2.687h-.047l-.652 2.157h1.351z"],["d","M12.96 14H9.028v-.691l2.579-3.72v-.054H9.098v-.867h3.785v.691l-2.567 3.72v.054h2.645V14zM4.5 2.5a.5.5 0 0 0-1 0v9.793l-1.146-1.147a.5.5 0 0 0-.708.708l2 1.999.007.007a.497.497 0 0 0 .7-.006l2-2a.5.5 0 0 0-.707-.708L4.5 12.293V2.5z"],["d","M12.96 14H9.028v-.691l2.579-3.72v-.054H9.098v-.867h3.785v.691l-2.567 3.72v.054h2.645V14zm-8.46-.5a.5.5 0 0 1-1 0V3.707L2.354 4.854a.5.5 0 1 1-.708-.708l2-1.999.007-.007a.498.498 0 0 1 .7.006l2 2a.5.5 0 1 1-.707.708L4.5 3.707V13.5z"],["ngbDropdown","","display","dynamic",1,"dropdown-no-caret","btn-group",3,"ngClass","placement"],["ngbDropdownToggle","",1,"btn","py-1","h-100","shadow-none",3,"ngClass","disabled"],["d","M3 14.5A1.5 1.5 0 0 1 1.5 13V3A1.5 1.5 0 0 1 3 1.5h8a.5.5 0 0 1 0 1H3a.5.5 0 0 0-.5.5v10a.5.5 0 0 0 .5.5h10a.5.5 0 0 0 .5-.5V8a.5.5 0 0 1 1 0v5a1.5 1.5 0 0 1-1.5 1.5H3z"],["d","m8.354 10.354 7-7a.5.5 0 0 0-.708-.708L8 9.293 5.354 6.646a.5.5 0 1 0-.708.708l3 3a.5.5 0 0 0 .708 0z"],["ngbDropdownMenu","",1,"dropdown-menu","dropdown-material-icons"],[1,"list-unstyled","mb-0"],["role","button",1,"dropdown-item","d-flex","align-items-center",3,"click"],[1,"material-icons-outlined","d-block",3,"innerText"],[3,"innerText"],[1,"dropdown-divider"]],template:function(i,r){if(1&i){const a=e.RV6();e.j41(0,"div",3)(1,"app-input-filter-text",4),e.bIt("textEvent",function(m){return l.eBV(a),l.Njj(r.filterEvent.emit(m))}),e.k0s(),e.j41(2,"div",5)(3,"button",6),e.bIt("click",function(){return l.eBV(a),l.Njj(r.setLayoutType())}),e.nrm(4,"span",7),e.k0s(),e.j41(5,"div",8)(6,"button",9),e.bIt("click",function(){return l.eBV(a),l.Njj(r.toggleLayoutOrder())}),l.qSk(),e.j41(7,"svg",10),e.nVh(8,pl,3,0,":svg:ng-container")(9,ml,1,1,":svg:ng-template",11),e.DNE(10,ul,2,0,"ng-template",null,0,e.C5r),e.k0s()(),l.joV(),e.j41(12,"div",12)(13,"button",13),l.qSk(),e.j41(14,"svg",14),e.nrm(15,"path",15),e.k0s()(),l.joV(),e.j41(16,"ul",16)(17,"li")(18,"h6",17),e.EFF(19," Criterio di ordinamento "),e.k0s()(),e.j41(20,"li")(21,"a",18),e.bIt("click",function(){return l.eBV(a),l.Njj(r.setLayoutOrder(r.layoutParams.FILENAME))}),e.j41(22,"div",19),e.EFF(23," account_box "),e.k0s(),e.j41(24,"div"),e.EFF(25,"Nome"),e.k0s()()(),e.j41(26,"li")(27,"a",18),e.bIt("click",function(){return l.eBV(a),l.Njj(r.setLayoutOrder(r.layoutParams.TIME))}),e.j41(28,"div",19),e.EFF(29," history "),e.k0s(),e.j41(30,"div"),e.EFF(31,"Ultima modifica"),e.k0s()()(),e.j41(32,"li")(33,"a",18),e.bIt("click",function(){return l.eBV(a),l.Njj(r.setLayoutOrder(r.layoutParams.SIZE))}),e.j41(34,"div",19),e.EFF(35," balance "),e.k0s(),e.j41(36,"div"),e.EFF(37,"Dimensione"),e.k0s()()(),e.j41(38,"li")(39,"a",18),e.bIt("click",function(){return l.eBV(a),l.Njj(r.setLayoutOrder(r.layoutParams.EXTENSION))}),e.j41(40,"div",19),e.EFF(41," description "),e.k0s(),e.j41(42,"div"),e.EFF(43,"Estensione"),e.k0s()()()()()(),e.DNE(44,_l,1,0,"ng-container",20),e.k0s()(),e.DNE(45,gl,1,0,"ng-container",20)(46,Cl,1,1,"ng-template",null,1,e.C5r)}if(2&i){const a=e.sdS(47);e.R7$(),e.Y8G("disabled",r.loading)("enterKeyOnly",!0),e.R7$(2),e.Y8G("disabled",r.loading),e.R7$(),e.Y8G("innerText",r.layoutOptions.type===r.layoutTypes.GRID?"space_dashboard":"view_list"),e.R7$(2),e.Y8G("disabled",r.loading),e.R7$(2),e.vxM(r.layoutOptions.asc?8:9),e.R7$(4),e.Y8G("placement",e.lJ4(16,Gn)),e.R7$(),e.Y8G("disabled",r.loading),e.R7$(8),e.Y8G("ngClass",e.eq3(17,hi,r.layoutOptions.orderBy===r.layoutParams.FILENAME)),e.R7$(6),e.Y8G("ngClass",e.eq3(19,hi,r.layoutOptions.orderBy===r.layoutParams.TIME)),e.R7$(6),e.Y8G("ngClass",e.eq3(21,hi,r.layoutOptions.orderBy===r.layoutParams.SIZE)),e.R7$(6),e.Y8G("ngClass",e.eq3(23,hi,r.layoutOptions.orderBy===r.layoutParams.EXTENSION)),e.R7$(5),e.Y8G("ngTemplateOutlet",a)("ngTemplateOutletContext",e.lJ4(25,rl)),e.R7$(),e.Y8G("ngTemplateOutlet",a)("ngTemplateOutletContext",e.lJ4(26,al))}},dependencies:[v.YU,v.T3,sl.b,y.tg,y.do,y.U0],styles:[".utilities[_ngcontent-%COMP%]{margin:1rem 1rem 0;flex-wrap:wrap}.utilities[_ngcontent-%COMP%]   .btn-container[_ngcontent-%COMP%]{margin-top:1rem}.input-filter[_ngcontent-%COMP%]{width:100%;box-shadow:0 .125rem .25rem #00000013}.fixed-dropdown[_ngcontent-%COMP%]{bottom:2rem;right:2rem;z-index:1;width:56px;height:56px;box-shadow:0 .125rem .25rem #00000040}@media (min-width: 500px){.input-filter[_ngcontent-%COMP%]{width:auto}.utilities[_ngcontent-%COMP%]{flex-wrap:nowrap}.utilities[_ngcontent-%COMP%]   .btn-container[_ngcontent-%COMP%]{margin-top:initial}.utilities[_ngcontent-%COMP%]   .btn-outline-indigo[_ngcontent-%COMP%]{margin-left:1rem}}@media (min-width: 960px){.utilities[_ngcontent-%COMP%]{margin:1.5rem 0 0}}"]}))}return s(),n})();const El=["modal"];function Fl(s,n){if(1&s&&(e.j41(0,"tr"),e.nrm(1,"td",8),e.nI1(2,"arrayJoin"),e.nrm(3,"td",9),e.nI1(4,"formatBytes"),e.k0s()),2&s){const o=n.$implicit;e.R7$(),e.Y8G("innerText","."+e.i5U(2,2,o.ext,", .")),e.R7$(2),e.Y8G("innerText",e.bMT(4,5,o.maxSize))}}function yl(s,n){if(1&s&&e.Z7z(0,Fl,5,7,"tr",null,e.fX1),2&s){const o=e.XpG(2);e.Dyx(o.supportedFiles)}}function xl(s,n){if(1&s&&(e.j41(0,"p"),e.EFF(1," Il servizio "),e.j41(2,"strong"),e.EFF(3,"Upload"),e.k0s(),e.EFF(4),e.j41(5,"strong"),e.EFF(6,"spazio gestito e amministrato"),e.k0s(),e.EFF(7," dagli utenti per caricare immagini e file da condividere e utilizzare sui circuiti ForumFree, ForumCommunity e BlogFree. Grazie all'elevato livello di sicurezza e alle numerose funzioni disponibili, il servizio si presenta come alternativa "),e.j41(8,"strong"),e.EFF(9,"valida e affidabile"),e.k0s(),e.EFF(10," agli altri "),e.j41(11,"em"),e.EFF(12,"hosting"),e.k0s(),e.EFF(13," disponibili. "),e.k0s(),e.j41(14,"h6",3),e.EFF(15,"Metodi di caricamento"),e.k0s(),e.j41(16,"p",4),e.EFF(17,"Sono possibili i seguenti metodi di upload:"),e.k0s(),e.j41(18,"ul")(19,"li")(20,"em"),e.EFF(21,"caricare file da memoria"),e.k0s(),e.EFF(22,": cliccando sull'apposita area, \xe8 possibile "),e.j41(23,"strong"),e.EFF(24,"selezionare"),e.k0s(),e.EFF(25," uno o pi\xf9 file da caricare direttamente dalla memoria del dispositivo in uso. Nel caso di dispositivi mobile, \xe8 necessario che sia presente l'autorizzazione del browser ad accedere ai file presenti in locale; "),e.k0s(),e.j41(26,"li")(27,"em"),e.EFF(28,"drag & drop"),e.k0s(),e.EFF(29,": \xe8 possibile "),e.j41(30,"strong"),e.EFF(31,"trascinare"),e.k0s(),e.EFF(32," nell'apposita area i file che si desiderano caricare. Una volta rilasciati i file, l'upload inizier\xe0 immediatamente senza ulteriori conferme; "),e.k0s(),e.j41(33,"li")(34,"em"),e.EFF(35,"clipboard"),e.k0s(),e.EFF(36,": \xe8 consentito "),e.j41(37,"strong"),e.EFF(38,"copincollare"),e.k0s(),e.EFF(39," un file che si vuole aggiungere al proprio spazio. Per fare ci\xf2, occorre dapprima copiare (ad esempio premendo "),e.j41(40,"em"),e.EFF(41,"ctrl + c"),e.k0s(),e.EFF(42,") il file e in seguito, rimanendo sulla pagina di upload, incollarlo (ad esempio premendo "),e.j41(43,"em"),e.EFF(44,"ctrl + v"),e.k0s(),e.EFF(45,"). Se ci\xf2 che \xe8 stato copiato e incollato soddisfa i requisiti richiesti, l'upload inizier\xe0 senza ulteriori conferme. Questa tecnica pu\xf2 essere utilizzata come valida alternativa per caricare file da indirizzo remoto: \xe8 infatti sufficiente aprire il file da caricare in una finestra del browser, copiarlo e infine incollarlo nella pagina di upload. "),e.k0s()(),e.j41(46,"h6",3),e.EFF(47,"Azioni disponibili"),e.k0s(),e.j41(48,"p",4),e.EFF(49," Il servizio Upload consente di eseguire diverse azioni su singoli file o cartelle. Per aprire il men\xf9 con le opzioni disponibili, \xe8 sufficiente cliccare sui tre pallini verticali presenti vicino ad ogni file e cartella. In particolare, i pulsanti a disposizione sono: "),e.k0s(),e.j41(50,"ul")(51,"li")(52,"em"),e.EFF(53,"sposta"),e.k0s(),e.EFF(54,": questa azione, disponibile sia per file che per cartelle, consente, tramite l'apposito modal, di "),e.j41(55,"strong"),e.EFF(56,"muovere"),e.k0s(),e.EFF(57," l'elemento selezionato verso un'altra destinazione; "),e.k0s(),e.j41(58,"li")(59,"em"),e.EFF(60,"rinomina"),e.k0s(),e.EFF(61,": questa azione, disponibile sia per file che per cartelle, consente, tramite l'apposito modal, di assegnare un "),e.j41(62,"strong"),e.EFF(63,"nuovo nome"),e.k0s(),e.EFF(64," all'elemento selezionato; "),e.k0s(),e.j41(65,"li")(66,"em"),e.EFF(67,"elimina"),e.k0s(),e.EFF(68,": questa azione, disponibile sia per file che per cartelle, consente, tramite l'apposito modal, di "),e.j41(69,"strong"),e.EFF(70,"rimuovere"),e.k0s(),e.EFF(71," completamente e senza possibilit\xe0 di ripristino l'elemento selezionato. Nel caso in cui si agisca su una cartella, la rimozione viene estesa anche a tutto il suo contenuto, comprese eventuali sottocartelle; "),e.k0s(),e.j41(72,"li")(73,"em"),e.EFF(74,"nuova cartella"),e.k0s(),e.EFF(75,": premendo questo pulsante, presente solo tra le opzioni di una cartella, \xe8 possibile aggiungere una "),e.j41(76,"strong"),e.EFF(77,"nuova cartella"),e.k0s(),e.EFF(78,"; "),e.k0s(),e.j41(79,"li")(80,"em"),e.EFF(81,"codici"),e.k0s(),e.EFF(82,": questo pulsante, presente solo per i file, consente di aprire un modal contenente i vari "),e.j41(83,"strong"),e.EFF(84,"codici"),e.k0s(),e.EFF(85," del file stesso, tra cui i link per condividerlo ed eventualmente per incorporarlo come immagine; "),e.k0s(),e.j41(86,"li")(87,"em"),e.EFF(88,"scarica"),e.k0s(),e.EFF(89,": questo pulsante, presente solo per i file, permette di "),e.j41(90,"strong"),e.EFF(91,"scaricare"),e.k0s(),e.EFF(92," il file selezionato; "),e.k0s(),e.j41(93,"li")(94,"em"),e.EFF(95,"modifica"),e.k0s(),e.EFF(96,": questa azione, abilitata solo per i file supportati, permette di "),e.j41(97,"strong"),e.EFF(98,"modificare"),e.k0s(),e.EFF(99," (ritagliare, ingrandire, rimpicciolire, ruotare) il file selezionato; "),e.k0s(),e.j41(100,"li")(101,"em"),e.EFF(102,"seleziona"),e.k0s(),e.EFF(103,": questo pulsante consente di "),e.j41(104,"strong"),e.EFF(105,"selezionare"),e.k0s(),e.EFF(106," il file per eseguire in seguito un'azione massiva. "),e.k0s()(),e.j41(107,"h6",3),e.EFF(108,"Azioni massive"),e.k0s(),e.j41(109,"p",4),e.EFF(110," Tramite il pulsante verde con il simbolo del checkbox, \xe8 possibile aprire l'elenco delle azioni massive disponibili. Un'azione massiva \xe8 un'operazione che coinvolge contemporaneamente e allo stesso modo due o pi\xf9 file. Sono effettuabili le seguenti azioni massive: "),e.k0s(),e.j41(111,"ul")(112,"li")(113,"em"),e.EFF(114,"seleziona tutti"),e.k0s(),e.EFF(115,": questo pulsante, visibile solo se non \xe8 ancora stato selezionato alcun file, consente di "),e.j41(116,"strong"),e.EFF(117,"selezionare tutti"),e.k0s(),e.EFF(118," i file presente nella cartella corrente; "),e.k0s(),e.j41(119,"li")(120,"em"),e.EFF(121,"deseleziona tutti"),e.k0s(),e.EFF(122,": questo pulsante, visibile solo se \xe8 stato selezionato almeno un file, consente di "),e.j41(123,"strong"),e.EFF(124,"rimuovere la selezione"),e.k0s(),e.EFF(125," da tutti i file in precedenza selezionati; "),e.k0s(),e.j41(126,"li")(127,"em"),e.EFF(128,"visualizza codici"),e.k0s(),e.EFF(129,": questa azione, visibile solo se \xe8 stato selezionato almeno un file, consente di aprire un modal contenente i vari "),e.j41(130,"strong"),e.EFF(131,"codici"),e.k0s(),e.EFF(132," di tutti i file selezionati, tra cui i link per condividerli insieme ed eventualmente per incorporarli come immagine; "),e.k0s(),e.j41(133,"li")(134,"em"),e.EFF(135,"sposta selezionati"),e.k0s(),e.EFF(136,": questa azione, visibile solo se \xe8 stato selezionato almeno un file, consente di "),e.j41(137,"strong"),e.EFF(138,"spostare"),e.k0s(),e.EFF(139," verso un'unica destinazione tutti i file selezionati; "),e.k0s(),e.j41(140,"li")(141,"em"),e.EFF(142,"elimina selezionati"),e.k0s(),e.EFF(143,": questa azione, visibile solo se \xe8 stato selezionato almeno un file, consente di "),e.j41(144,"strong"),e.EFF(145,"eliminare"),e.k0s(),e.EFF(146," in modo definitivo tutti i file selezionati. "),e.k0s()(),e.j41(147,"h6",3),e.EFF(148,"File accettati"),e.k0s(),e.j41(149,"p",5),e.EFF(150," Vengono accettati differenti tipi di file, ciascuno con un limite massimo di dimensione: "),e.k0s(),e.j41(151,"table",6)(152,"thead")(153,"tr")(154,"th"),e.EFF(155,"Estensione"),e.k0s(),e.j41(156,"th"),e.EFF(157,"Dimensione"),e.k0s()()(),e.j41(158,"tbody"),e.nVh(159,yl,2,0),e.k0s()(),e.j41(160,"h6",3),e.EFF(161,"Ricerca e opzioni di layout"),e.k0s(),e.j41(162,"p",4),e.EFF(163," Nell'apposito input "),e.j41(164,"em"),e.EFF(165,"Cerca"),e.k0s(),e.EFF(166," \xe8 possibile inserire una parola che verr\xe0 usata per filtrare la lista dei file e delle cartelle sulla base del nome e dell'estensione degli stessi. Il pulsante viola accanto all'input di ricerca consente di modificare il layout dell'elenco di cartelle e file, scegliendo tra griglia e lista. I due pulsanti blu permettono infine di personalizzare l'ordinamento degli elementi presenti nella cartella corrente: "),e.k0s(),e.j41(167,"ul",7)(168,"li"),e.EFF(169," il pulsante "),e.j41(170,"em"),e.EFF(171,"a-z"),e.k0s(),e.EFF(172," e "),e.j41(173,"em"),e.EFF(174,"z-a"),e.k0s(),e.EFF(175," consente di ordinare gli elementi seguendo un criterio rispettivamente crescente o decrescente; "),e.k0s(),e.j41(176,"li"),e.EFF(177," il secondo pulsante apre un men\xf9 in cui \xe8 possibile scegliere un criterio di ordinamento tra "),e.j41(178,"em"),e.EFF(179,"nome"),e.k0s(),e.EFF(180,", "),e.j41(181,"em"),e.EFF(182,"data di ultima modifica"),e.k0s(),e.EFF(183,", che per i file non modificati coincide con la data di caricamento, "),e.j41(184,"em"),e.EFF(185,"dimensione"),e.k0s(),e.EFF(186,", cio\xe8 peso in byte del file, ed "),e.j41(187,"em"),e.EFF(188,"estensione"),e.k0s(),e.EFF(189,". "),e.k0s()()),2&s){const o=e.XpG();e.R7$(4),e.SpI(" di ",o.appName," si pone come obiettivo fornire uno "),e.R7$(155),e.vxM(o.supportedFiles?159:-1)}}let Ml=(()=>{var s;class n{constructor(t){this.uploadService=t,this.appName=I.JB}open(){var t=this;return(0,S.A)(function*(){t.modalComponent.open(),t.supportedFiles||(t.supportedFiles=yield t.uploadService.getFileLimits())})()}static#e=s=()=>(this.\u0275fac=function(i){return new(i||n)(e.rXU(H.B))},this.\u0275cmp=e.VBU({type:n,selectors:[["app-upload-info-modal"]],viewQuery:function(i,r){if(1&i&&e.GBs(El,5),2&i){let a;e.mGM(a=e.lsd())&&(r.modalComponent=a.first)}},standalone:!1,decls:3,vars:0,consts:[["modal",""],["title","Servizio Upload"],["appModalBody",""],[1,"fst-italic"],[1,"mb-1"],[1,"mb-3"],[1,"table","table-striped","text-center","border"],[1,"mb-0"],[1,"fst-italic",3,"innerText"],[3,"innerText"]],template:function(i,r){1&i&&(e.j41(0,"app-modal",1,0),e.DNE(2,xl,190,2,"ng-template",2),e.k0s())},dependencies:[Z.z,fe.d,ai.I,pi.L],encapsulation:2}))}return s(),n})();const Tl=["scrollerContainer"],kl=["app-hidden-scroller",""],Sl=["*"],Pl=(s,n)=>({"max-height":s,height:n});let Rl=(()=>{var s;class n{constructor(){this.touchDevice=I.CN}ngAfterViewInit(){const t=this.scrollerContainer.nativeElement;t.style.marginRight=-(t.offsetWidth-t.clientWidth)+"px"}static#e=s=()=>(this.\u0275fac=function(i){return new(i||n)},this.\u0275cmp=e.VBU({type:n,selectors:[["","app-hidden-scroller",""]],viewQuery:function(i,r){if(1&i&&e.GBs(Tl,5),2&i){let a;e.mGM(a=e.lsd())&&(r.scrollerContainer=a.first)}},inputs:{maxHeight:"maxHeight",height:"height"},standalone:!1,attrs:kl,ngContentSelectors:Sl,decls:3,vars:4,consts:[["scrollerContainer",""],[1,"scroller-container",3,"ngStyle"]],template:function(i,r){1&i&&(e.NAR(),e.j41(0,"div",1,0),e.SdG(2),e.k0s()),2&i&&e.Y8G("ngStyle",e.l_i(1,Pl,r.maxHeight||null,r.height||null))},dependencies:[v.B3],styles:[".scroller-container[_ngcontent-%COMP%]{overflow-y:scroll}[_nghost-%COMP%]{overflow:hidden}"]}))}return s(),n})();const wl=s=>({"touch-device":s}),Ol=()=>[],Il=s=>({"mb-2":s}),Dl=s=>({rotating:s}),jl=s=>({width:s}),Ll=(s,n)=>({pending:s,selected:n}),Nl=()=>[0,5],Ul=s=>({offset:s,appendTo:"parent"});function Al(s,n){1&s&&e.nrm(0,"li",6),2&s&&e.Y8G("ngClass",e.eq3(1,Il,n.$index!==n.$count-1))}function zl(s,n){1&s&&(e.j41(0,"ul",4),e.Z7z(1,Al,1,3,"li",6,e.fX1),e.k0s()),2&s&&(e.R7$(),e.Dyx(e.lJ4(0,Ol).constructor(2)))}function Gl(s,n){1&s&&(e.j41(0,"div",7),e.EFF(1," Non ci sono file recenti! "),e.k0s())}function Vl(s,n){if(1&s&&(e.j41(0,"li",11),e.nrm(1,"div",12),e.j41(2,"div",13)(3,"div",14),e.nrm(4,"div",15)(5,"div",16),e.j41(6,"div",17),e.EFF(7),e.k0s()(),e.j41(8,"div",18),e.nrm(9,"div",19),e.k0s()()()),2&s){const o=e.XpG().$implicit;e.R7$(),e.Y8G("ngClass",e.eq3(6,Dl,o.progress>0&&o.progress<100))("innerText",o.progress>0?o.progress<100?"sync":"check_circle":"schedule"),e.R7$(3),e.Y8G("innerText",o.file.filename),e.R7$(),e.Y8G("innerText","."+o.file.ext),e.R7$(2),e.SpI(" ",o.progress,"% "),e.R7$(2),e.Y8G("ngStyle",e.eq3(8,jl,o.progress+"%"))}}function Bl(s,n){1&s&&e.nVh(0,Vl,10,10,"li",11),2&s&&e.vxM(n.$implicit.error?-1:0)}function Xl(s,n){if(1&s&&(e.j41(0,"li",9)(1,"div",20),e.EFF(2," cancel "),e.k0s(),e.j41(3,"div",13)(4,"div",21),e.nrm(5,"div",15)(6,"div",16),e.k0s(),e.j41(7,"div",22),e.EFF(8," Errore durante il caricamento "),e.k0s()()()),2&s){const o=n.$implicit;e.R7$(5),e.Y8G("innerText",o.file.filename),e.R7$(),e.Y8G("innerText","."+o.file.ext)}}function $l(s,n){if(1&s){const o=e.RV6();e.j41(0,"li",10),e.nI1(1,"arrayIncludes"),e.nI1(2,"arrayIncludes"),e.j41(3,"button",23),e.bIt("click",function(){const i=l.eBV(o).$implicit,r=e.XpG(3);return l.Njj(r.unselectFile(i.name))}),l.qSk(),e.j41(4,"svg",24),e.nrm(5,"path",25)(6,"path",26),e.k0s()(),l.joV(),e.j41(7,"a",27),e.EFF(8,"wallpaper"),e.k0s(),e.j41(9,"div",28)(10,"a",29),e.nrm(11,"div",15)(12,"div",30),e.k0s(),e.j41(13,"div",31)(14,"div",32),e.EFF(15),e.nI1(16,"formatBytes"),e.k0s(),e.j41(17,"div",33),e.nI1(18,"date"),e.nrm(19,"span",34),e.k0s()()(),e.j41(20,"div",35,1),e.bIt("openChange",function(i){l.eBV(o);const r=e.sdS(21);e.XpG();const a=e.sdS(1),p=e.XpG(2);return l.Njj(p.saveDropdown(r,a,i))}),e.j41(22,"div",36),e.EFF(23," more_vert "),e.k0s(),e.j41(24,"div",37),e.nrm(25,"app-upload-file-menu",38),e.nI1(26,"arrayIncludes"),e.k0s()()()}if(2&s){const o=n.$implicit,t=e.sdS(21),i=e.XpG(3);e.Y8G("ngClass",e.l_i(26,Ll,e.i5U(1,12,i.pendingFiles,o.name),e.i5U(2,15,i.selectedFiles,o.name))),e.R7$(7),e.Y8G("href",o.url,e.B4B),e.R7$(3),e.Y8G("href",o.url,e.B4B),e.R7$(),e.Y8G("innerText",o.filename),e.R7$(),e.Y8G("innerText","."+o.ext),e.R7$(3),e.SpI(" ",e.bMT(16,18,o.size)," "),e.R7$(2),e.Y8G("appTippy",e.i5U(18,20,o.time,"dd-MM-YY HH:mm")||"")("tippyProps",e.eq3(30,Ul,e.lJ4(29,Nl))),e.R7$(2),e.Y8G("date",o.time),e.R7$(6),e.Y8G("file",o)("isSelected",e.i5U(26,23,i.selectedFiles,o.name))("dropdownRef",t)}}function Hl(s,n){if(1&s&&(e.j41(0,"ul",8,0),e.Z7z(2,Bl,1,1,null,null,e.fX1),e.Z7z(4,Xl,9,2,"li",9,e.fX1),e.Z7z(6,$l,27,32,"li",10,e.fX1),e.nI1(8,"slice"),e.k0s()),2&s){const o=e.XpG(2);e.R7$(2),e.Dyx(o.uploadingFileList),e.R7$(2),e.Dyx(o.uploadedFileWithErrors),e.R7$(2),e.Dyx(e.brH(8,0,o.fileList,0,5))}}function Yl(s,n){if(1&s&&(e.j41(0,"div",5),e.nVh(1,Gl,2,0,"div",7)(2,Hl,9,4,"ul",8),e.k0s()),2&s){const o=e.XpG();e.R7$(),e.vxM(0===o.fileList.length&&0===o.uploadingFileList.length&&0===o.uploadedFileWithErrors.length?1:2)}}let Wl=(()=>{var s;class n{constructor(t,i){this.uploadObservablesService=t,this.renderer=i,this.fileList=[],this.loading=!0,this.touchDevice=I.CN,this.uploadingFileList=[],this.uploadedFileWithErrors=[],this.pendingFiles=[],this.selectedFiles=[],this.openedDropdown=[],this.checkOpenedDropdownEvent=!1}ngOnInit(){this.uploadingListSubscription=this.uploadObservablesService.uploadingFileQueueObservable.subscribe(t=>{this.uploadingFileList=[...t].reverse()}),this.uploadingErrorSubscription=this.uploadObservablesService.uploadingFileErrorObservable.subscribe(t=>{this.uploadedFileWithErrors.unshift(t)}),this.entityPendingSubscription=this.uploadObservablesService.entityPendingObservable.subscribe(t=>{t.forEach(i=>{i.type===C.OE.FILE&&(this.pendingFiles=[...this.updatePendingFileList(this.pendingFiles,i.name,i.start)])})}),this.selectedFileListSubscription=this.uploadObservablesService.selectedFileListObservable.subscribe(t=>{this.selectedFiles=t.map(i=>i.name)})}updatePendingFileList(t,i,r){if(r)t.includes(i)||t.push(i);else{const a=t.indexOf(i);a>-1&&t.splice(a,1)}return t}saveDropdown(t,i,r){if(!r||(this.openedDropdown.push(t),this.checkOpenedDropdownEvent))return;this.checkOpenedDropdownEvent=!0;const a=this.renderer.listen(i,"scroll",()=>{this.openedDropdown.forEach(p=>{p.isOpen()&&p.close()}),this.openedDropdown=[],this.checkOpenedDropdownEvent=!1,a()})}unselectFile(t){this.uploadObservablesService.pushSelectedFile({name:t,selected:!1})}ngOnDestroy(){this.uploadingListSubscription?.unsubscribe(),this.uploadingErrorSubscription?.unsubscribe(),this.entityPendingSubscription?.unsubscribe(),this.selectedFileListSubscription?.unsubscribe()}static#e=s=()=>(this.\u0275fac=function(i){return new(i||n)(e.rXU(ie.f),e.rXU(e.sFG))},this.\u0275cmp=e.VBU({type:n,selectors:[["app-upload-recent-files"]],inputs:{fileList:"fileList",loading:"loading"},standalone:!1,decls:5,vars:4,consts:[["list",""],["dropdownRef","ngbDropdown"],[1,"flat-container","py-2","px-3","h-100","d-flex","flex-column",3,"ngClass"],[1,"fv-small-caps","fs-lg","mb-2"],[1,"list-unstyled","mb-1","placeholder-glow"],["app-hidden-scroller","","height","100%",1,"file-list-container","mb-1","flex-grow-1"],[1,"placeholder","col-12","rounded",3,"ngClass"],[1,"alert","alert-primary","mb-0","text-center"],[1,"list-unstyled","mb-0","file-list"],[1,"file-container","rounded","bg-danger","text-white"],[1,"file-container","rounded","position-relative",3,"ngClass"],[1,"file-container","rounded","uploading"],[1,"d-block","material-icons-outlined","text-primary",3,"ngClass","innerText"],[1,"ms-3","flex-grow-1","min-w-0"],[1,"d-flex","align-items-end"],[1,"text-truncate",3,"innerText"],[1,"me-3",3,"innerText"],[1,"ms-auto","fs-sm"],[1,"progress","bg-white","mt-1"],["role","progressbar","aria-valuemin","0","aria-valuemax","100",1,"progress-bar",3,"ngStyle"],[1,"d-block","material-icons-outlined"],[1,"d-flex"],[1,"fs-xs"],[1,"btn","btn-primary","shadow-none","pre-button","d-flex","justify-content-center","align-items-center","p-0","position-absolute",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","fill","currentColor","viewBox","0 0 16 16"],["d","M2.5 8a5.5 5.5 0 0 1 8.25-4.764.5.5 0 0 0 .5-.866A6.5 6.5 0 1 0 14.5 8a.5.5 0 0 0-1 0 5.5 5.5 0 1 1-11 0z"],["d","M15.354 3.354a.5.5 0 0 0-.708-.708L8 9.293 5.354 6.646a.5.5 0 1 0-.708.708l3 3a.5.5 0 0 0 .708 0l7-7z"],["target","_blank","rel","noreferrer",1,"material-icons-outlined","d-block","text-primary",3,"href"],[1,"mx-3","flex-grow-1","min-w-0"],["target","_blank","rel","noreferrer",1,"text-reset","d-inline-flex","mw-100",3,"href"],[3,"innerText"],[1,"text-muted","fs-xs","d-flex","flex-wrap","align-items-center","position-relative"],[1,"file-size","me-1"],[1,"file-time",3,"appTippy","tippyProps"],["timeago","",3,"date"],["ngbDropdown","","placement","left-top","display","dynamic","container","body",1,"dropdown-no-caret","ms-auto",3,"openChange"],["ngbDropdownToggle","",1,"material-icons-outlined","d-block","text-primary","cursor-pointer","dropdown-icon"],["ngbDropdownMenu","",1,"dropdown-menu"],[3,"file","isSelected","dropdownRef"]],template:function(i,r){1&i&&(e.j41(0,"div",2)(1,"div",3),e.EFF(2,"File recenti"),e.k0s(),e.nVh(3,zl,3,1,"ul",4)(4,Yl,3,1,"div",5),e.k0s()),2&i&&(e.Y8G("ngClass",e.eq3(2,wl,r.touchDevice)),e.R7$(3),e.vxM(r.loading?3:4))},dependencies:[v.YU,v.B3,Rl,y.tg,y.do,y.U0,B,Oe.e,sn,zn.Z,v.P9,v.vh,pi.L],styles:['.flat-container[_ngcontent-%COMP%]{--file-item-height: 62px}.placeholder[_ngcontent-%COMP%]{height:var(--file-item-height);background-color:var(--bs-gray-500)}.file-list-container[_ngcontent-%COMP%]{overflow:hidden;height:1px;min-height:calc(var(--file-item-height) * 2 + .5rem)}.file-list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{display:flex;align-items:center;padding:.5rem 1rem;transition:opacity .2s,margin-left .2s;height:var(--file-item-height)}.file-list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]   .pre-button[_ngcontent-%COMP%]{width:40px;left:-10px;transform:translate(-100%);height:70%}.file-list[_ngcontent-%COMP%] > li.selected[_ngcontent-%COMP%]{margin-left:50px}.file-list[_ngcontent-%COMP%] > li.pending[_ngcontent-%COMP%]{opacity:.5}.file-list[_ngcontent-%COMP%] > li.pending[_ngcontent-%COMP%]   .dropdown-icon[_ngcontent-%COMP%]{display:none!important}.file-list[_ngcontent-%COMP%] > li.pending[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{pointer-events:none}.file-list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]:not(:last-of-type){margin-bottom:.5rem}.file-container[_ngcontent-%COMP%]{background-color:#dae0ff;min-height:var(--file-item-height)}.file-container.uploading[_ngcontent-%COMP%]   .rotating[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fullRotation 1s linear infinite}.file-container.uploading[_ngcontent-%COMP%]   .progress[_ngcontent-%COMP%]{height:.5rem;border-radius:.15rem}.touch-device[_ngcontent-%COMP%]   .file-time[_ngcontent-%COMP%]{cursor:pointer}.file-size[_ngcontent-%COMP%]:after{content:" - "}@keyframes _ngcontent-%COMP%_fullRotation{0%{transform:rotate(0)}to{transform:rotate(-360deg)}}']}))}return s(),n})();const Ql=s=>({width:s}),ql=(s,n)=>({pending:s,loading:n});function Kl(s,n){if(1&s&&e.nrm(0,"span",9),2&s){const o=e.XpG();e.Y8G("innerText",o.usedStoragePercentage+"%")}}let Zl=(()=>{var s;class n{constructor(){this.recalculatingStorage=!1,this.loading=!1,this.openInfoModal=new e.bkB,this.recalculateStorage=new e.bkB,this.usedStoragePercentage=0,this.storageAvailable=0}ngOnChanges(t){t.userStorage&&(this.usedStoragePercentage=Math.round(Math.min(100*this.userStorage.used/this.userStorage.max,100)),this.storageAvailable=Math.max(this.userStorage.max-this.userStorage.used,0))}static#e=s=()=>(this.\u0275fac=function(i){return new(i||n)},this.\u0275cmp=e.VBU({type:n,selectors:[["app-upload-used-storage"]],inputs:{userStorage:"userStorage",recalculatingStorage:"recalculatingStorage",loading:"loading"},outputs:{openInfoModal:"openInfoModal",recalculateStorage:"recalculateStorage"},standalone:!1,features:[e.OA$],decls:28,vars:22,consts:[[1,"flat-container","py-2","px-3","flex-grow-1","position-relative","d-flex","flex-column"],[1,"d-flex","align-items-end"],[1,"fv-small-caps","fs-lg"],[1,"material-icons-outlined","d-block","ms-auto","text-primary","cursor-pointer",3,"click"],[1,"my-auto"],[1,"storage-desc","text-justify"],[3,"innerHTML"],["role","progressbar","aria-valuemin","0","aria-valuemax","100",1,"progress",3,"appTippy","ariaValueNow"],[1,"progress-bar",3,"ngStyle"],[3,"innerText"],[1,"d-flex","align-items-center"],[1,"me-auto"],["role","button","appTippy","Ricalcola lo spazio",1,"d-block","material-icons-outlined","icon-small","mt-1","ms-1","refresh-storage",3,"click","ngClass","disableOnTouchDevice"]],template:function(i,r){1&i&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2),e.EFF(3,"Spazio occupato"),e.k0s(),e.j41(4,"div",3),e.bIt("click",function(){return r.openInfoModal.emit()}),e.EFF(5," info "),e.k0s()(),e.j41(6,"div",4)(7,"p",5),e.EFF(8," A questo account \xe8 associato uno spazio di "),e.nrm(9,"span",6),e.nI1(10,"formatBytes"),e.EFF(11,". Una volta occupato tutto lo spazio disponibile, per caricare nuovi file occorre cancellare quelli pi\xf9 vecchi o inutilizzati. "),e.k0s()(),e.j41(12,"div")(13,"div",7),e.nI1(14,"formatBytes"),e.j41(15,"div",8),e.nVh(16,Kl,1,1,"span",9),e.k0s()(),e.j41(17,"div",10)(18,"div",11)(19,"small"),e.EFF(20,"Spazio libero: "),e.nrm(21,"span",6),e.nI1(22,"formatBytes"),e.EFF(23," su "),e.nrm(24,"span",6),e.nI1(25,"formatBytes"),e.k0s()(),e.j41(26,"a",12),e.bIt("click",function(){return r.recalculateStorage.emit()}),e.EFF(27,"sync"),e.k0s()()()()),2&i&&(e.R7$(9),e.Y8G("innerHTML",e.bMT(10,9,r.userStorage.max),e.npT),e.R7$(4),e.Y8G("appTippy","I file caricati occupano "+e.bMT(14,11,r.userStorage.used))("ariaValueNow",r.usedStoragePercentage),e.R7$(2),e.Y8G("ngStyle",e.eq3(17,Ql,r.usedStoragePercentage+"%")),e.R7$(),e.vxM(r.usedStoragePercentage>1?16:-1),e.R7$(5),e.Y8G("innerHTML",e.bMT(22,13,r.storageAvailable),e.npT),e.R7$(3),e.Y8G("innerHTML",e.bMT(25,15,r.userStorage.max),e.npT),e.R7$(2),e.Y8G("ngClass",e.l_i(19,ql,r.recalculatingStorage,r.loading))("disableOnTouchDevice",!0))},dependencies:[v.YU,v.B3,Oe.e,pi.L],styles:[".storage-desc[_ngcontent-%COMP%]{margin:.5rem 0 1rem}.progress-bar[_ngcontent-%COMP%]{transition:none}.refresh-storage.pending[_ngcontent-%COMP%], .refresh-storage.loading[_ngcontent-%COMP%]{pointer-events:none}.refresh-storage.pending[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_rotation 1s linear infinite}@media (min-width: 1100px){.storage-desc[_ngcontent-%COMP%]{margin:.25rem 0 .5rem}}@keyframes _ngcontent-%COMP%_rotation{0%{transform:rotate(0)}to{transform:rotate(-360deg)}}"]}))}return s(),n})();const Jl=["fileLinksModal"],ec=["renameModal"],tc=["deleteModal"],ic=["moveModal"],nc=["cropModal"];function oc(s,n){1&s&&e.nrm(0,"app-upload-endpoint-advice")}function sc(s,n){if(1&s&&e.nrm(0,"app-upload-no-storage-advice",14),2&s){const o=e.XpG();e.Y8G("storageToFree",o.userStorage.used-o.userStorage.max)}}let rc=(()=>{var s;class n{constructor(t,i,r,a,p,m,f){this.uploadService=t,this.uploadObservablesService=i,this.uploadActionsService=r,this.uploadSubscriptionsService=a,this.toastService=p,this.uploadEndpointsService=m,this.urlQueryParamsService=f,this.fileList=[],this.folderList=[],this.loading=!0,this.currentFolderPath=[],this.currentFilter="",this.currentActionEntities=[],this.currentActionReservedNames=[],this.userStoragePlaceholder={used:0,max:He.mn,exceeded:!1},this.recalculatingUserStorage=!1,this.showRemoteAdvice=(0,te.EW)(()=>{const F=this.uploadEndpointsService.activeRemote();return!this.remotesLoading()&&this.uploadEndpointsService.isRemoteAdviceEnabled()&&F&&!F.default}),this.loadingCounter=1,this.remotesLoading=(0,l.vPA)(!0)}ngOnInit(){var t=this;return(0,S.A)(function*(){t.uploadService.setGqlIdHeader(),t.currentFolderPath=t.uploadService.preferences.lastFolderPath;const i=t.urlQueryParamsService.getAndDeleteParam(Bo.FQ.UPLOAD_REMOTE),r=yield t.uploadEndpointsService.setRemoteList(i,{sizeToken:{},listToken:{paths:t.currentFolderPath}});t.uploadEndpointsService.disableActiveRemoteChange(),t.remotesLoading.set(!1),r.activeRemoteChangedId&&(t.uploadObservablesService.pushCurrentFolderPath([]),t.currentFolderPath=[]),t.uploadActionsService.currentFolderPath=[...t.currentFolderPath],!(yield t.getUserStorage())&&!t.uploadEndpointsService.requiredActiveRemote.default&&(t.uploadEndpointsService.enableActiveRemoteChange(),t.uploadEndpointsService.resetActiveRemote(),t.uploadEndpointsService.disableActiveRemoteChange(),t.currentFolderPath=[],t.uploadActionsService.currentFolderPath=[],yield t.getUserStorage()),yield t.getFiles(),t.setSubscriptions(),yield t.subscribeForChanges(),t.setLoading(!1)})()}setLoading(t){if(t)return this.uploadEndpointsService.disableActiveRemoteChange(),++this.loadingCounter,void(this.loading=!0);--this.loadingCounter,this.loadingCounter<=0&&(this.uploadEndpointsService.enableActiveRemoteChange(),this.loading=!1)}getUserStorage(){var t=this;return(0,S.A)(function*(i=!1){return i&&t.uploadService.flushUserStorage(),t.userStorage=yield t.uploadService.getUserStorage(),void 0!==t.userStorage}).apply(this,arguments)}recalculateUserStorage(){var t=this;return(0,S.A)(function*(){t.recalculatingUserStorage=!0,t.userStorage=yield t.uploadService.getUserStorage(!0),t.recalculatingUserStorage=!1,t.toastService.show({content:"Lo spazio occupato \xe8 stato ricalcolato!"})})()}subscribeForChanges(){var t=this;return(0,S.A)(function*(){t.graphqlChangesSubscriptionDispose=yield t.uploadService.subscribeForChanges(function(){var i=(0,S.A)(function*(r){const a=(p,m)=>{p&&t.closeActionModal(),m&&t.uploadObservablesService.pushCurrentFolderPath([])};switch(r.type){case Ot.UPLOAD:{const p=t.uploadSubscriptionsService.parseUploadEvent(r.message);p&&t.uploadedFiles(p)}break;case Ot.NEW_DIR:{const p=t.uploadSubscriptionsService.parseCreateFolderEvent(r.message);p&&t.createFolder(p)}break;case Ot.DELETE:{const p=t.uploadSubscriptionsService.parseDeleteEntityEvent(r.message,t.currentFolderPath,t.currentActionEntities);p&&(a(p.entityCompromised,p.pathCompromised),t.removeEntitiesFromList(p.event))}break;case Ot.MOVE:{const p=t.uploadSubscriptionsService.parseMoveEntityEvent(r.message,t.currentFolderPath,t.currentActionEntities);if(!p)break;a(p.entityCompromised,p.pathCompromised);const m={name:p.source.name,type:p.type};p.isRename?t.renameEntityInList({list:[m],destPath:p.target.paths,newEntityData:p.newEntity}):(t.removeEntitiesFromList({destPath:p.source.paths,list:[m]}),t.moveEntitiesInList({list:[m],destPath:p.target.paths,originPath:p.source.paths,results:[{data:p.newEntity,type:m.type}]}))}}});return function(r){return i.apply(this,arguments)}}())})()}setSubscriptions(){var t=this;this.actionSubscription=this.uploadObservablesService.actionObservable.subscribe(i=>{if(i.payload.entities[0]){switch(i.name){case C.SP.FILE_SHOW_LINKS:this.currentActionModalRef=this.fileLinksModalComponent.open();break;case C.SP.RENAME:this.currentActionReservedNames=i.payload.entities[0].type===C.OE.FILE?this.fileList.map(r=>r.name):this.folderList.map(r=>r.name),this.currentActionModalRef=this.renameModalComponent.open();break;case C.SP.MOVE:this.currentActionModalRef=this.fileMoveModalComponent.open();break;case C.SP.DELETE:this.currentActionModalRef=this.deleteModalComponent.open();break;case C.SP.FILE_EDIT:this.currentActionModalRef=this.fileCropModalComponent.open()}this.currentActionEntities=i.payload.entities}}),this.currentFolderPathSubscription=this.uploadObservablesService.currentFolderPathObservable.subscribe(function(){var i=(0,S.A)(function*(r){t.setLoading(!0),t.uploadObservablesService.pushSelectedFile([]),t.uploadObservablesService.pushUploadingFileQueue([]),t.closeActionModal(),t.currentFolderPath=r,t.uploadActionsService.currentFolderPath=[...r],yield t.getFiles(),t.setLoading(!1)});return function(r){return i.apply(this,arguments)}}()),this.remoteSubscription=this.uploadObservablesService.activeRemoteObservable.pipe((0,se.p)(i=>!!i)).subscribe((0,S.A)(function*(){return yield t.loginAndRemoteCallback()}))}loginAndRemoteCallback(){var t=this;return(0,S.A)(function*(i=[]){t.setLoading(!0),t.uploadObservablesService.pushCurrentFolderPath(i),yield t.getUserStorage(),t.setLoading(!1)}).apply(this,arguments)}closeActionModal(){this.currentActionModalRef&&(this.currentActionModalRef.close(),this.currentActionModalRef=void 0)}getFiles(){var t=this;return(0,S.A)(function*(){const i=yield t.uploadService.getFileList(t.currentFolderPath);t.fileList=i.files.map(r=>({...r})),t.folderList=i.folders.map(r=>({...r})),t.sortListByTime()})()}sortListByTime(){this.fileList.sort((t,i)=>t.time>i.time?-1:1)}deleteEndEvent(){var t=this;return(0,S.A)(function*(){yield t.getUserStorage(!0)})()}removeEntitiesFromList(t){const i=(0,j.PD)(t.list);for(const[r,a]of Object.entries(i)){if(0===a.length)continue;const p=this.uploadActionsService.removeEntitiesCallback(t.destPath,a.map(m=>m.name),r);if(p.success&&p.payload){const m=r===C.OE.FILE,f=m?this.fileList:this.folderList;for(const F of p.payload.list){const P=f.findIndex(R=>R.name===F);P>-1&&f.splice(P,1)}m?(this.uploadObservablesService.pushDeleteFile(p.payload.list),this.deselectFiles(p.payload.list)):this.folderList=[...f]}}}renameEntityInList(t){const i=t.list[0],r=this.uploadActionsService.renameEntityCallback(t.destPath,i,t.newEntityData);if(!r.payload)return;const a=r.payload.list[0],p=i.type===C.OE.FILE?this.fileList:this.folderList,m=p.findIndex(f=>f.name===i.name);m<0||(p[m]=a,this.uploadObservablesService.pushRenameEntity({oldName:i.name,newEntity:a}),i.type===C.OE.FILE&&this.sortListByTime())}moveEntitiesInList(t){const i=this.uploadActionsService.moveEntitiesCallback(t.results);i.payload&&(i.payload.list.files.length&&this.uploadedFiles({destPath:t.destPath,list:i.payload.list.files,rewrite:!1}),i.payload.list.folders.length&&this.createFolder({destPath:t.destPath,list:i.payload.list.folders,opened:!1}))}fileUploadedEvent(t){var i=this;return(0,S.A)(function*(){i.uploadedFiles(t),t.list.length&&(yield i.getUserStorage(!0))})()}uploadedFiles(t){let i=[];if(t.rewrite)i=t.list.map(a=>a.name);else{const a=this.uploadService.cache.getItem(t.destPath)?.files;if(a)for(const p of t.list)a.findIndex(m=>m.name===p.name)>-1&&i.push(p.name)}i.length&&this.removeEntitiesFromList({destPath:t.destPath,list:i.map(a=>({name:a,type:C.OE.FILE}))});const r=this.uploadActionsService.addEntitiesCallback(t.destPath,t.list,C.OE.FILE);r.success&&r.payload&&(this.fileList.unshift(...r.payload.list),this.uploadObservablesService.pushUploadedFile(r.payload.list))}createFolder(t){const i=this.uploadActionsService.addEntitiesCallback(t.destPath,t.list,C.OE.FOLDER);!t.opened&&i.success&&i.payload&&(this.folderList=[...this.folderList,...i.payload.list])}selectAllFiles(){this.uploadObservablesService.pushSelectedFile(this.fileList.map(t=>({name:t.name,selected:!0})))}deselectFiles(t){this.uploadObservablesService.pushSelectedFile(t.map(i=>({name:i,selected:!1})))}ngOnDestroy(){this.actionSubscription?.unsubscribe(),this.currentFolderPathSubscription?.unsubscribe(),this.remoteSubscription?.unsubscribe(),this.graphqlChangesSubscriptionDispose&&this.graphqlChangesSubscriptionDispose(),this.uploadService.removeGqlIdHeader(),this.deselectFiles([])}static#e=s=()=>(this.\u0275fac=function(i){return new(i||n)(e.rXU(H.B),e.rXU(ie.f),e.rXU(ge),e.rXU(Go),e.rXU(de.f),e.rXU(Ze.D),e.rXU(Vo.v))},this.\u0275cmp=e.VBU({type:n,selectors:[["ng-component"]],viewQuery:function(i,r){if(1&i&&(e.GBs(Jl,5),e.GBs(ec,5),e.GBs(tc,5),e.GBs(ic,5),e.GBs(nc,5)),2&i){let a;e.mGM(a=e.lsd())&&(r.fileLinksModalComponent=a.first),e.mGM(a=e.lsd())&&(r.renameModalComponent=a.first),e.mGM(a=e.lsd())&&(r.deleteModalComponent=a.first),e.mGM(a=e.lsd())&&(r.fileMoveModalComponent=a.first),e.mGM(a=e.lsd())&&(r.fileCropModalComponent=a.first)}},standalone:!1,decls:25,vars:30,consts:[["fileLinksModal",""],["renameModal",""],["deleteModal",""],["moveModal",""],["cropModal",""],["infoModal",""],["pageTitle","Gestione file"],[1,"d-grid","upload-header"],[3,"fileUploadedEvent","openInfoModal","loading","currentFolderPath","disabled","disabledLoading"],[1,"d-flex","flex-column"],[1,"min-w-0",3,"fileList","loading"],[1,"d-block",3,"fileLoading"],[1,"d-flex","flex-grow-1",3,"openInfoModal","recalculateStorage","loading","userStorage","recalculatingStorage"],[3,"filterEvent","selectAllFilesEvent","loading","fileList"],[3,"storageToFree"],[3,"newFolderEvent","loading","folderList","currentFolderPath","filter"],[3,"loading","fileList","filter"],[3,"entities"],[3,"renameEvent","currentFolderPath","entity","reservedNames"],[3,"deleteStartEvent","deleteEndEvent","entities","currentFolderPath"],[3,"moveEvent","deleteBeforeMovingEvent","entities","currentFolderPath"],[3,"entity"]],template:function(i,r){if(1&i){const a=e.RV6();e.nrm(0,"app-breadcrumb",6),e.j41(1,"div",7)(2,"app-uploader",8),e.bIt("fileUploadedEvent",function(m){return l.eBV(a),l.Njj(r.fileUploadedEvent(m))})("openInfoModal",function(){l.eBV(a);const m=e.sdS(24);return l.Njj(m.open())}),e.k0s(),e.j41(3,"div",9),e.nrm(4,"app-upload-recent-files",10)(5,"app-upload-endpoints",11),e.k0s(),e.j41(6,"div",9)(7,"app-upload-used-storage",12),e.bIt("openInfoModal",function(){l.eBV(a);const m=e.sdS(24);return l.Njj(m.open())})("recalculateStorage",function(){return l.eBV(a),l.Njj(r.recalculateUserStorage())}),e.k0s(),e.j41(8,"app-upload-filter",13),e.bIt("filterEvent",function(m){return l.eBV(a),l.Njj(r.currentFilter=m)})("selectAllFilesEvent",function(){return l.eBV(a),l.Njj(r.selectAllFiles())}),e.k0s()()(),e.nVh(9,oc,1,0,"app-upload-endpoint-advice"),e.nVh(10,sc,1,1,"app-upload-no-storage-advice",14),e.j41(11,"app-upload-folder-list",15),e.bIt("newFolderEvent",function(m){return l.eBV(a),l.Njj(r.createFolder(m))}),e.k0s(),e.nrm(12,"app-upload-file-list",16)(13,"app-upload-file-links-modal",17,0),e.j41(15,"app-upload-rename-modal",18,1),e.bIt("renameEvent",function(m){return l.eBV(a),l.Njj(r.renameEntityInList(m))}),e.k0s(),e.j41(17,"app-upload-delete-modal",19,2),e.bIt("deleteStartEvent",function(m){return l.eBV(a),l.Njj(r.removeEntitiesFromList(m))})("deleteEndEvent",function(){return l.eBV(a),l.Njj(r.deleteEndEvent())}),e.k0s(),e.j41(19,"app-upload-move-modal",20,3),e.bIt("moveEvent",function(m){return l.eBV(a),l.Njj(r.moveEntitiesInList(m))})("deleteBeforeMovingEvent",function(m){return l.eBV(a),l.Njj(r.removeEntitiesFromList(m))}),e.k0s(),e.nrm(21,"app-upload-crop-modal",21,4)(23,"app-upload-info-modal",null,5)}2&i&&(e.R7$(2),e.Y8G("loading",r.loading)("currentFolderPath",r.currentFolderPath)("disabled",(null==r.userStorage?null:r.userStorage.exceeded)||!1)("disabledLoading",!r.userStorage),e.R7$(2),e.Y8G("fileList",r.fileList)("loading",r.loading),e.R7$(),e.Y8G("fileLoading",r.loading),e.R7$(2),e.Y8G("loading",r.loading)("userStorage",r.userStorage||r.userStoragePlaceholder)("recalculatingStorage",r.recalculatingUserStorage),e.R7$(),e.Y8G("loading",r.loading)("fileList",r.fileList),e.R7$(),e.vxM(r.showRemoteAdvice()?9:-1),e.R7$(),e.vxM(r.userStorage&&r.userStorage.exceeded?10:-1),e.R7$(),e.Y8G("loading",r.loading)("folderList",r.folderList)("currentFolderPath",r.currentFolderPath)("filter",r.currentFilter),e.R7$(),e.Y8G("loading",r.loading)("fileList",r.fileList)("filter",r.currentFilter),e.R7$(),e.Y8G("entities",r.currentActionEntities),e.R7$(2),e.Y8G("currentFolderPath",r.currentFolderPath)("entity",r.currentActionEntities[0])("reservedNames",r.currentActionReservedNames),e.R7$(2),e.Y8G("entities",r.currentActionEntities)("currentFolderPath",r.currentFolderPath),e.R7$(2),e.Y8G("entities",r.currentActionEntities)("currentFolderPath",r.currentFolderPath),e.R7$(2),e.Y8G("entity",r.currentActionEntities[0]))},dependencies:[Xo.D,Ji,nn,qs.y,va,nl,ol.l,Pe,Pt,ve,bl,Ml,yo,Wl,zo,Zl],styles:["app-upload-recent-files[_ngcontent-%COMP%]{display:none}app-upload-endpoints[_ngcontent-%COMP%]{margin:0 1rem}.upload-header[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:1rem;margin-bottom:1rem}@media (min-width: 500px){.upload-header[_ngcontent-%COMP%]{margin-bottom:1.5rem}}@media (min-width: 768px){app-upload-endpoints[_ngcontent-%COMP%]{margin:0}.upload-header[_ngcontent-%COMP%]{margin-bottom:2rem}}@media (min-width: 960px){app-upload-recent-files[_ngcontent-%COMP%]{display:block;flex-grow:1}.upload-header[_ngcontent-%COMP%]{gap:1.5rem}}@media (min-width: 1100px) and (max-width: 1499.98px){.upload-header[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}.upload-header[_ngcontent-%COMP%]   app-uploader[_ngcontent-%COMP%]{grid-column:span 2}}@media (min-width: 1500px){.upload-header[_ngcontent-%COMP%]{grid-template-columns:calc(38% - 1rem) calc(28% - 1rem) calc(34% - 1rem)}.upload-header[_ngcontent-%COMP%]   app-uploader[_ngcontent-%COMP%]{grid-column:initial;min-height:250px}}"]}))}return s(),n})();var ac=_(6034),lc=_(1465),cc=_(3071),dc=_(1246);let Vn=(()=>{var s;class n{static#e=s=()=>(this.\u0275fac=function(i){return new(i||n)},this.\u0275mod=e.$C({type:n}),this.\u0275inj=l.G2t({imports:[v.MD]}))}return s(),n})();var Yi=_(4511);Yi.defaults.touchAction="",Yi.defaults.cssProps.userSelect="",I.CN&&(Yi.defaults.cssProps.userSelect="none");let pc=(()=>{var s;class n{static#e=s=()=>(this.\u0275fac=function(i){return new(i||n)},this.\u0275mod=e.$C({type:n}),this.\u0275inj=l.G2t({imports:[lc.B,cc.K,v.MD,Pr,me.P,Dn.Un,y.zH,Ce.E9,dc.A,L.forChild(),Vn]}))}return s(),n})(),hc=(()=>{var s;class n{static#e=s=()=>(this.\u0275fac=function(i){return new(i||n)},this.\u0275mod=e.$C({type:n}),this.\u0275inj=l.G2t({imports:[he.F,v.MD,x.YN,G.iZ,q.Q,y.zH]}))}return s(),n})();var mc=_(3666),uc=_(146);const _c=[{path:"",component:rc}];let gc=(()=>{var s;class n{constructor(t){this.timeagoIntl=t,this.timeagoIntl.strings=w,this.timeagoIntl.changes.next()}static#e=s=()=>(this.\u0275fac=function(i){return new(i||n)(l.KVO(st))},this.\u0275mod=e.$C({type:n}),this.\u0275inj=l.G2t({imports:[he.F,E.y,ee._,ye.FQ,v.MD,me.P,x.YN,N,ti,Q.M,G.iZ,q.Q,y.oi,y.HC,y.zH,it.iI.forChild(_c),L.forRoot({intl:{provide:st},formatter:{provide:_e,useClass:Et},clock:{provide:Ue,useClass:K}}),Ji,nn,ac.B,pc,Vn,hc,uc.h,mc.i]}))}return s(),n})()},4511:(tt,Fe,_)=>{var he;!function(E,ee,ye,v){"use strict";var w,me=["","webkit","Moz","MS","ms","o"],x=ee.createElement("div"),l=Math.round,N=Math.abs,Q=Date.now;function G(c,d,h){return setTimeout(V(c,h),d)}function q(c,d,h){return!!Array.isArray(c)&&(y(c,h[d],h),!0)}function y(c,d,h){var u;if(c)if(c.forEach)c.forEach(d,h);else if(c.length!==v)for(u=0;u<c.length;)d.call(h,c[u],u,c),u++;else for(u in c)c.hasOwnProperty(u)&&d.call(h,c[u],u,c)}function it(c,d,h){var u="DEPRECATED METHOD: "+d+"\n"+h+" AT \n";return function(){var g=new Error("get-stack-trace"),b=g&&g.stack?g.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",M=E.console&&(E.console.warn||E.console.log);return M&&M.call(E.console,u,b),c.apply(this,arguments)}}w="function"!=typeof Object.assign?function(d){if(d===v||null===d)throw new TypeError("Cannot convert undefined or null to object");for(var h=Object(d),u=1;u<arguments.length;u++){var g=arguments[u];if(g!==v&&null!==g)for(var b in g)g.hasOwnProperty(b)&&(h[b]=g[b])}return h}:Object.assign;var U=it(function(d,h,u){for(var g=Object.keys(h),b=0;b<g.length;)(!u||u&&d[g[b]]===v)&&(d[g[b]]=h[g[b]]),b++;return d},"extend","Use `assign`."),ue=it(function(d,h){return U(d,h,!0)},"merge","Use `assign`.");function O(c,d,h){var g,u=d.prototype;(g=c.prototype=Object.create(u)).constructor=c,g._super=u,h&&w(g,h)}function V(c,d){return function(){return c.apply(d,arguments)}}function le(c,d){return"function"==typeof c?c.apply(d&&d[0]||v,d):c}function je(c,d){return c===v?d:c}function xe(c,d,h){y(nt(d),function(u){c.addEventListener(u,h,!1)})}function T(c,d,h){y(nt(d),function(u){c.removeEventListener(u,h,!1)})}function k(c,d){for(;c;){if(c==d)return!0;c=c.parentNode}return!1}function se(c,d){return c.indexOf(d)>-1}function nt(c){return c.trim().split(/\s+/g)}function Le(c,d,h){if(c.indexOf&&!h)return c.indexOf(d);for(var u=0;u<c.length;){if(h&&c[u][h]==d||!h&&c[u]===d)return u;u++}return-1}function ot(c){return Array.prototype.slice.call(c,0)}function Bt(c,d,h){for(var u=[],g=[],b=0;b<c.length;){var M=d?c[b][d]:c[b];Le(g,M)<0&&u.push(c[b]),g[b]=M,b++}return h&&(u=d?u.sort(function(z,Y){return z[d]>Y[d]}):u.sort()),u}function ke(c,d){for(var h,u,g=d[0].toUpperCase()+d.slice(1),b=0;b<me.length;){if((u=(h=me[b])?h+g:d)in c)return u;b++}return v}var We=1;function Ct(c){var d=c.ownerDocument||c;return d.defaultView||d.parentWindow||E}var bt="ontouchstart"in E,st=ke(E,"PointerEvent")!==v,$t=bt&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),_e="touch",Et="mouse",ie=["x","y"],Me=["clientX","clientY"];function re(c,d){var h=this;this.manager=c,this.callback=d,this.element=c.element,this.target=c.options.inputTarget,this.domHandler=function(u){le(c.options.enable,[c])&&h.handler(u)},this.init()}function Ge(c,d,h){var u=h.pointers.length,g=h.changedPointers.length,b=1&d&&u-g===0,M=12&d&&u-g===0;h.isFirst=!!b,h.isFinal=!!M,b&&(c.session={}),h.eventType=d,function _i(c,d){var h=c.session,u=d.pointers,g=u.length;h.firstInput||(h.firstInput=Qt(d)),g>1&&!h.firstMultiple?h.firstMultiple=Qt(d):1===g&&(h.firstMultiple=!1);var b=h.firstInput,M=h.firstMultiple,A=M?M.center:b.center,z=d.center=qt(u);d.timeStamp=Q(),d.deltaTime=d.timeStamp-b.timeStamp,d.angle=Be(A,z),d.distance=rt(A,z),function gi(c,d){var h=d.center,u=c.offsetDelta||{},g=c.prevDelta||{},b=c.prevInput||{};(1===d.eventType||4===b.eventType)&&(g=c.prevDelta={x:b.deltaX||0,y:b.deltaY||0},u=c.offsetDelta={x:h.x,y:h.y}),d.deltaX=g.x+(h.x-u.x),d.deltaY=g.y+(h.y-u.y)}(h,d),d.offsetDirection=Ve(d.deltaX,d.deltaY);var Y=Kt(d.deltaTime,d.deltaX,d.deltaY);d.overallVelocityX=Y.x,d.overallVelocityY=Y.y,d.overallVelocity=N(Y.x)>N(Y.y)?Y.x:Y.y,d.scale=M?function Zt(c,d){return rt(d[0],d[1],Me)/rt(c[0],c[1],Me)}(M.pointers,u):1,d.rotation=M?function vi(c,d){return Be(d[1],d[0],Me)+Be(c[1],c[0],Me)}(M.pointers,u):0,d.maxPointers=h.prevInput?d.pointers.length>h.prevInput.maxPointers?d.pointers.length:h.prevInput.maxPointers:d.pointers.length,function fi(c,d){var g,b,M,A,h=c.lastInterval||d,u=d.timeStamp-h.timeStamp;if(8!=d.eventType&&(u>25||h.velocity===v)){var z=d.deltaX-h.deltaX,Y=d.deltaY-h.deltaY,ve=Kt(u,z,Y);b=ve.x,M=ve.y,g=N(ve.x)>N(ve.y)?ve.x:ve.y,A=Ve(z,Y),c.lastInterval=d}else g=h.velocity,b=h.velocityX,M=h.velocityY,A=h.direction;d.velocity=g,d.velocityX=b,d.velocityY=M,d.direction=A}(h,d);var ve=c.element;k(d.srcEvent.target,ve)&&(ve=d.srcEvent.target),d.target=ve}(c,h),c.emit("hammer.input",h),c.recognize(h),c.session.prevInput=h}function Qt(c){for(var d=[],h=0;h<c.pointers.length;)d[h]={clientX:l(c.pointers[h].clientX),clientY:l(c.pointers[h].clientY)},h++;return{timeStamp:Q(),pointers:d,center:qt(d),deltaX:c.deltaX,deltaY:c.deltaY}}function qt(c){var d=c.length;if(1===d)return{x:l(c[0].clientX),y:l(c[0].clientY)};for(var h=0,u=0,g=0;g<d;)h+=c[g].clientX,u+=c[g].clientY,g++;return{x:l(h/d),y:l(u/d)}}function Kt(c,d,h){return{x:d/c||0,y:h/c||0}}function Ve(c,d){return c===d?1:N(c)>=N(d)?c<0?2:4:d<0?8:16}function rt(c,d,h){h||(h=ie);var u=d[h[0]]-c[h[0]],g=d[h[1]]-c[h[1]];return Math.sqrt(u*u+g*g)}function Be(c,d,h){return h||(h=ie),180*Math.atan2(d[h[1]]-c[h[1]],d[h[0]]-c[h[0]])/Math.PI}re.prototype={handler:function(){},init:function(){this.evEl&&xe(this.element,this.evEl,this.domHandler),this.evTarget&&xe(this.target,this.evTarget,this.domHandler),this.evWin&&xe(Ct(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&T(this.element,this.evEl,this.domHandler),this.evTarget&&T(this.target,this.evTarget,this.domHandler),this.evWin&&T(Ct(this.element),this.evWin,this.domHandler)}};var Ci={mousedown:1,mousemove:2,mouseup:4};function ct(){this.evEl="mousedown",this.evWin="mousemove mouseup",this.pressed=!1,re.apply(this,arguments)}O(ct,re,{handler:function(d){var h=Ci[d.type];1&h&&0===d.button&&(this.pressed=!0),2&h&&1!==d.which&&(h=4),this.pressed&&(4&h&&(this.pressed=!1),this.callback(this.manager,h,{pointers:[d],changedPointers:[d],pointerType:Et,srcEvent:d}))}});var ne={pointerdown:1,pointermove:2,pointerup:4,pointercancel:8,pointerout:8},bi={2:_e,3:"pen",4:Et,5:"kinect"},Ft="pointerdown",Jt="pointermove pointerup pointercancel";function yt(){this.evEl=Ft,this.evWin=Jt,re.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}E.MSPointerEvent&&!E.PointerEvent&&(Ft="MSPointerDown",Jt="MSPointerMove MSPointerUp MSPointerCancel"),O(yt,re,{handler:function(d){var h=this.store,u=!1,g=d.type.toLowerCase().replace("ms",""),b=ne[g],M=bi[d.pointerType]||d.pointerType,A=M==_e,z=Le(h,d.pointerId,"pointerId");1&b&&(0===d.button||A)?z<0&&(h.push(d),z=h.length-1):12&b&&(u=!0),!(z<0)&&(h[z]=d,this.callback(this.manager,b,{pointers:h,changedPointers:[d],pointerType:M,srcEvent:d}),u&&h.splice(z,1))}});var Ei={touchstart:1,touchmove:2,touchend:4,touchcancel:8};function ei(){this.evTarget="touchstart",this.evWin="touchstart touchmove touchend touchcancel",this.started=!1,re.apply(this,arguments)}function xi(c,d){var h=ot(c.touches),u=ot(c.changedTouches);return 12&d&&(h=Bt(h.concat(u),"identifier",!0)),[h,u]}O(ei,re,{handler:function(d){var h=Ei[d.type];if(1===h&&(this.started=!0),this.started){var u=xi.call(this,d,h);12&h&&u[0].length-u[1].length===0&&(this.started=!1),this.callback(this.manager,h,{pointers:u[0],changedPointers:u[1],pointerType:_e,srcEvent:d})}}});var Mi={touchstart:1,touchmove:2,touchend:4,touchcancel:8};function dt(){this.evTarget="touchstart touchmove touchend touchcancel",this.targetIds={},re.apply(this,arguments)}function ti(c,d){var h=ot(c.touches),u=this.targetIds;if(3&d&&1===h.length)return u[h[0].identifier]=!0,[h,h];var g,b,M=ot(c.changedTouches),A=[],z=this.target;if(b=h.filter(function(Y){return k(Y.target,z)}),1===d)for(g=0;g<b.length;)u[b[g].identifier]=!0,g++;for(g=0;g<M.length;)u[M[g].identifier]&&A.push(M[g]),12&d&&delete u[M[g].identifier],g++;return A.length?[Bt(b.concat(A),"identifier",!0),A]:void 0}function fe(){re.apply(this,arguments);var c=V(this.handler,this);this.touch=new dt(this.manager,c),this.mouse=new ct(this.manager,c),this.primaryTouch=null,this.lastTouches=[]}function Xe(c,d){1&c?(this.primaryTouch=d.changedPointers[0].identifier,Oe.call(this,d)):12&c&&Oe.call(this,d)}function Oe(c){var d=c.changedPointers[0];if(d.identifier===this.primaryTouch){var h={x:d.clientX,y:d.clientY};this.lastTouches.push(h);var u=this.lastTouches;setTimeout(function(){var b=u.indexOf(h);b>-1&&u.splice(b,1)},2500)}}function ki(c){for(var d=c.srcEvent.clientX,h=c.srcEvent.clientY,u=0;u<this.lastTouches.length;u++){var g=this.lastTouches[u],b=Math.abs(d-g.x),M=Math.abs(h-g.y);if(b<=25&&M<=25)return!0}return!1}O(dt,re,{handler:function(d){var h=Mi[d.type],u=ti.call(this,d,h);u&&this.callback(this.manager,h,{pointers:u[0],changedPointers:u[1],pointerType:_e,srcEvent:d})}}),O(fe,re,{handler:function(d,h,u){var b=u.pointerType==Et;if(!(b&&u.sourceCapabilities&&u.sourceCapabilities.firesTouchEvents)){if(u.pointerType==_e)Xe.call(this,h,u);else if(b&&ki.call(this,u))return;this.callback(d,h,u)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var ii=ke(x.style,"touchAction"),ni=ii!==v,ce="compute",xt="manipulation",Se="none",qe="pan-x",Ke="pan-y",ht=function Pi(){if(!ni)return!1;var c={},d=E.CSS&&E.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(h){c[h]=!d||E.CSS.supports("touch-action",h)}),c}();function Mt(c,d){this.manager=c,this.set(d)}Mt.prototype={set:function(c){c==ce&&(c=this.compute()),ni&&this.manager.element.style&&ht[c]&&(this.manager.element.style[ii]=c),this.actions=c.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var c=[];return y(this.manager.recognizers,function(d){le(d.options.enable,[d])&&(c=c.concat(d.getTouchAction()))}),function Si(c){if(se(c,Se))return Se;var d=se(c,qe),h=se(c,Ke);return d&&h?Se:d||h?d?qe:Ke:se(c,xt)?xt:"auto"}(c.join(" "))},preventDefaults:function(c){var d=c.srcEvent,h=c.offsetDirection;if(!this.manager.session.prevented){var u=this.actions,g=se(u,Se)&&!ht[Se],b=se(u,Ke)&&!ht[Ke],M=se(u,qe)&&!ht[qe];if(g&&1===c.pointers.length&&c.distance<2&&c.deltaTime<250)return;return M&&b||!(g||b&&6&h||M&&24&h)?void 0:this.preventSrc(d)}d.preventDefault()},preventSrc:function(c){this.manager.session.prevented=!0,c.preventDefault()}};var H=32;function Te(c){this.options=w({},this.defaults,c||{}),this.id=function Ne(){return We++}(),this.manager=null,this.options.enable=je(this.options.enable,!0),this.state=1,this.simultaneous={},this.requireFail=[]}function si(c){return 16&c?"cancel":8&c?"end":4&c?"move":2&c?"start":""}function ri(c){return 16==c?"down":8==c?"up":2==c?"left":4==c?"right":""}function ut(c,d){var h=d.manager;return h?h.get(c):c}function pe(){Te.apply(this,arguments)}function _t(){pe.apply(this,arguments),this.pX=null,this.pY=null}function Tt(){pe.apply(this,arguments)}function kt(){Te.apply(this,arguments),this._timer=null,this._input=null}function St(){pe.apply(this,arguments)}function Pt(){pe.apply(this,arguments)}function I(){Te.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function Ie(c,d){return(d=d||{}).recognizers=je(d.recognizers,Ie.defaults.preset),new Rt(c,d)}function Rt(c,d){this.options=w({},Ie.defaults,d||{}),this.options.inputTarget=this.options.inputTarget||c,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=c,this.input=function Qe(c){return new(c.options.inputClass||(st?yt:$t?dt:bt?fe:ct))(c,Ge)}(this),this.touchAction=new Mt(this,this.options.touchAction),wt(this,!0),y(this.options.recognizers,function(h){var u=this.add(new h[0](h[1]));h[2]&&u.recognizeWith(h[2]),h[3]&&u.requireFailure(h[3])},this)}function wt(c,d){var u,h=c.element;h.style&&(y(c.options.cssProps,function(g,b){u=ke(h.style,b),d?(c.oldCssProps[u]=h.style[u],h.style[u]=g):h.style[u]=c.oldCssProps[u]||""}),d||(c.oldCssProps={}))}Te.prototype={defaults:{},set:function(c){return w(this.options,c),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(c){if(q(c,"recognizeWith",this))return this;var d=this.simultaneous;return d[(c=ut(c,this)).id]||(d[c.id]=c,c.recognizeWith(this)),this},dropRecognizeWith:function(c){return q(c,"dropRecognizeWith",this)||(c=ut(c,this),delete this.simultaneous[c.id]),this},requireFailure:function(c){if(q(c,"requireFailure",this))return this;var d=this.requireFail;return-1===Le(d,c=ut(c,this))&&(d.push(c),c.requireFailure(this)),this},dropRequireFailure:function(c){if(q(c,"dropRequireFailure",this))return this;c=ut(c,this);var d=Le(this.requireFail,c);return d>-1&&this.requireFail.splice(d,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(c){return!!this.simultaneous[c.id]},emit:function(c){var d=this,h=this.state;function u(g){d.manager.emit(g,c)}h<8&&u(d.options.event+si(h)),u(d.options.event),c.additionalEvent&&u(c.additionalEvent),h>=8&&u(d.options.event+si(h))},tryEmit:function(c){if(this.canEmit())return this.emit(c);this.state=H},canEmit:function(){for(var c=0;c<this.requireFail.length;){if(!(33&this.requireFail[c].state))return!1;c++}return!0},recognize:function(c){var d=w({},c);if(!le(this.options.enable,[this,d]))return this.reset(),void(this.state=H);56&this.state&&(this.state=1),this.state=this.process(d),30&this.state&&this.tryEmit(d)},process:function(c){},getTouchAction:function(){},reset:function(){}},O(pe,Te,{defaults:{pointers:1},attrTest:function(c){var d=this.options.pointers;return 0===d||c.pointers.length===d},process:function(c){var d=this.state,h=c.eventType,u=6&d,g=this.attrTest(c);return u&&(8&h||!g)?16|d:u||g?4&h?8|d:2&d?4|d:2:H}}),O(_t,pe,{defaults:{event:"pan",threshold:10,pointers:1,direction:30},getTouchAction:function(){var c=this.options.direction,d=[];return 6&c&&d.push(Ke),24&c&&d.push(qe),d},directionTest:function(c){var d=this.options,h=!0,u=c.distance,g=c.direction,b=c.deltaX,M=c.deltaY;return g&d.direction||(6&d.direction?(g=0===b?1:b<0?2:4,h=b!=this.pX,u=Math.abs(c.deltaX)):(g=0===M?1:M<0?8:16,h=M!=this.pY,u=Math.abs(c.deltaY))),c.direction=g,h&&u>d.threshold&&g&d.direction},attrTest:function(c){return pe.prototype.attrTest.call(this,c)&&(2&this.state||!(2&this.state)&&this.directionTest(c))},emit:function(c){this.pX=c.deltaX,this.pY=c.deltaY;var d=ri(c.direction);d&&(c.additionalEvent=this.options.event+d),this._super.emit.call(this,c)}}),O(Tt,pe,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Se]},attrTest:function(c){return this._super.attrTest.call(this,c)&&(Math.abs(c.scale-1)>this.options.threshold||2&this.state)},emit:function(c){1!==c.scale&&(c.additionalEvent=this.options.event+(c.scale<1?"in":"out")),this._super.emit.call(this,c)}}),O(kt,Te,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return["auto"]},process:function(c){var d=this.options,h=c.pointers.length===d.pointers,u=c.distance<d.threshold,g=c.deltaTime>d.time;if(this._input=c,!u||!h||12&c.eventType&&!g)this.reset();else if(1&c.eventType)this.reset(),this._timer=G(function(){this.state=8,this.tryEmit()},d.time,this);else if(4&c.eventType)return 8;return H},reset:function(){clearTimeout(this._timer)},emit:function(c){8===this.state&&(c&&4&c.eventType?this.manager.emit(this.options.event+"up",c):(this._input.timeStamp=Q(),this.manager.emit(this.options.event,this._input)))}}),O(St,pe,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Se]},attrTest:function(c){return this._super.attrTest.call(this,c)&&(Math.abs(c.rotation)>this.options.threshold||2&this.state)}}),O(Pt,pe,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:30,pointers:1},getTouchAction:function(){return _t.prototype.getTouchAction.call(this)},attrTest:function(c){var h,d=this.options.direction;return 30&d?h=c.overallVelocity:6&d?h=c.overallVelocityX:24&d&&(h=c.overallVelocityY),this._super.attrTest.call(this,c)&&d&c.offsetDirection&&c.distance>this.options.threshold&&c.maxPointers==this.options.pointers&&N(h)>this.options.velocity&&4&c.eventType},emit:function(c){var d=ri(c.offsetDirection);d&&this.manager.emit(this.options.event+d,c),this.manager.emit(this.options.event,c)}}),O(I,Te,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[xt]},process:function(c){var d=this.options,h=c.pointers.length===d.pointers,u=c.distance<d.threshold,g=c.deltaTime<d.time;if(this.reset(),1&c.eventType&&0===this.count)return this.failTimeout();if(u&&g&&h){if(4!=c.eventType)return this.failTimeout();var b=!this.pTime||c.timeStamp-this.pTime<d.interval,M=!this.pCenter||rt(this.pCenter,c.center)<d.posThreshold;if(this.pTime=c.timeStamp,this.pCenter=c.center,M&&b?this.count+=1:this.count=1,this._input=c,0===this.count%d.taps)return this.hasRequireFailures()?(this._timer=G(function(){this.state=8,this.tryEmit()},d.interval,this),2):8}return H},failTimeout:function(){return this._timer=G(function(){this.state=H},this.options.interval,this),H},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),Ie.VERSION="2.0.7",Ie.defaults={domEvents:!1,touchAction:ce,enable:!0,inputTarget:null,inputClass:null,preset:[[St,{enable:!1}],[Tt,{enable:!1},["rotate"]],[Pt,{direction:6}],[_t,{direction:6},["swipe"]],[I],[I,{event:"doubletap",taps:2},["tap"]],[kt]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},Rt.prototype={set:function(c){return w(this.options,c),c.touchAction&&this.touchAction.update(),c.inputTarget&&(this.input.destroy(),this.input.target=c.inputTarget,this.input.init()),this},stop:function(c){this.session.stopped=c?2:1},recognize:function(c){var d=this.session;if(!d.stopped){this.touchAction.preventDefaults(c);var h,u=this.recognizers,g=d.curRecognizer;(!g||g&&8&g.state)&&(g=d.curRecognizer=null);for(var b=0;b<u.length;)h=u[b],2===d.stopped||g&&h!=g&&!h.canRecognizeWith(g)?h.reset():h.recognize(c),!g&&14&h.state&&(g=d.curRecognizer=h),b++}},get:function(c){if(c instanceof Te)return c;for(var d=this.recognizers,h=0;h<d.length;h++)if(d[h].options.event==c)return d[h];return null},add:function(c){if(q(c,"add",this))return this;var d=this.get(c.options.event);return d&&this.remove(d),this.recognizers.push(c),c.manager=this,this.touchAction.update(),c},remove:function(c){if(q(c,"remove",this))return this;if(c=this.get(c)){var d=this.recognizers,h=Le(d,c);-1!==h&&(d.splice(h,1),this.touchAction.update())}return this},on:function(c,d){if(c!==v&&d!==v){var h=this.handlers;return y(nt(c),function(u){h[u]=h[u]||[],h[u].push(d)}),this}},off:function(c,d){if(c!==v){var h=this.handlers;return y(nt(c),function(u){d?h[u]&&h[u].splice(Le(h[u],d),1):delete h[u]}),this}},emit:function(c,d){this.options.domEvents&&function ci(c,d){var h=ee.createEvent("Event");h.initEvent(c,!0,!0),h.gesture=d,d.target.dispatchEvent(h)}(c,d);var h=this.handlers[c]&&this.handlers[c].slice();if(h&&h.length){d.type=c,d.preventDefault=function(){d.srcEvent.preventDefault()};for(var u=0;u<h.length;)h[u](d),u++}},destroy:function(){this.element&&wt(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},w(Ie,{INPUT_START:1,INPUT_MOVE:2,INPUT_END:4,INPUT_CANCEL:8,STATE_POSSIBLE:1,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:H,DIRECTION_NONE:1,DIRECTION_LEFT:2,DIRECTION_RIGHT:4,DIRECTION_UP:8,DIRECTION_DOWN:16,DIRECTION_HORIZONTAL:6,DIRECTION_VERTICAL:24,DIRECTION_ALL:30,Manager:Rt,Input:re,TouchAction:Mt,TouchInput:dt,MouseInput:ct,PointerEventInput:yt,TouchMouseInput:fe,SingleTouchInput:ei,Recognizer:Te,AttrRecognizer:pe,Tap:I,Pan:_t,Swipe:Pt,Pinch:Tt,Rotate:St,Press:kt,on:xe,off:T,each:y,merge:ue,extend:U,assign:w,inherit:O,bindFn:V,prefixed:ke}),(typeof E<"u"?E:typeof self<"u"?self:{}).Hammer=Ie,(he=function(){return Ie}.call(Fe,_,Fe,tt))!==v&&(tt.exports=he)}(window,document)},4981:(tt,Fe,_)=>{"use strict";_.d(Fe,{D:()=>it});var he=_(2998),E=_(6350),ee=_(2615);let ye=(()=>{var w;class U{constructor(){this.dependencies={[E.LP.LOGIN]:null,[E.LP.HOME]:null,[E.LP.SETTINGS]:E.LP.HOME,[E.LP.SCRIPT]:E.LP.HOME,[E.LP.SCRIPT_FORUM]:E.LP.SCRIPT,[E.LP.SCRIPT_USER]:E.LP.SCRIPT,[E.LP.SCRIPT_SETTINGS]:[E.LP.SCRIPT_USER,E.LP.SCRIPT_FORUM],[E.LP.SCRIPT_DEV]:E.LP.SCRIPT,[E.LP.SCRIPT_DEV_SETTINGS]:E.LP.SCRIPT_DEV,[E.LP.UPLOAD]:E.LP.HOME,[E.LP.ADMIN]:E.LP.HOME,[E.LP.STATS]:E.LP.HOME,[E.LP.STATS_UPLOAD]:E.LP.STATS,[E.LP.TOOLS]:E.LP.HOME},this.names={[E.LP.LOGIN]:"Login",[E.LP.HOME]:"Home",[E.LP.SETTINGS]:"Notifiche",[E.LP.SCRIPT]:"Script",[E.LP.SCRIPT_FORUM]:"Forum",[E.LP.SCRIPT_USER]:"Utenti",[E.LP.SCRIPT_SETTINGS]:"Impostazioni",[E.LP.SCRIPT_DEV]:"Sviluppo",[E.LP.SCRIPT_DEV_SETTINGS]:"Impostazioni",[E.LP.UPLOAD]:"Upload",[E.LP.ADMIN]:"Amministrazione",[E.LP.STATS]:"Statistiche",[E.LP.STATS_UPLOAD]:"Upload",[E.LP.TOOLS]:"Utilit\xe0"}}createPathList(O,V=[]){const le=(k,se)=>{k.unshift({name:this.names[se]||"",path:se})},je=k=>(0,he.l$)(this.dependencies,k)?this.dependencies[k]instanceof Array?this.dependencies[k].includes(V[0])?V.shift():this.dependencies[k][0]:this.dependencies[k]:null,xe=[{name:this.names[O]||"",path:""}];let T=je(O);for(;T;)le(xe,T),T=je(T);return xe}static#e=w=()=>(this.\u0275fac=function(V){return new(V||U)},this.\u0275prov=ee.jDH({token:U,factory:U.\u0275fac,providedIn:"root"}))}return w(),U})();var v=_(3664),me=_(3694),x=_(8132),e=_(2200);const l=w=>({"hide-nav":w}),N=w=>({"d-none d-md-block":w}),Q=w=>({active:w});function G(w,U){if(1&w&&v.nrm(0,"a",5),2&w){const ue=v.XpG().$implicit;v.Y8G("routerLink",ue.path)("innerText",ue.name)}}function q(w,U){if(1&w&&v.nrm(0,"span",6),2&w){const ue=v.XpG().$implicit;v.Y8G("innerText",ue.name)}}function y(w,U){if(1&w&&(v.j41(0,"li",4),v.nVh(1,G,1,2,"a",5)(2,q,1,1,"span",6),v.k0s()),2&w){const ue=U.$index,O=U.$count;v.Y8G("ngClass",v.eq3(3,Q,ue===O-1)),v.BMQ("aria-current",ue===O-1?"page":null),v.R7$(),v.vxM(ue!==O-1?1:2)}}let it=(()=>{var w;class U{constructor(O,V){this.breadcrumbService=O,this.router=V,this.pageTitle="",this.url="",this.nodes=[],this.hideNavOnSmallScreen=!1,this.breadcrumbs=[]}ngOnInit(){this.url||(this.url=this.router.url),this.breadcrumbs=this.breadcrumbService.createPathList(this.url,this.nodes)}static#e=w=()=>(this.\u0275fac=function(V){return new(V||U)(v.rXU(ye),v.rXU(me.Ix))},this.\u0275cmp=v.VBU({type:U,selectors:[["app-breadcrumb"]],inputs:{pageTitle:"pageTitle",url:"url",nodes:"nodes",hideNavOnSmallScreen:"hideNavOnSmallScreen"},standalone:!1,decls:6,vars:7,consts:[[1,"container-fluid","px-md-1","d-flex","flex-column","flex-md-row","align-items-md-center",3,"ngClass"],[1,"h3","fw-light","mb-0","lh-1","fv-small-caps","pb-1",3,"innerText"],["aria-label","breadcrumb",1,"ms-md-auto","mt-1","flex-shrink-0",3,"ngClass"],[1,"breadcrumb","mb-0","justify-content-md-end"],[1,"breadcrumb-item",3,"ngClass"],[3,"routerLink","innerText"],[3,"innerText"]],template:function(V,le){1&V&&(v.j41(0,"div",0),v.nrm(1,"h2",1),v.j41(2,"nav",2)(3,"ol",3),v.Z7z(4,y,3,5,"li",4,v.fX1),v.k0s()()()),2&V&&(v.Y8G("ngClass",v.eq3(3,l,le.hideNavOnSmallScreen)),v.R7$(),v.Y8G("innerText",le.pageTitle),v.R7$(),v.Y8G("ngClass",v.eq3(5,N,le.hideNavOnSmallScreen)),v.R7$(2),v.Dyx(le.breadcrumbs))},dependencies:[e.YU,x.Wk],styles:[".container-fluid[_ngcontent-%COMP%]:not(.hide-nav){margin-bottom:.75rem}.container-fluid.hide-nav[_ngcontent-%COMP%]{margin-bottom:.5rem}@media (min-width: 768px){.container-fluid.hide-nav[_ngcontent-%COMP%]{margin-bottom:.75rem}}@media (min-width: 960px){.container-fluid[_ngcontent-%COMP%]{margin-top:.5rem}}"]}))}return w(),U})()},5613:(tt,Fe,_)=>{"use strict";_.d(Fe,{D:()=>me});var he=_(467),E=_(2881),ee=_(2998),v=_(2615);let me=(()=>{var x;class e extends ee.DL{constructor(N,Q,G){super(N,G),this.graphqlService=N,this.globalsService=Q,this.requestsService=G,this.searchByNameCache={}}searchUserByName(N,Q){var G=this;return(0,he.A)(function*(){Q||(Q=(0,ee.aQ)(G.globalsService.credentials?.site.domain||ee.Zv.FORUMFREE));const q=`${Q}${N}`;if((0,ee.l$)(G.searchByNameCache,q))return G.searchByNameCache[q];const y=yield G.graphqlService.query({query:"\nquery UserSearchByName($name: String!, $cid: String) {\n    userSearchByName(name: $name, cid: $cid) {\n        uid\n        nickname\n        avatar\n    }\n}",variables:{name:N,cid:Q}});return G.searchByNameCache[q]=y.data.userSearchByName})()}static#e=x=()=>(this.\u0275fac=function(Q){return new(Q||e)(v.KVO(ee.Pp),v.KVO(E.k),v.KVO(ee.km))},this.\u0275prov=v.jDH({token:e,factory:e.\u0275fac,providedIn:"root"}))}return x(),e})()}}]);